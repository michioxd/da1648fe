(self.webpackChunk=self.webpackChunk||[]).push([[2923],{"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/_components/command-box.vue?vue&type=style&index=0&id=da28a64c&prod&lang=scss&":function(){},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/create-key.vue?vue&type=style&index=0&id=3bf2957c&prod&lang=scss&scoped=true&":function(){},"./js/pages/user/login-keys/_components/command-box.vue":function(v,g,l){"use strict";l.d(g,{Z:function(){return $}});var r=function(){var e=this,n=e._self._c,m=e._self._setupProxy;return n("div",{staticClass:"CommandBox"},[n("table",{staticClass:"table-elem --horizontal"},[n("thead",{},[n("tr",{staticClass:"table-row"},[n("th",{attrs:{width:"auto"}},[n("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"row",main:"between",cross:"center"},expression:`{
                            dir: 'row',
                            main: 'between',
                            cross: 'center',
                        }`}]},[n("span",{domProps:{textContent:e._s(e.$gettext("Command"))}}),e._v(" "),n("input-text",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!1},expression:"{ grow: false }"}],attrs:{placeholder:e.$gettext("Search")},model:{value:m.search,callback:function(i){m.search=i},expression:"search"}})],1)]),e._v(" "),n("th",{staticClass:"--min-content",attrs:{width:"auto"}},[n("input-checkbox",{attrs:{model:m.isAllAllowed,label:e.$gettext("Allow")},on:{change:m.toggleAllowAll}})],1),e._v(" "),n("th",{staticClass:"--min-content",attrs:{width:"auto"}},[n("input-checkbox",{attrs:{model:m.isAllDenied,label:e.$gettext("Deny")},on:{change:m.toggleDenyAll}})],1)])]),e._v(" "),n("tbody",e._l(m.tableRows,function(i){return n("tr",{directives:[{name:"show",rawName:"v-show",value:i.isVisible,expression:"row.isVisible"}],key:i.command},[n("td",[n("div",{staticClass:"command-description"},[n("span",{staticClass:"command-name",domProps:{textContent:e._s(i.command)}}),e._v(" "),i.hint?n("span",{staticClass:"command-hint",domProps:{textContent:e._s(i.hint)}}):e._e()])]),e._v(" "),n("td",[n("input-checkbox",{staticClass:"CommandBox__Checkbox",attrs:{model:i.isAllowed},on:{change:function(_){return m.toggleAllow(i)}}})],1),e._v(" "),n("td",[n("input-checkbox",{staticClass:"CommandBox__Checkbox",attrs:{model:i.isDenied},on:{change:function(_){return m.toggleDeny(i)}}})],1)])}),0),e._v(" "),m.filteredCommands.length===0?n("tbody",[n("tr",[n("td",{staticClass:"NoResults",attrs:{colspan:"3"}},[n("span",{domProps:{textContent:e._s(e.$gettext("No commands matching this filter..."))}})])])]):e._e()])])},y=[],c=l("../node_modules/vue/dist/vue.common.prod.js"),u=l("../node_modules/ramda/es/index.js"),S=l("./js/composables/gettext.ts");const D=()=>{const f=(0,c.computed)(()=>{const{$pgettext:e}=(0,S.Z)();return{ALL_ADMIN:e("cmd-description","All admin commands"),ALL_RESELLER:e("cmd-description","All reseller commands"),ALL_USER:e("cmd-description","All user commands"),license:e("cmd-description","View licensing information"),version:e("cmd-description","Check DirectAdmin version, change update channel, trigger DA update"),restart:e("cmd-description","Restart DirectAdmin service"),"skin-customization":e("cmd-description","Make Evolution customizations"),"skin-global-options":e("cmd-description","Make login page (global) Evolution customizations"),"convert-reseller-to-user":e("cmd-description","Tool for converting reseller account to user account, used by the reseller_to_user.sh script"),"convert-user-to-reseller":e("cmd-description","Tool for converting user account to reseller account, used by the user_to_reseller.sh script"),"email-log":e("cmd-description","E-Mail Tracking reports"),"email-logs-summary":e("cmd-description","E-Mail Summary reports"),"email-config":e("cmd-description","Downloading email account configuration for Apple devices (iOS/MacOS)"),emailvacation:e("cmd-description","Manage email vacation messages"),execute:e("cmd-description","Execute arbitrary commands on behalf of the user, API only"),clamav:e("cmd-description","Start on-demand ClamAV scans of user owned directories"),maintenance:e("cmd-description","Check and run admin maintenance tasks"),git:e("cmd-description","Create and manage user owned git repositories"),imapsync:e("cmd-description","Sync local and external mailboxes over IMAP"),redis:e("cmd-description","Start/stop user owned Redis instance, replacement for CMD_REDIS command"),"cpanel-import":e("cmd-description","Import user accounts from remote cPanel server over SSH"),"system-info":e("cmd-description","View general system and system services information"),terminal:e("cmd-description","Start web terminal with user shell"),custombuild:e("cmd-description","Install, update, remove and reconfigure software managed by CustomBuild"),wordpress:e("cmd-description","Manage WordPress installations"),"login-keys":e("cmd-description","Create and manage user login keys, replacement for CMD_LOGIN_KEYS")}});return e=>{var n;return(n=f.value[e])!==null&&n!==void 0?n:""}};var P=(0,c.defineComponent)({__name:"command-box",props:{commands:null,allow:null,deny:null},emits:["update:allow","update:deny"],setup(f,{emit:e}){const n=f,m=(0,c.ref)(""),i=(0,c.computed)(()=>n.commands.filter(a=>a.toLowerCase().includes(m.value.toLowerCase()))),_=a=>u.q9t(a,n.allow),h=a=>u.q9t(a,n.deny),j=D(),s=(0,c.computed)(()=>u.UID(a=>({command:a,isAllowed:_(a),isDenied:h(a),isVisible:i.value.includes(a),hint:j(a)}),n.commands)),t=a=>{a.isDenied&&e("update:deny",u.zud([a.command],n.deny)),e("update:allow",a.isAllowed?u.zud([a.command],n.allow):u.jj$([a.command,...n.allow]))},o=a=>{a.isAllowed&&e("update:allow",u.zud([a.command],n.allow)),e("update:deny",a.isDenied?u.zud([a.command],n.deny):u.jj$([a.command,...n.deny]))},d=(0,c.computed)(()=>s.value.every(a=>a.isAllowed)),k=(0,c.computed)(()=>s.value.every(a=>a.isDenied));return{__sfc:!0,props:n,emit:e,search:m,filteredCommands:i,isAllowed:_,isDenied:h,getCommandHint:j,tableRows:s,toggleAllow:t,toggleDeny:o,isAllAllowed:d,isAllDenied:k,toggleAllowAll:a=>{if(a){const b=u.jj$([...n.allow,...i.value]);e("update:allow",b),e("update:deny",u.zud(i.value,n.deny))}else e("update:allow",u.zud(i.value,n.allow))},toggleDenyAll:a=>{a?(e("update:deny",u.jj$([...n.deny,...i.value])),e("update:allow",u.zud(i.value,n.allow))):e("update:deny",u.zud(i.value,n.deny))}}}}),R=P,A=l("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/_components/command-box.vue?vue&type=style&index=0&id=da28a64c&prod&lang=scss&"),x=l("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),C=(0,x.Z)(R,r,y,!1,null,null,null),$=C.exports},"./js/pages/user/login-keys/create-key.vue":function(v,g,l){"use strict";l.r(g),l.d(g,{default:function(){return h}});var r=function(){var s=this,t=s._self._c,o=s._self._setupProxy;return t("app-page",{scopedSlots:s._u([{key:"details:shared",fn:function(){return[t("ui-infobar-item",{attrs:{title:o.client.scopes.layout==="standard2021"?o.$gettext("Details"):""}},[t("p",[t("span",{staticClass:"disp:block",domProps:{textContent:s._s(o.$gettext("If no commands are checked (allow and deny), all commands are allowed."))}}),s._v(" "),t("span",{domProps:{textContent:s._s(o.$gettext("The priorities for allow and deny are"))}}),s._v(" "),t("a",{attrs:{href:"http://www.directadmin.com/features.php?id=1171"},domProps:{textContent:s._s(o.$gettext("listed here."))}}),s._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:s._s(o.$gettext("The ALL_USER type commands are replaced with all commands the User is allowed, at that level."))}})]),s._v(" "),t("p",[t("span",{staticClass:"disp:block",domProps:{textContent:s._s(o.$gettext("Please Note that if a key is allowed to access ALL_USER, CMD_LOGIN_KEYS, or CMD_API_LOGIN_KEYS, that key will have sufficient privileges to create another key of higher privilege."))}}),s._v(" "),t("span",{domProps:{textContent:s._s(o.$gettext("Please keep this is mind when chosing a key's privileges."))}})])])]},proxy:!0},{key:"default",fn:function(){return[t("app-page-section",[t("ui-form-element",{attrs:{group:"createKey",validators:{required:!0}},scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Key Name:"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("A label to manage the keys. This is not the login username. (a-zA-Z0-9)"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:o.requestData.id,callback:function(d){s.$set(o.requestData,"id",d)},expression:"requestData.id"}})]},proxy:!0}])}),s._v(" "),t("ui-form-element",{attrs:{group:"createKey",validators:{required:!0,minLength:3,maxLength:256}},scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Key Value:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-password",{attrs:{"external-generator":o.randKey,type:"text"},model:{value:o.requestData.password,callback:function(d){s.$set(o.requestData,"password",d)},expression:"requestData.password"}})]},proxy:!0}])}),s._v(" "),t("ui-form-element",{scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Expires On"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("p",[t("span",{staticClass:"disp:block",domProps:{textContent:s._s(o.$gettext("If unchecked key never expires."))}})])]},proxy:!0},{key:"content",fn:function(){return[t("div",[t("div",{directives:[{name:"margin",rawName:"v-margin",value:[1,0],expression:"[1, 0]"}]},[t("input-checkbox",{model:{value:o.requestData.hasExpiry,callback:function(d){s.$set(o.requestData,"hasExpiry",d)},expression:"requestData.hasExpiry"}},[t("span",{domProps:{textContent:s._s(o.$gettext("Has expiry date"))}})])],1),s._v(" "),t("transition",{attrs:{name:"fade"}},[o.requestData.hasExpiry?t("div",{directives:[{name:"gutter",rawName:"v-gutter",value:1,expression:"1"},{name:"flex",rawName:"v-flex",value:o.client.isPhone?{dir:"column",cross:"start"}:{dir:"row",cross:"center"},expression:`
                                    client.isPhone
                                        ? { dir: 'column', cross: 'start' }
                                        : {
                                              dir: 'row',
                                              cross: 'center',
                                          }
                                `}]},[t("input-datetime",{model:{value:o.expiryDate,callback:function(d){o.expiryDate=d},expression:"expiryDate"}})],1):s._e()])],1)]},proxy:!0}])}),s._v(" "),t("ui-form-element",{scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Clear Key:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{model:{value:o.requestData.autoRemove,callback:function(d){s.$set(o.requestData,"autoRemove",d)},expression:"requestData.autoRemove"}},[t("span",{domProps:{textContent:s._s(o.$gettext("Automatically delete the key once the key expires"))}})])]},proxy:!0}])}),s._v(" "),t("ui-form-element",{scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Allow HTM:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{model:{value:o.requestData.allowLogin,callback:function(d){s.$set(o.requestData,"allowLogin",d)},expression:"requestData.allowLogin"}},[t("span",{domProps:{textContent:s._s(o.$gettext("Allow using key to log into DirectAdmin web interface, when not enabled login key can only be used for API access."))}})])]},proxy:!0}])}),s._v(" "),t("ui-form-element",{scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Commands:"))}})]},proxy:!0},{key:"content",fn:function(){return[t(o.CommandBox,{attrs:{commands:o.availableCommands,allow:o.requestData.allowCommands,deny:o.requestData.denyCommands},on:{"update:allow":function(d){o.requestData.allowCommands=d},"update:deny":function(d){o.requestData.denyCommands=d}}})]},proxy:!0}])}),s._v(" "),t("ui-form-element",{scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Allowed IPs:"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("p",[t("span",{staticClass:"disp:block",domProps:{textContent:s._s(o.$gettext("IP's in CIDR format."))}}),s._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:s._s(o.$gettext("IP without CIDR prefix will be automatically assigned with 32 IPV4 and 128 IPV6 CIDR prefix."))}})])]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},s._l(o.ips,function(d,k){return t(o.InputCidr,{directives:[{name:"margin",rawName:"v-margin",value:["5px",0],expression:"['5px', 0]"}],key:`ip-${k}`,attrs:{"convert-cidr-to-netmask":!1},on:{"update:netmask":function(p){d.netmask=p},"update:version":function(p){d.version=p}},model:{value:d.value,callback:function(p){s.$set(d,"value",p)},expression:"ip.value"}})}),1)]},proxy:!0}])}),s._v(" "),t("ui-form-element",{attrs:{group:"createKey",validators:{required:!0}},scopedSlots:s._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:s._s(o.$gettext("Current Password:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-password",{model:{value:o.requestData.currentPassword,callback:function(d){s.$set(o.requestData,"currentPassword",d)},expression:"requestData.currentPassword"}})]},proxy:!0}])})],1)]},proxy:!0},{key:"footer:buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe",disabled:!o.isNetworksValid,"validate-group":"createKey"},on:{click:o.submitCreate}},[t("span",{domProps:{textContent:s._s(o.$gettext("Create"))}})])]},proxy:!0}])})},y=[],c=l("../node_modules/vue/dist/vue.common.prod.js"),u=l("./js/composables/index.ts"),S=l("./js/pages/user/login-keys/_components/command-box.vue"),D=l("./js/components/local/input-cidr.vue"),P=l("./js/stores/index.ts"),R=l("../node_modules/vue-router/composables.mjs"),A=l("./js/openapi/formats.types.ts"),x=l("./js/pages/user/login-keys/requests.ts"),C=l("./js/pages/user/login-keys/utils.login-keys.ts"),$=l("../node_modules/date-fns/esm/addMonths/index.js");const f=(0,c.defineComponent)({name:"LoginKeysCreate",async beforeRouteEnter(j,s,t){if(x.CN.value?!1:(await(0,x.Ju)()).error!==null)return t(!1);t()}});var e=(0,c.defineComponent)({...f,props:[],emits:[],setup(j){var s;const t=(0,P.oR)("client"),{ips:o,allowedNetworks:d,isValid:k}=(0,C.KC)(),p=(0,u.d$)(),{$gettext:w}=(0,u.st)(),a=(0,R.tv)(),b=(0,c.ref)((0,$.Z)(new Date,1)),N=(0,c.ref)({allowCommands:[],allowLogin:!1,allowNetworks:[],autoRemove:!1,currentPassword:"",denyCommands:[],expires:(0,A.j)(b.value),hasExpiry:!0,id:"",password:""}),L=(0,c.ref)(((s=x.CN.value)===null||s===void 0?void 0:s.commands)||[]);return{__sfc:!0,client:t,ips:o,allowedNetworks:d,isNetworksValid:k,notify:p,$gettext:w,router:a,expiryDate:b,requestData:N,availableCommands:L,submitCreate:async()=>{const I={...N.value,expires:(0,A.j)(b.value),allowNetworks:d.value};if(!await(0,x.Tl)(I))return;const E=w("Login key created. Take note of it's value and keep it safe.");p.success({extended:!0,title:w("Login Keys"),content:`${E}
<strong>${N.value.password}</strong>`}),a.push({name:"user/login-keys",params:{tab:"keys"}})},CommandBox:S.Z,InputCidr:D.Z,randKey:C.Ql}}}),n=e,m=l("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/create-key.vue?vue&type=style&index=0&id=3bf2957c&prod&lang=scss&scoped=true&"),i=l("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),_=(0,i.Z)(n,r,y,!1,null,"3bf2957c",null),h=_.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/_components/command-box.vue?vue&type=style&index=0&id=da28a64c&prod&lang=scss&":function(v,g,l){var r=l("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/_components/command-box.vue?vue&type=style&index=0&id=da28a64c&prod&lang=scss&");r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[v.id,r,""]]),r.locals&&(v.exports=r.locals);var y=l("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,c=y("7fbd27aa",r,!0,{})},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/create-key.vue?vue&type=style&index=0&id=3bf2957c&prod&lang=scss&scoped=true&":function(v,g,l){var r=l("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/login-keys/create-key.vue?vue&type=style&index=0&id=3bf2957c&prod&lang=scss&scoped=true&");r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[v.id,r,""]]),r.locals&&(v.exports=r.locals);var y=l("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,c=y("4cd3b760",r,!0,{})}}]);
