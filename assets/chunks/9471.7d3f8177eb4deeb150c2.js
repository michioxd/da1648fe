"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9471],{"./js/api/commands/user/database.js":function(U,c,s){s.d(c,{Cp:function(){return R},Fr:function(){return o},ME:function(){return u},N8:function(){return f},Q6:function(){return D},QZ:function(){return h},Rf:function(){return m},SC:function(){return i},Vt:function(){return T},ZY:function(){return Z},ab:function(){return p},cn:function(){return l},l1:function(){return A},nv:function(){return G},oP:function(){return E},oi:function(){return n},p_:function(){return S},q3:function(){return I},rW:function(){return _},th:function(){return C},vc:function(){return v},xf:function(){return g}});var e=s("./js/api/command/index.js"),a=s("../node_modules/ramda/es/index.js");const m=e.Z.get({id:"DB_USERS",url:"/CMD_DB_CREATE",domain:!0,mapResponse:{users:a.zGw(a.CEd(["MAX_DB_LENGTH","MAX_DB_USER_LENGTH"]),a.VO0,a.hXT(({text:t})=>t!=="..."),a.UID(t=>({value:t.value,label:t.text}))),max_db_length:a.vgT("MAX_DB_LENGTH"),max_db_user_length:a.vgT("MAX_DB_USER_LENGTH")}}),p=e.Z.post({url:"/CMD_DB",params:{action:"create"},domain:!0,schema:{name:e.Z.REQUIRED_STRING,user:e.Z.REQUIRED_STRING,passwd:e.Z.OPTIONAL_STRING,passwd2:e.Z.OPTIONAL_STRING,userlist:e.Z.OPTIONAL_STRING},after:t=>t.mapProp("result",t.convert.toAppHtml)}),R=e.Z.get({id:"DATABASES",url:"/CMD_DB",domain:!0,pagination:!0,after:t=>t.mapProps({databases:t.toTable(t.mapArrayProps({nusers:t.convert.toAppNumber,size:t.convert.toAppNumber})),HAVE_ONE_CLICK_PMA_LOGIN:t.convert.toAppBoolean,total_usage:t.convert.toAppNumber,dbs_select:t.toSelect})}),r=e.Z.select({url:"/CMD_DB",domain:!0,params:{json:!0}}),_=r.extend({params:{repair:!0}}),E=r.extend({params:{check:!0}}),D=r.extend({params:{optimize:!0}}),I=r.extend({params:{delete_db:!0}}),S=e.Z.post({url:"/CMD_DB",params:{action:"restore",method:"default"},domain:!0,schema:{name:e.Z.REQUIRED_STRING,dbuser:e.Z.REQUIRED_STRING,dbpass:e.Z.REQUIRED_STRING,file:{type:File,required:!0}},before:({file:t})=>({file1:t,file:null}),fileTransfer:!0,continous:!0}),f=e.Z.get({id:"DB_VIEW",url:"/CMD_DB_VIEW",params:{page:1,ipp:9999},domain:!0,schema:{name:e.Z.REQUIRED_STRING},after:t=>t.flow(t.project({hosts:"access_hosts",users:"db_users",pmaLogin:"HAVE_ONE_CLICK_PMA_LOGIN"}),t.mapProps({users:t.flow(t.deleteProp("info"),t.toArray,t.mapArray(t.getProp("User"))),hosts:t.flow(t.deleteProp("info"),t.toArray,t.mapArray(t.getProp("Access Hosts"))),pmaLogin:t.convert.toAppBoolean}))}),T=e.Z.post({url:"/CMD_DB",method:"POST",params:{action:"deleteuser",delete:!0,json:!0},domain:!0,schema:{name:e.Z.REQUIRED_STRING,select:e.Z.ROWS}}),A=e.Z.post({url:"/CMD_DB_ACCESS",domain:!0,params:{add:!0,json:!0},schema:{name:e.Z.REQUIRED_STRING,host:e.Z.REQUIRED_STRING}}),i=e.Z.select({url:"/CMD_DB_ACCESS",domain:!0,params:{delete:!0,json:!0},schema:{name:e.Z.REQUIRED_STRING}}),l=e.Z.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0},schema:{name:e.Z.REQUIRED_STRING,passwd:e.Z.REQUIRED_STRING,passwd2:e.Z.REQUIRED_STRING}}),Z=e.Z.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0,passwd:"*****",passwd2:"*****"},schema:{name:e.Z.REQUIRED_STRING,userlist:e.Z.REQUIRED_STRING}}),n=e.Z.post({url:"/CMD_DB",domain:!0,params:{action:"modifyuser",json:!0},schema:{name:e.Z.REQUIRED_STRING,user:e.Z.REQUIRED_STRING,passwd:e.Z.REQUIRED_STRING,passwd2:e.Z.REQUIRED_STRING}}),o=e.Z.get({id:"DB_USER_PRIVS",url:"/CMD_DB_USER_PRIVS",domain:!0,schema:{name:e.Z.REQUIRED_STRING,user:e.Z.REQUIRED_STRING},after:t=>t.mapValues(t.isEqual("Y"))}),u=e.Z.post({url:"/CMD_DB_USER_PRIVS",domain:!0,params:{action:"save "},body:{name:e.Z.REQUIRED_STRING,user:e.Z.REQUIRED_STRING}}),h=e.Z.post({url:"/CMD_PMA_LOGIN",domain:!0,params:{json:!0},notifySuccess:!1,notifyError:!1,schema:{name:e.Z.REQUIRED_STRING}}),v=e.Z.post({url:"/CMD_PMA_LOGIN",params:{json:!0,name:"all",domain:""},notifySuccess:!1,notifyError:!1}),G=e.Z.get({url:"/CMD_DB",response:!1,mapResponse:t=>t.HAVE_ONE_CLICK_PMA_LOGIN==="yes",notifyError:!1}),g=m.extend({mapResponse:t=>Object.values(t).reduce((d,N)=>(N.text&&N.text!=="..."&&d.push(N.text),d),[])}),C=e.Z.get({id:"WORDPRESS_DB_LIST",url:"/CMD_DB",domain:!0,response:[],params:{ipp:999999999},mapResponse:({databases:t})=>(delete t.info,Object.values(t).map(d=>d.database))})},"./js/pages/phpmyadmin.vue":function(U,c,s){s.r(c),s.d(c,{default:function(){return f}});var e=s("./js/api/commands/user/database.js"),a=s("./js/vue-globals/helpers.js"),m=s("./js/composables/index.ts");const{session:p,flags:R}=(0,m.kP)();var r={name:"PhpMyAdmin",async beforeRouteEnter(T,A,i){const l=await(0,e.nv)(),Z=l instanceof Error;if(l&&!Z){const n=await(0,e.vc)();if(!(n instanceof Error)){const{token:o,url:u}=n;(0,a.YQ)(`${u}?token=${o}`),i(!1);return}}if(R.server.phpmyadminPublic){const{webappsSSL:n,servername:o}=p,u=n?"https":"http";(0,a.YQ)(`${u}://${o}/phpmyadmin`)}i(!1)},render:()=>null},_=r,E=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),D,I,S=(0,E.Z)(_,D,I,!1,null,null,null),f=S.exports}}]);
