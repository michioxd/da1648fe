(self.webpackChunk=self.webpackChunk||[]).push([[3441],{"./js/api/commands/user/database.js":function(y,f,n){"use strict";n.d(f,{Cp:function(){return m},Fr:function(){return k},ME:function(){return E},N8:function(){return g},Q6:function(){return c},QZ:function(){return P},Rf:function(){return _},SC:function(){return R},Vt:function(){return i},ZY:function(){return j},ab:function(){return d},cn:function(){return D},l1:function(){return b},nv:function(){return w},oP:function(){return u},oi:function(){return A},p_:function(){return o},q3:function(){return v},rW:function(){return x},th:function(){return C},vc:function(){return U},xf:function(){return $}});var t=n("./js/api/command/index.js"),l=n("../node_modules/ramda/es/index.js");const _=t.Z.get({id:"DB_USERS",url:"/CMD_DB_CREATE",domain:!0,mapResponse:{users:l.zGw(l.CEd(["MAX_DB_LENGTH","MAX_DB_USER_LENGTH"]),l.VO0,l.hXT(({text:a})=>a!=="..."),l.UID(a=>({value:a.value,label:a.text}))),max_db_length:l.vgT("MAX_DB_LENGTH"),max_db_user_length:l.vgT("MAX_DB_USER_LENGTH")}}),d=t.Z.post({url:"/CMD_DB",params:{action:"create"},domain:!0,schema:{name:t.Z.REQUIRED_STRING,user:t.Z.REQUIRED_STRING,passwd:t.Z.OPTIONAL_STRING,passwd2:t.Z.OPTIONAL_STRING,userlist:t.Z.OPTIONAL_STRING},after:a=>a.mapProp("result",a.convert.toAppHtml)}),m=t.Z.get({id:"DATABASES",url:"/CMD_DB",domain:!0,pagination:!0,after:a=>a.mapProps({databases:a.toTable(a.mapArrayProps({nusers:a.convert.toAppNumber,size:a.convert.toAppNumber})),HAVE_ONE_CLICK_PMA_LOGIN:a.convert.toAppBoolean,total_usage:a.convert.toAppNumber,dbs_select:a.toSelect})}),h=t.Z.select({url:"/CMD_DB",domain:!0,params:{json:!0}}),x=h.extend({params:{repair:!0}}),u=h.extend({params:{check:!0}}),c=h.extend({params:{optimize:!0}}),v=h.extend({params:{delete_db:!0}}),o=t.Z.post({url:"/CMD_DB",params:{action:"restore",method:"default"},domain:!0,schema:{name:t.Z.REQUIRED_STRING,dbuser:t.Z.REQUIRED_STRING,dbpass:t.Z.REQUIRED_STRING,file:{type:File,required:!0}},before:({file:a})=>({file1:a,file:null}),fileTransfer:!0,continous:!0}),g=t.Z.get({id:"DB_VIEW",url:"/CMD_DB_VIEW",params:{page:1,ipp:9999},domain:!0,schema:{name:t.Z.REQUIRED_STRING},after:a=>a.flow(a.project({hosts:"access_hosts",users:"db_users",pmaLogin:"HAVE_ONE_CLICK_PMA_LOGIN"}),a.mapProps({users:a.flow(a.deleteProp("info"),a.toArray,a.mapArray(a.getProp("User"))),hosts:a.flow(a.deleteProp("info"),a.toArray,a.mapArray(a.getProp("Access Hosts"))),pmaLogin:a.convert.toAppBoolean}))}),i=t.Z.post({url:"/CMD_DB",method:"POST",params:{action:"deleteuser",delete:!0,json:!0},domain:!0,schema:{name:t.Z.REQUIRED_STRING,select:t.Z.ROWS}}),b=t.Z.post({url:"/CMD_DB_ACCESS",domain:!0,params:{add:!0,json:!0},schema:{name:t.Z.REQUIRED_STRING,host:t.Z.REQUIRED_STRING}}),R=t.Z.select({url:"/CMD_DB_ACCESS",domain:!0,params:{delete:!0,json:!0},schema:{name:t.Z.REQUIRED_STRING}}),D=t.Z.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0},schema:{name:t.Z.REQUIRED_STRING,passwd:t.Z.REQUIRED_STRING,passwd2:t.Z.REQUIRED_STRING}}),j=t.Z.post({url:"/CMD_DB",domain:!0,params:{action:"createuser",json:!0,passwd:"*****",passwd2:"*****"},schema:{name:t.Z.REQUIRED_STRING,userlist:t.Z.REQUIRED_STRING}}),A=t.Z.post({url:"/CMD_DB",domain:!0,params:{action:"modifyuser",json:!0},schema:{name:t.Z.REQUIRED_STRING,user:t.Z.REQUIRED_STRING,passwd:t.Z.REQUIRED_STRING,passwd2:t.Z.REQUIRED_STRING}}),k=t.Z.get({id:"DB_USER_PRIVS",url:"/CMD_DB_USER_PRIVS",domain:!0,schema:{name:t.Z.REQUIRED_STRING,user:t.Z.REQUIRED_STRING},after:a=>a.mapValues(a.isEqual("Y"))}),E=t.Z.post({url:"/CMD_DB_USER_PRIVS",domain:!0,params:{action:"save "},body:{name:t.Z.REQUIRED_STRING,user:t.Z.REQUIRED_STRING}}),P=t.Z.post({url:"/CMD_PMA_LOGIN",domain:!0,params:{json:!0},notifySuccess:!1,notifyError:!1,schema:{name:t.Z.REQUIRED_STRING}}),U=t.Z.post({url:"/CMD_PMA_LOGIN",params:{json:!0,name:"all",domain:""},notifySuccess:!1,notifyError:!1}),w=t.Z.get({url:"/CMD_DB",response:!1,mapResponse:a=>a.HAVE_ONE_CLICK_PMA_LOGIN==="yes",notifyError:!1}),$=_.extend({mapResponse:a=>Object.values(a).reduce((S,I)=>(I.text&&I.text!=="..."&&S.push(I.text),S),[])}),C=t.Z.get({id:"WORDPRESS_DB_LIST",url:"/CMD_DB",domain:!0,response:[],params:{ipp:999999999},mapResponse:({databases:a})=>(delete a.info,Object.values(a).map(S=>S.database))})},"./js/api/commands/validation/index.js":function(y,f,n){"use strict";n.d(f,{i9:function(){return b},ty:function(){return g},l7:function(){return v},OE:function(){return i},ub:function(){return A},oH:function(){return x},U5:function(){return u},k_:function(){return h},PR:function(){return o},uo:function(){return j},Jj:function(){return D},rV:function(){return R}});var t=n("./js/api/command/index.js"),l=n("../node_modules/punycode/punycode.es6.js"),_=n("./js/api/commands/converters/index.ts"),d={isValid(E){return typeof E.error=="undefined"},getMessage(E){return(0,_.S8)(E.error||"")}};const m=t.Z.get({url:"/CMD_JSON_VALIDATE",schema:{value:t.Z.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:d.isValid,message:d.getMessage}}),h=m.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}}),x=m.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}}),u=m.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0}),c=m.extend({params:{type:"dns"},domain:!0,schema:{record:t.Z.REQUIRED_STRING}}),v=c.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:t.Z.REQUIRED_STRING}}),o=v.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:({value:E})=>({value:"10",mx_value:E})}),g=c.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:t.Z.REQUIRED_STRING,value:null}}),i=m.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}}),b=m.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}}),R=m.extend({id:"VALIDATE_USERNAME",params:{type:"username"}}),D=m.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}}),j=m.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}}),A=m.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:({value:E})=>({value:l.ZP.toASCII(E)})}),k=m.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}})},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/change-db-user-privs-dialog.vue?vue&type=style&index=0&id=2862fb2a&prod&lang=scss&scoped=true&":function(){},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/create-db-user-dialog.vue?vue&type=style&index=0&id=fd14241a&prod&lang=scss&scoped=true&":function(){},"./js/api/commands/converters/customItems.ts":function(y,f,n){"use strict";n.d(f,{CR:function(){return m}});var t=n("../node_modules/ramda/es/index.js"),l=n("./js/api/commands/converters/index.ts"),_=n("./js/api/commands/utils/transduce.ts"),d=n("./js/api/commands/converters/toSelectData.ts");const m=u=>{const c={name:u.name,type:u.type==="listbox"?"select":u.type,label:u.string,description:u.desc||"",value:u.type==="checkbox"?(0,l.sw)(u.checked||"no"):u.value||""};return c.type==="select"?t.BPw(c,(0,d.M1)(u.select||{})):c},h=u=>(0,_.vr)([(0,_.uD)(c=>/^item\d+val$/.test(c)),(0,_.r5)(c=>{const v=c,o=c.replace("val","txt"),g=u[v],i=u[o];return{[g]:i}})],Object.keys(u)),x=(u,c)=>t.qCK(o=>{const g={name:o.name,type:o.type==="listbox"?"select":o.type,description:o.desc||"",value:o.value||"",label:o.string};return o.type==="listbox"?(g.value=o.default,g.options=h(o)):o.type==="checkbox"&&(g.value=o.checked==="yes"),g},t.BPw({name:u}),(0,_.vr)([(0,_.r5)(o=>{const[g,i]=t.Vl2("=",o);return{[g]:i}})]),t.Vl2("&"))(c);f.ZP={fromObject:m,fromString:x}},"./js/api/commands/converters/index.ts":function(y,f,n){"use strict";n.d(f,{l$:function(){return v.ZP},t0:function(){return t.t0},S8:function(){return t.S8},ql:function(){return t.ql},sw:function(){return t.sw},Qu:function(){return t.Qu},He:function(){return t.He},M1:function(){return c.M1},sf:function(){return g},cc:function(){return u}});var t=n("./js/api/commands/converters/primitive.ts"),l=n("../node_modules/monet/dist/monet.js"),_=n("./js/api/commands/types.ts");const d=i=>typeof i=="object"?l.Either.Right(i):l.Either.Left(new Error("Passed param is not an object")),m=i=>typeof i.usage=="string"?l.Either.Right(i):l.Either.Left(new Error("usage property is required")),h=i=>({usage:(0,t.He)(i.usage),limit:(0,t.Qu)(i.limit)}),x=({usage:i,limit:b})=>{let R=_.H.Normal;const D=Math.floor(i/b*100);return D>=100?R=_.H.OverUsed:D>80&&(R=_.H.AlmostUsed),{usage:i,limit:b,status:R}},u=i=>{const b=l.Either.Right(i).flatMap(d).flatMap(m).map(h).map(x);if(b.isLeft())throw b.left();return b.right()};var c=n("./js/api/commands/converters/toSelectData.ts"),v=n("./js/api/commands/converters/customItems.ts"),o=n("../node_modules/ramda/es/index.js");const g=i=>b=>{const{info:R}=b,D=o.CEd(["info"],b);return{columns:R.columns,rowsCount:Number(R.rows),rows:o.UID(i,o.VO0(D))}}},"./js/api/commands/converters/toSelectData.ts":function(y,f,n){"use strict";n.d(f,{M1:function(){return x}});var t=n("../node_modules/monet/dist/monet.js"),l=n.n(t),_=n("./js/api/commands/utils/transduce.ts"),d=n("../node_modules/ramda/es/index.js");const m=u=>t.Maybe.Some(u).flatMap(c=>{const v=c.find(o=>o.selected==="yes");return v?t.Maybe.Some(v):t.Maybe.None()}).flatMap(c=>t.Maybe.fromNull(c.value)).orSome(""),h=(0,_.vr)([(0,_.r5)(u=>({[u.value]:u.text}))]),x=u=>{const c=(0,d.VO0)(u);return{value:m(c),options:h(c)}}},"./js/api/commands/types.ts":function(y,f,n){"use strict";n.d(f,{H:function(){return t}});var t;(function(l){l.Normal="normal",l.AlmostUsed="almost_used",l.OverUsed="overused"})(t||(t={}))},"./js/api/commands/utils/transduce.ts":function(y,f,n){"use strict";n.d(f,{Re:function(){return d},r5:function(){return l},uD:function(){return _},vr:function(){return c},zh:function(){return x}});var t=n("../node_modules/ramda/es/index.js");const l=v=>o=>(g,i)=>{const b=v(i);return o(g,b)},_=v=>o=>(g,i)=>v(i)?o(g,i):g,d=(v,o)=>(v.push(o),v),m=(v,o)=>t.BPw(v,o),h=(v,o,g,i)=>{const b=t.qCK(...g);return i.reduce(b(o),v)},x=t.WAo(h),u=x([],d),c=x({},m)},"./js/pages/user/database/view.vue":function(y,f,n){"use strict";n.r(f),n.d(f,{default:function(){return B}});var t=function(){var e=this,s=e._self._c;return s("app-page",{attrs:{actions:[{handler:e.loginPMA,label:e.$gettext("Login to phpMyAdmin"),icon:"phpmyadmin",visible:e.$api.db.pmaLogin,theme:"light"}]}},[s("app-page-section",{scopedSlots:e._u([{key:"section:title",fn:function(){return[e._v(e._s(e.$gettext("Users")))]},proxy:!0}])},[e._v(" "),s("ui-r-table",e._b({on:{"update:checkedRows":function(r){e.checkedUserRows=r}},scopedSlots:e._u([{key:"table:actions",fn:function(){return[s("ui-table-action",{on:{click:function(r){e.$dialog("DELETE_USERS_DIALOG").open()}}},[s("span",{domProps:{textContent:e._s(e.$gettext("Delete"))}})])]},proxy:!0},{key:"col:priv",fn:function({user:r}){return[s("ui-link",{on:{click:function(V){return e.changePrivilegesDialog(r)}}},[e.clientStore.isPhone?s("span",{domProps:{textContent:e._s(e.$gettext("Modify"))}}):s("span",{domProps:{textContent:e._s(e.$gettext("Modify Privileges"))}})])]}},{key:"col:password",fn:function({user:r}){return[s("ui-link",{on:{click:function(V){return e.changePasswordDialog(r)}}},[e.clientStore.isPhone?s("span",{domProps:{textContent:e._s(e.$gettext("Change"))}}):s("span",{domProps:{textContent:e._s(e.$gettext("Change Password"))}})])]}},{key:"buttons:before",fn:function(){return[s("ui-button",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}],attrs:{theme:"safe",size:"normal"},on:{click:function(r){e.$dialog("CREATE_DB_USER_DIALOG").open()}}},[s("span",{domProps:{textContent:e._s(e.$gettext("Create New User"))}})]),e._v(" "),e.notAssignedUsers.length?s("ui-button",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}],attrs:{theme:"primary",size:"normal"},on:{click:function(r){e.$dialog("ASSIGN_DB_USER_DIALOG").open()}}},[s("span",{domProps:{textContent:e._s(e.$gettext("Add Existing User"))}})]):e._e()]},proxy:!0}])},"ui-r-table",{columns:[{id:"user",label:e.$gettext("User")},{id:"password",label:e.$gettext("Password")},{id:"priv",label:e.$gettext("Privileges")}],rows:e.users,checkedRows:e.checkedUserRows,verticalLayout:e.clientStore.isPhone,editable:!1},!1))],1),e._v(" "),s("app-page-section",{scopedSlots:e._u([{key:"section:title",fn:function(){return[e._v(e._s(e.$gettext("Access Hosts")))]},proxy:!0}])},[e._v(" "),s("ui-r-table",e._b({attrs:{"hide-before-controls":""},on:{"update:checkedRows":function(r){e.checkedHostRows=r}},scopedSlots:e._u([{key:"table:actions",fn:function(){return[s("ui-table-action",{on:{click:function(r){e.$dialog("DELETE_HOSTS_DIALOG").open()}}},[s("span",{domProps:{textContent:e._s(e.$gettext("Delete"))}})])]},proxy:!0},{key:"buttons:after",fn:function(){return[s("ui-input-group",{scopedSlots:e._u([{key:"input",fn:function(){return[s("input-text",{attrs:{placeholder:e.$gettext("Access Host")},on:{keydown:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.addNewAccessHost.apply(null,arguments)}},model:{value:e.host,callback:function(r){e.host=r},expression:"host"}})]},proxy:!0},{key:"additions:right",fn:function(){return[s("ui-button",{attrs:{theme:"safe"},on:{click:e.addNewAccessHost}},[s("span",{staticClass:"wrap:nowrap",domProps:{textContent:e._s(e.$gettext("Add New"))}})])]},proxy:!0}])})]},proxy:!0}])},"ui-r-table",{rows:e.hosts,columns:[{id:"host",label:e.$gettext("Access Host")}],checkedRows:e.checkedHostRows,notCheckable:e.hosts.filter(r=>r.host==="localhost")},!1))],1),e._v(" "),s("create-db-user-dialog",e._b({on:{userAdded:e.reload}},"create-db-user-dialog",{database:e.database},!1)),e._v(" "),s("existing-db-user-dialog",e._b({on:{userAssigned:e.reload}},"existing-db-user-dialog",{database:e.database,users:e.notAssignedUsers},!1)),e._v(" "),s("ui-dialog-delete-items",{attrs:{id:"DELETE_HOSTS_DIALOG",subject:e.$ngettext("Access host","Access hosts",e.checkedHosts.length)},on:{"click:confirm":e.deleteHosts}}),e._v(" "),s("ui-dialog-delete-items",{attrs:{id:"DELETE_USERS_DIALOG",subject:e.$ngettext("user","users",e.checkedUsers.length)},on:{"click:confirm":e.deleteUsers}}),e._v(" "),s("change-db-user-pass-dialog",{attrs:{database:e.database,user:e.currentUser}}),e._v(" "),s("change-db-user-privs-dialog",{attrs:{database:e.database,user:e.currentUser}})],1)},l=[],_=n("./js/stores/index.ts"),d=n("./js/api/commands/user/database.js"),m=function(){var e=this,s=e._self._c;return s("ui-dialog",{attrs:{id:"CREATE_DB_USER_DIALOG"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(`
        `+e._s(e.$gettextInterpolate(e.$gettext("Create New User for %{database}"),{database:e.database}))+`
    `)]},proxy:!0},{key:"content",fn:function(){return[s("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,api:e.$commands.validateDBUser},vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Username:")))]},proxy:!0},{key:"content",fn:function(){return[s("input-text",e._b({model:{value:e.user,callback:function(r){e.user=r},expression:"user"}},"input-text",{prefix:e.prefix},!1))]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,api:e.$commands.validatePassword},vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Password:")))]},proxy:!0},{key:"content",fn:function(){return[s("input-password",{attrs:{"show-generator":""},model:{value:e.passwd,callback:function(r){e.passwd=r},expression:"passwd"}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[s("ui-button",{attrs:{theme:"primary","validate-group":"createUser"},on:{click:e.submit}},[s("span",{domProps:{textContent:e._s(e.$gettext("Create"))}})])]},proxy:!0}])})},h=[],x=n("./js/api/commands/validation/index.js"),u={commands:{validateDBUser:x.i9,validatePassword:x.uo},props:{database:{type:String,required:!0}},data(){return{user:"",passwd:""}},computed:{prefix(){return`${this.$_useStore("user").name}_`}},methods:{async submit(){await(0,d.cn)({name:this.database,user:this.user,passwd:this.passwd,passwd2:this.passwd})&&this.$emit("userAdded")}}},c=u,v=n("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/create-db-user-dialog.vue?vue&type=style&index=0&id=fd14241a&prod&lang=scss&scoped=true&"),o=n("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),g=(0,o.Z)(c,m,h,!1,null,"fd14241a",null),i=g.exports,b=function(){var e=this,s=e._self._c;return s("ui-dialog",{attrs:{id:"ASSIGN_DB_USER_DIALOG",size:"small"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(`
        `+e._s(e.$gettextInterpolate(e.$gettext("Assign Existing User to %{database}"),{database:e.database}))+`
    `)]},proxy:!0},{key:"content",fn:function(){return[s("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Username:")))]},proxy:!0},{key:"content",fn:function(){return[s("ui-input-group",{scopedSlots:e._u([{key:"additions:left",fn:function(){return[s("ui-button",{attrs:{disabled:""}},[e._v(`
                            `+e._s(e.$_useStore("user").name)+`_
                        `)])]},proxy:!0},{key:"input",fn:function(){return[s("input-select",{attrs:{options:e.users},model:{value:e.user,callback:function(r){e.user=r},expression:"user"}})]},proxy:!0}])})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[s("ui-button",{attrs:{theme:"primary"},on:{click:e.submit}},[s("span",{domProps:{textContent:e._s(e.$gettext("Assign"))}})])]},proxy:!0}])})},R=[],D={props:{database:{type:String,required:!0},users:{type:Array,required:!0}},data(){return{user:""}},methods:{async submit(){await(0,d.ZY)({name:this.database,userlist:this.user})&&this.$emit("userAssigned")}}},j=D,A=(0,o.Z)(j,b,R,!1,null,null,null),k=A.exports,E=function(){var e=this,s=e._self._c;return s("ui-dialog",e._g({attrs:{id:"CHANGE_DB_USER_PASS_DIALOG",title:e.$gettext("Change password")},scopedSlots:e._u([{key:"content",fn:function(){return[s("div",[s("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Username:")))]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{attrs:{value:e.user,disabled:""}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{group:"changePassword",validators:{required:!0,api:e.$commands.validatePassword},vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Password:")))]},proxy:!0},{key:"content",fn:function(){return[s("input-password",{attrs:{"show-generator":""},model:{value:e.passwd,callback:function(r){e.passwd=r},expression:"passwd"}})]},proxy:!0}])})],1)]},proxy:!0},{key:"buttons",fn:function(){return[s("ui-button",{attrs:{theme:"primary","validate-group":"changePassword"},on:{click:e.submit}},[s("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])},e.$listeners))},P=[],U={commands:{validatePassword:x.uo},props:{database:{type:String,required:!0},user:{type:String,required:!0}},data(){return{passwd:""}},methods:{submit(){(0,d.oi)({name:this.database,user:this.user,passwd:this.passwd,passwd2:this.passwd})}}},w=U,$=(0,o.Z)(w,E,P,!1,null,null,null),C=$.exports,a=function(){var e=this,s=e._self._c;return s("ui-dialog",{attrs:{id:"CHANGE_DB_USER_PRIVS_DIALOG",size:"normal",title:e.$gettext("Change privileges")},on:{"dialog:open":e.loadUserPrivs},scopedSlots:e._u([{key:"content",fn:function(){return[s("ui-form-element",{attrs:{vertical:e.clientStore.isPhone},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Username")))]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{attrs:{disabled:"",value:e.user}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{vertical:e.clientStore.isPhone},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Privileges:")))]},proxy:!0},{key:"content",fn:function(){return[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter:padding",value:1,expression:"1",arg:"padding"}],staticClass:"privs-flex"},[s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Select")},model:{value:e.privileges.select,callback:function(r){e.$set(e.privileges,"select",r)},expression:"privileges.select"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Insert")},model:{value:e.privileges.insert,callback:function(r){e.$set(e.privileges,"insert",r)},expression:"privileges.insert"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Update")},model:{value:e.privileges.update,callback:function(r){e.$set(e.privileges,"update",r)},expression:"privileges.update"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Delete")},model:{value:e.privileges.delete,callback:function(r){e.$set(e.privileges,"delete",r)},expression:"privileges.delete"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Create")},model:{value:e.privileges.create,callback:function(r){e.$set(e.privileges,"create",r)},expression:"privileges.create"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Drop")},model:{value:e.privileges.drop,callback:function(r){e.$set(e.privileges,"drop",r)},expression:"privileges.drop"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Alter")},model:{value:e.privileges.alter,callback:function(r){e.$set(e.privileges,"alter",r)},expression:"privileges.alter"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Index")},model:{value:e.privileges.index,callback:function(r){e.$set(e.privileges,"index",r)},expression:"privileges.index"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Grant")},model:{value:e.privileges.grant,callback:function(r){e.$set(e.privileges,"grant",r)},expression:"privileges.grant"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Reference")},model:{value:e.privileges.reference,callback:function(r){e.$set(e.privileges,"reference",r)},expression:"privileges.reference"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Create tmp tables")},model:{value:e.privileges.tmp_table,callback:function(r){e.$set(e.privileges,"tmp_table",r)},expression:"privileges.tmp_table"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Lock Tables")},model:{value:e.privileges.lock_table,callback:function(r){e.$set(e.privileges,"lock_table",r)},expression:"privileges.lock_table"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Show View")},model:{value:e.privileges.show_view_priv,callback:function(r){e.$set(e.privileges,"show_view_priv",r)},expression:"privileges.show_view_priv"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Create Routine")},model:{value:e.privileges.create_routine_priv,callback:function(r){e.$set(e.privileges,"create_routine_priv",r)},expression:"privileges.create_routine_priv"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Alter Routine")},model:{value:e.privileges.alter_routine_priv,callback:function(r){e.$set(e.privileges,"alter_routine_priv",r)},expression:"privileges.alter_routine_priv"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Execute")},model:{value:e.privileges.execute_priv,callback:function(r){e.$set(e.privileges,"execute_priv",r)},expression:"privileges.execute_priv"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Create View")},model:{value:e.privileges.create_view_priv,callback:function(r){e.$set(e.privileges,"create_view_priv",r)},expression:"privileges.create_view_priv"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Event")},model:{value:e.privileges.event_priv,callback:function(r){e.$set(e.privileges,"event_priv",r)},expression:"privileges.event_priv"}}),e._v(" "),s("input-checkbox",{attrs:{label:e.$pgettext("mysql_privs","Trigger")},model:{value:e.privileges.trigger_priv,callback:function(r){e.$set(e.privileges,"trigger_priv",r)},expression:"privileges.trigger_priv"}})],1)]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[s("ui-button",{attrs:{theme:"primary"},on:{click:e.submit}},[s("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])})},S=[],I=n("./js/modules/utils/index.js"),N={props:{database:{type:String,required:!0},user:{type:String,required:!0}},data(){return{privileges:{alter:!1,alter_routine_priv:!1,create:!1,create_routine_priv:!1,create_view_priv:!1,delete:!1,drop:!1,event_priv:!1,execute_priv:!1,grant:!1,index:!1,insert:!1,lock_table:!1,reference:!1,select:!1,show_view_priv:!1,tmp_table:!1,trigger_priv:!1,update:!1}}},computed:{requestData(){const p=I._.mapValues(this.privileges,e=>e?"Y":"N");return{name:this.database,user:this.user,...p}},...(0,_.Kc)(["client"])},methods:{async loadUserPrivs(){this.privileges=Object.assign(this.privileges,await(0,d.Fr)({name:this.database,user:this.user}))},submit(){(0,d.ME)(this.requestData)}}},T=N,H=n("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/change-db-user-privs-dialog.vue?vue&type=style&index=0&id=2862fb2a&prod&lang=scss&scoped=true&"),M=(0,o.Z)(T,a,S,!1,null,"2862fb2a",null),L=M.exports,O={preload:[({database:p})=>(0,d.N8)({name:p}),d.Rf],api:[{command:d.N8,bind:"db"},{command:d.Rf,bind:{"response.users":"users"}}],components:{CreateDbUserDialog:i,ExistingDbUserDialog:k,ChangeDbUserPassDialog:C,ChangeDbUserPrivsDialog:L},props:{database:{type:String,required:!0}},data(){return{checkedUserRows:[],checkedHostRows:[],host:"",currentUser:""}},computed:{users(){return this.$api.db.users.map(p=>({user:p}))},hosts(){return this.$api.db.hosts.map(p=>({host:p}))},checkedUsers(){return this.checkedUserRows.map(p=>p.user)},checkedHosts(){return this.checkedHostRows.map(p=>p.host)},notAssignedUsers(){const p=this.$_useStore("user").name,e=s=>!this.$api.db.users.includes(`${p}_${s}`);return this.$api.users.map(({value:s})=>s).filter(e)},...(0,_.Kc)(["client"])},watch:{$domain(){this.reload()}},methods:{async deleteHosts(){await(0,d.SC)({name:this.database,select:this.checkedHosts})&&(this.reload(),this.checkedHostRows=[])},async deleteUsers(){await(0,d.Vt)({name:this.database,select:this.checkedUsers})&&(this.reload(),this.checkedUserRows=[])},async addNewAccessHost(){await(0,d.l1)({name:this.database,host:this.host})&&this.reload()},reload(){(0,d.N8)({name:this.database})},changePasswordDialog(p){this.currentUser=p,this.$dialog("CHANGE_DB_USER_PASS_DIALOG").open()},async changePrivilegesDialog(p){this.currentUser=p,this.$dialog("CHANGE_DB_USER_PRIVS_DIALOG").open()},async loginPMA(){if((await(0,d.QZ)({name:this.database})).success==="yes"){const e=window.document.createElement("form");e.action="/CMD_PMA_LOGIN",e.method="POST",e.target="_blank";const s=window.document.createElement("input");s.type="hidden",s.name="domain",s.value=this.$domainUnicode,e.appendChild(s);const r=window.document.createElement("input");r.type="hidden",r.name="name",r.value=this.database,e.appendChild(r),window.document.body.appendChild(e),e.submit()}}}},Z=O,G=(0,o.Z)(Z,t,l,!1,null,null,null),B=G.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/change-db-user-privs-dialog.vue?vue&type=style&index=0&id=2862fb2a&prod&lang=scss&scoped=true&":function(y,f,n){var t=n("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/change-db-user-privs-dialog.vue?vue&type=style&index=0&id=2862fb2a&prod&lang=scss&scoped=true&");t.__esModule&&(t=t.default),typeof t=="string"&&(t=[[y.id,t,""]]),t.locals&&(y.exports=t.locals);var l=n("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,_=l("6044cc89",t,!0,{})},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/create-db-user-dialog.vue?vue&type=style&index=0&id=fd14241a&prod&lang=scss&scoped=true&":function(y,f,n){var t=n("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/database/_dialogs/create-db-user-dialog.vue?vue&type=style&index=0&id=fd14241a&prod&lang=scss&scoped=true&");t.__esModule&&(t=t.default),typeof t=="string"&&(t=[[y.id,t,""]]),t.locals&&(y.exports=t.locals);var l=n("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,_=l("fdbd6a22",t,!0,{})}}]);
