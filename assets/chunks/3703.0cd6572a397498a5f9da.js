(self.webpackChunk=self.webpackChunk||[]).push([[3703],{"../node_modules/date-fns/esm/formatDistance/index.js":function($,M,n){"use strict";n.d(M,{Z:function(){return w}});var c=n("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),i=n("../node_modules/date-fns/esm/toDate/index.js"),m=n("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function v(a,o){(0,m.Z)(2,arguments);var s=(0,i.Z)(a),g=(0,i.Z)(o),x=s.getTime()-g.getTime();return x<0?-1:x>0?1:x}function R(a,o){(0,m.Z)(2,arguments);var s=(0,i.Z)(a),g=(0,i.Z)(o),x=s.getFullYear()-g.getFullYear(),T=s.getMonth()-g.getMonth();return x*12+T}function j(a){(0,m.Z)(1,arguments);var o=(0,i.Z)(a);return o.setHours(23,59,59,999),o}function S(a){(0,m.Z)(1,arguments);var o=(0,i.Z)(a),s=o.getMonth();return o.setFullYear(o.getFullYear(),s+1,0),o.setHours(23,59,59,999),o}function D(a){(0,m.Z)(1,arguments);var o=(0,i.Z)(a);return j(o).getTime()===S(o).getTime()}function O(a,o){(0,m.Z)(2,arguments);var s=(0,i.Z)(a),g=(0,i.Z)(o),x=v(s,g),T=Math.abs(R(s,g)),l;if(T<1)l=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-x*T);var I=v(s,g)===-x;D((0,i.Z)(a))&&T===1&&v(a,g)===1&&(I=!1),l=x*(T-Number(I))}return l===0?0:l}function _(a,o){return(0,m.Z)(2,arguments),(0,i.Z)(a).getTime()-(0,i.Z)(o).getTime()}var Z={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(o){return o<0?Math.ceil(o):Math.floor(o)}},u="trunc";function e(a){return a?Z[a]:Z[u]}function t(a,o,s){(0,m.Z)(2,arguments);var g=_(a,o)/1e3;return e(s==null?void 0:s.roundingMethod)(g)}var d=n("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function b(a,o){if(a==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=o[s]);return a}function U(a){return b({},a)}var r=n("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),f=1440,y=2520,E=43200,P=86400;function w(a,o,s){var g,x;(0,m.Z)(2,arguments);var T=(0,c.j)(),l=(g=(x=s==null?void 0:s.locale)!==null&&x!==void 0?x:T.locale)!==null&&g!==void 0?g:d.Z;if(!l.formatDistance)throw new RangeError("locale must contain formatDistance property");var I=v(a,o);if(isNaN(I))throw new RangeError("Invalid time value");var p=b(U(s),{addSuffix:Boolean(s==null?void 0:s.addSuffix),comparison:I}),B,L;I>0?(B=(0,i.Z)(o),L=(0,i.Z)(a)):(B=(0,i.Z)(a),L=(0,i.Z)(o));var C=t(L,B),z=((0,r.Z)(L)-(0,r.Z)(B))/1e3,h=Math.round((C-z)/60),A;if(h<2)return s!=null&&s.includeSeconds?C<5?l.formatDistance("lessThanXSeconds",5,p):C<10?l.formatDistance("lessThanXSeconds",10,p):C<20?l.formatDistance("lessThanXSeconds",20,p):C<40?l.formatDistance("halfAMinute",0,p):C<60?l.formatDistance("lessThanXMinutes",1,p):l.formatDistance("xMinutes",1,p):h===0?l.formatDistance("lessThanXMinutes",1,p):l.formatDistance("xMinutes",h,p);if(h<45)return l.formatDistance("xMinutes",h,p);if(h<90)return l.formatDistance("aboutXHours",1,p);if(h<f){var W=Math.round(h/60);return l.formatDistance("aboutXHours",W,p)}else{if(h<y)return l.formatDistance("xDays",1,p);if(h<E){var X=Math.round(h/f);return l.formatDistance("xDays",X,p)}else if(h<P)return A=Math.round(h/E),l.formatDistance("aboutXMonths",A,p)}if(A=O(L,B),A<12){var F=Math.round(h/E);return l.formatDistance("xMonths",F,p)}else{var k=A%12,N=Math.floor(A/12);return k<3?l.formatDistance("aboutXYears",N,p):k<9?l.formatDistance("overXYears",N,p):l.formatDistance("almostXYears",N+1,p)}}},"./js/api/commands/admin/services.js":function($,M,n){"use strict";n.r(M),n.d(M,{getServices:function(){return m},rebootServer:function(){return O},reload:function(){return D},restart:function(){return S},start:function(){return R},stop:function(){return j}});var c=n("./js/api/command/index.js");const i=["reload","restart","start","stop"],m=c.Z.get({id:"SERVICES",url:"/CMD_SHOW_SERVICES",response:[],params:{bytes:!0},after:()=>_=>Object.keys(_.status).map(u=>({service:u,memory:_.memory[u],pid:_.pids[u]||[],running:_.status[u]==="on",actions:i.reduce((e,t)=>({...e,[t]:_.actions[u].includes(t)}),{})}))}),v=_=>c.Z.post({url:"/CMD_SERVICE",params:{action:_},schema:{service:c.Z.REQUIRED_STRING},notifySuccess:!1}),R=v("start"),j=v("stop"),S=v("restart"),D=v("reload"),O=c.Z.post({url:"/CMD_REBOOT",params:{json:!0},schema:{passwd:c.Z.REQUIRED_STRING}})},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/services.vue?vue&type=style&index=0&id=4acf267d&prod&lang=scss&scoped=true&":function(){},"./js/composables/dateFilter.ts":function($,M,n){"use strict";n.d(M,{W:function(){return R},f:function(){return m.f}});var c=n("../node_modules/ramda/es/index.js"),i=n("../node_modules/date-fns/esm/format/index.js"),m=n("./js/modules/date-formats.ts"),v=n("./js/modules/customizations/date-formats/default.ts");const R=c.WAo((j,S)=>{if(S)try{return(0,i.Z)(S,m.f.value[j])}catch(D){return console.warn(`Given ${j} format is incorrect:
${D.message}`),(0,i.Z)(S,v.d[j])}return""})},"./js/composables/filters.ts":function($,M,n){"use strict";n.d(M,{Q0:function(){return t},aS:function(){return b},d5:function(){return d},eB:function(){return Z},hT:function(){return O},kC:function(){return D},n9:function(){return e},zM:function(){return _}});var c=n("../node_modules/date-fns/esm/formatDistance/index.js"),i=n("../node_modules/punycode/punycode.es6.js"),m=n("./js/composables/dateFilter.ts"),v=n("./js/composables/gettext.ts");const{$gettext:R,$ngettext:j,$gettextInterpolate:S}=(0,v.Z)(),D=r=>{var f;return r?((f=r.at(0))===null||f===void 0?void 0:f.toUpperCase())+r.slice(1):""},O=(r,f="datetime")=>(0,m.W)(f,r),_=r=>(0,c.Z)(r,new Date),Z=(r,f=1024)=>{const y=Number(r);if(!y)return"0 B";const E=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],P=Math.floor(Math.log(y)/Math.log(f));return`${parseFloat((y/f**P).toFixed(2))} ${E[P]}`},u=r=>{try{return(0,i.xX)(r)}catch(f){return r}},e=r=>(0,i.xX)(r),t=r=>{if(!r||!r.includes("@"))return r;const[f,y]=r.split("@");return[f,u(y)].join("@")},d=r=>{if(r<60)return R("less than a minute");const f=Math.floor(r/60)%60,y=Math.floor(r/3600)%24,E=Math.floor(r/(3600*24)),P=[E?j("%{days} day","%{days} days",E):null,y?j("%{hours} hour","%{hours} hours",y):null,f?j("%{minutes} minute","%{minutes} minutes",f):null].filter(Boolean).join(", ");return S(P,{days:E,hours:y,minutes:f})},b=(r,f)=>r.length<=f?r:`${r.substring(0,f)}...`,U=()=>({capitalize:D,date:O,distanceFromNow:_,humanReadableSize:Z,p6eUnicode:e,p6eUnicodeEmail:t,formatUptime:d,truncateString:b})},"./js/pages/admin/services.vue":function($,M,n){"use strict";n.r(M),n.d(M,{default:function(){return Z}});var c=function(){var e=this,t=e._self._c;return t("app-page",{attrs:{actions:[{handler:e.$dialog("REBOOT_DIALOG").open,label:e.$gettext("Reboot"),icon:"#console"}]},scopedSlots:e._u([{key:"default",fn:function(){return[t("app-page-section",[t("ui-r-table",e._b({scopedSlots:e._u([{key:"buttons:before",fn:function(){return[t("ui-button",{attrs:{size:"small",theme:"light",icon:e.$api.loading?"loader":"reload"},on:{click:e.reloadServices}},[t("span",{domProps:{textContent:e._s(e.$gettext("Update Services List"))}})])]},proxy:!0},{key:"col:running",fn:function({running:d}){return[t("ui-badge",{attrs:{theme:d?"safe":"danger"}},[t("span",{domProps:{textContent:e._s(d?e.$gettext("Running"):e.$gettext("Stopped"))}})])]}},{key:"col:pid",fn:function({pid:d}){return[d.length?t("div",{staticClass:"pids",on:{click:e.toggle}},[e._v(`
                        `+e._s(d.join(" "))+`
                    `)]):t("span")]}},{key:"col:memory",fn:function({memory:d}){return[d?t("span",[e._v(`
                        `+e._s(e.humanReadableSize(d))+`
                    `)]):e._e()]}},{key:"row:actions",fn:function({item:d}){return[t("ui-actions",{attrs:{position:"left"}},[d.actions.start&&!d.pid.length?t("ui-link",{key:"start",on:{click:function(b){return e.start(d.service)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Start"))}})]):e._e(),e._v(" "),d.actions.stop&&d.pid.length?t("ui-link",{key:"stop",on:{click:function(b){return e.stop(d.service)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Stop"))}})]):e._e(),e._v(" "),d.actions.restart&&d.pid.length?t("ui-link",{key:"restart",on:{click:function(b){return e.restart(d.service)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Restart"))}})]):e._e(),e._v(" "),d.actions.reload&&d.pid.length?t("ui-link",{key:"reload",on:{click:function(b){return e.reload(d.service)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Reload"))}})]):e._e()],1)]}}])},"ui-r-table",{columns:[{id:"service",label:e.$gettext("Service"),editable:!1},{id:"running",label:e.$gettext("Status")},{id:"pid",label:e.$gettext("PID(s)")},{id:"memory",label:e.$gettext("Memory Usage")}],rows:e.$api.services,isCheckable:!1,disablePagination:!0,verticalLayout:e.clientStore.isPhone},!1))],1),e._v(" "),t("ui-dialog",{attrs:{id:"REBOOT_DIALOG",theme:"danger",size:"normal",title:e.$gettext("Reboot Server")},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Are you sure you want to reboot server?"))}}),e._v(" "),t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Your Password:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-password",{model:{value:e.password,callback:function(d){e.password=d},expression:"password"}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"danger"},on:{click:e.handleReboot}},[t("span",{domProps:{textContent:e._s(e.$gettext("Reboot"))}})])]},proxy:!0}])})]},proxy:!0}])})},i=[],m=n("./js/stores/index.ts"),v=n("./js/api/commands/admin/services.js"),R=n("./js/composables/filters.ts"),j={preload:v.getServices,api:[{command:v.getServices,bind:{response:"services",isLoading:"loading"}}],data(){return{password:""}},computed:{notifications(){return{start:this.notify(this.$gettext("Service was started successfully")),stop:this.notify(this.$gettext("Service was stopped successfully")),restart:this.notify(this.$gettext("Service was restarted successfully")),reload:this.notify(this.$gettext("Service was reloaded successfully")),rebootServer:this.notify(this.$gettext("Server was successfully rebooted"))}},...(0,m.Kc)(["client"])},methods:{humanReadableSize:R.eB,reloadServices(){v.getServices()},toggle(u){u.target.style["white-space"]==="nowrap"?u.target.style["white-space"]="normal":u.target.style["white-space"]="nowrap"},notify(u){return()=>this.$notifications.success({title:u})},doAction(u,e){v[u](e).then(this.notifications[u]).then(this.reloadServices)},start(u){this.doAction("start",u)},stop(u){this.doAction("stop",u)},restart(u){this.doAction("restart",u)},reload(u){this.doAction("reload",u)},handleReboot(){this.doAction("rebootServer",{passwd:this.password})}}},S=j,D=n("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/services.vue?vue&type=style&index=0&id=4acf267d&prod&lang=scss&scoped=true&"),O=n("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),_=(0,O.Z)(S,c,i,!1,null,"4acf267d",null),Z=_.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/services.vue?vue&type=style&index=0&id=4acf267d&prod&lang=scss&scoped=true&":function($,M,n){var c=n("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/services.vue?vue&type=style&index=0&id=4acf267d&prod&lang=scss&scoped=true&");c.__esModule&&(c=c.default),typeof c=="string"&&(c=[[$.id,c,""]]),c.locals&&($.exports=c.locals);var i=n("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,m=i("ca012d00",c,!0,{})}}]);
