(self.webpackChunk=self.webpackChunk||[]).push([[5872],{"../node_modules/date-fns/esm/formatDistance/index.js":function(C,$,r){"use strict";r.d($,{Z:function(){return V}});var f=r("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),d=r("../node_modules/date-fns/esm/toDate/index.js"),a=r("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function w(c,l){(0,a.Z)(2,arguments);var u=(0,d.Z)(c),g=(0,d.Z)(l),S=u.getTime()-g.getTime();return S<0?-1:S>0?1:S}function n(c,l){(0,a.Z)(2,arguments);var u=(0,d.Z)(c),g=(0,d.Z)(l),S=u.getFullYear()-g.getFullYear(),E=u.getMonth()-g.getMonth();return S*12+E}function k(c){(0,a.Z)(1,arguments);var l=(0,d.Z)(c);return l.setHours(23,59,59,999),l}function x(c){(0,a.Z)(1,arguments);var l=(0,d.Z)(c),u=l.getMonth();return l.setFullYear(l.getFullYear(),u+1,0),l.setHours(23,59,59,999),l}function y(c){(0,a.Z)(1,arguments);var l=(0,d.Z)(c);return k(l).getTime()===x(l).getTime()}function p(c,l){(0,a.Z)(2,arguments);var u=(0,d.Z)(c),g=(0,d.Z)(l),S=w(u,g),E=Math.abs(n(u,g)),m;if(E<1)m=0;else{u.getMonth()===1&&u.getDate()>27&&u.setDate(30),u.setMonth(u.getMonth()-S*E);var B=w(u,g)===-S;y((0,d.Z)(c))&&E===1&&w(c,g)===1&&(B=!1),m=S*(E-Number(B))}return m===0?0:m}function j(c,l){return(0,a.Z)(2,arguments),(0,d.Z)(c).getTime()-(0,d.Z)(l).getTime()}var T={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(l){return l<0?Math.ceil(l):Math.floor(l)}},L="trunc";function F(c){return c?T[c]:T[L]}function z(c,l,u){(0,a.Z)(2,arguments);var g=j(c,l)/1e3;return F(u==null?void 0:u.roundingMethod)(g)}var W=r("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function U(c,l){if(c==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(c[u]=l[u]);return c}function J(c){return U({},c)}var i=r("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),_=1440,D=2520,P=43200,R=86400;function V(c,l,u){var g,S;(0,a.Z)(2,arguments);var E=(0,f.j)(),m=(g=(S=u==null?void 0:u.locale)!==null&&S!==void 0?S:E.locale)!==null&&g!==void 0?g:W.Z;if(!m.formatDistance)throw new RangeError("locale must contain formatDistance property");var B=w(c,l);if(isNaN(B))throw new RangeError("Invalid time value");var v=U(J(u),{addSuffix:Boolean(u==null?void 0:u.addSuffix),comparison:B}),X,N;B>0?(X=(0,d.Z)(l),N=(0,d.Z)(c)):(X=(0,d.Z)(c),N=(0,d.Z)(l));var A=z(N,X),q=((0,i.Z)(N)-(0,i.Z)(X))/1e3,b=Math.round((A-q)/60),O;if(b<2)return u!=null&&u.includeSeconds?A<5?m.formatDistance("lessThanXSeconds",5,v):A<10?m.formatDistance("lessThanXSeconds",10,v):A<20?m.formatDistance("lessThanXSeconds",20,v):A<40?m.formatDistance("halfAMinute",0,v):A<60?m.formatDistance("lessThanXMinutes",1,v):m.formatDistance("xMinutes",1,v):b===0?m.formatDistance("lessThanXMinutes",1,v):m.formatDistance("xMinutes",b,v);if(b<45)return m.formatDistance("xMinutes",b,v);if(b<90)return m.formatDistance("aboutXHours",1,v);if(b<_){var ee=Math.round(b/60);return m.formatDistance("aboutXHours",ee,v)}else{if(b<D)return m.formatDistance("xDays",1,v);if(b<P){var te=Math.round(b/_);return m.formatDistance("xDays",te,v)}else if(b<R)return O=Math.round(b/P),m.formatDistance("aboutXMonths",O,v)}if(O=p(N,X),O<12){var se=Math.round(b/P);return m.formatDistance("xMonths",se,v)}else{var Q=O%12,H=Math.floor(O/12);return Q<3?m.formatDistance("aboutXYears",H,v):Q<9?m.formatDistance("overXYears",H,v):m.formatDistance("almostXYears",H+1,v)}}},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/backups/_components/cron-cards.vue?vue&type=style&index=0&id=36f17e66&prod&lang=scss&":function(){},"./js/composables/andMore.ts":function(C,$,r){"use strict";r.d($,{j:function(){return k}});var f=r("../node_modules/vue/dist/vue.common.prod.js"),d=r.n(f),a=r("./js/composables/gettext.ts");const{$gettext:w,$gettextInterpolate:n}=(0,a.Z)(),k=(x,y,p=", ",j=w("and %{n} more..."))=>(0,f.computed)(()=>{const T=x.slice(0,y).join(p);return y>=x.length?{main:T,more:[],hasMore:!1}:{main:T+" "+n(j,{n:x.length-y}),more:x.slice(y),hasMore:!0}})},"./js/composables/cronstrue.ts":function(C,$,r){"use strict";r.d($,{N:function(){return y}});var f=r("../node_modules/cronstrue/dist/cronstrue.js"),d=r.n(f),a=r("./js/composables/index.ts"),w=r("./js/composables/dateFilter.ts");const{$gettext:n}=(0,a.st)();class k{atX0SecondsPastTheMinuteGt20(){return null}atX0MinutesPastTheHourGt20(){return null}commaMonthX0ThroughMonthX1(){return null}commaYearX0ThroughYearX1(){return null}use24HourTimeFormatByDefault(){return!1}anErrorOccuredWhenGeneratingTheExpressionD(){return n("An error occured when generating the expression description.  Check the cron expression syntax.")}everyMinute(){return n("every minute")}everyHour(){return n("every hour")}atSpace(){return n("At")+" "}everyMinuteBetweenX0AndX1(){return n("Every minute between %s and %s")}at(){return n("At")}spaceAnd(){return" "+n("and")}everySecond(){return n("every second")}everyX0Seconds(){return n("every %s seconds")}secondsX0ThroughX1PastTheMinute(){return n("seconds %s through %s past the minute")}atX0SecondsPastTheMinute(){return n("at %s seconds past the minute")}everyX0Minutes(){return n("every %s minutes")}minutesX0ThroughX1PastTheHour(){return n("minutes %s through %s past the hour")}atX0MinutesPastTheHour(){return n("at %s minutes past the hour")}everyX0Hours(){return n("every %s hours")}betweenX0AndX1(){return n("between %s and %s")}atX0(){return n("at %s")}commaEveryDay(){return n(", every day")}commaEveryX0DaysOfTheWeek(){return n(", every %s days of the week")}commaX0ThroughX1(){return n(", %s through %s")}commaAndX0ThroughX1(){return n(", %s through %s")}first(){return n("first")}second(){return n("second")}third(){return n("third")}fourth(){return n("fourth")}fifth(){return n("fifth")}commaOnThe(){return n(", on the ")}spaceX0OfTheMonth(){return n(" %s of the month")}lastDay(){return n("the last day")}commaOnTheLastX0OfTheMonth(){return n(", on the last %s of the month")}commaOnlyOnX0(){return n(", only on %s")}commaAndOnX0(){return n(", and on %s")}commaEveryX0Months(){return n(", every %s months")}commaOnlyInX0(){return n(", only in %s")}commaOnTheLastDayOfTheMonth(){return n(", on the last day of the month")}commaOnTheLastWeekdayOfTheMonth(){return n(", on the last weekday of the month")}commaDaysBeforeTheLastDayOfTheMonth(){return n(", %s days before the last day of the month")}firstWeekday(){return n("first weekday")}weekdayNearestDayX0(){return n("weekday nearest day %s")}commaOnTheX0OfTheMonth(){return n(", on the %s of the month")}commaEveryX0Days(){return n(", every %s days")}commaBetweenDayX0AndX1OfTheMonth(){return n(", between day %s and %s of the month")}commaOnDayX0OfTheMonth(){return n(", on day %s of the month")}commaEveryHour(){return n(", every hour")}commaEveryX0Years(){return n(", every %s years")}commaStartingX0(){return n(", starting %s")}daysOfTheWeek(){return[n("Sunday"),n("Monday"),n("Tuesday"),n("Wednesday"),n("Thursday"),n("Friday"),n("Saturday")]}monthsOfTheYear(){return[n("January"),n("February"),n("March"),n("April"),n("May"),n("June"),n("July"),n("August"),n("September"),n("October"),n("November"),n("December")]}}class x{load(j){j.gettext=new k}}d().initialize(new x,"gettext");const y=p=>d().toString(`${p.minute} ${p.hour} ${p.dayofmonth} ${p.month} ${p.dayofweek}`,{use24HourTimeFormat:w.f.value.use24H,locale:"gettext"})},"./js/composables/dateFilter.ts":function(C,$,r){"use strict";r.d($,{W:function(){return n},f:function(){return a.f}});var f=r("../node_modules/ramda/es/index.js"),d=r("../node_modules/date-fns/esm/format/index.js"),a=r("./js/modules/date-formats.ts"),w=r("./js/modules/customizations/date-formats/default.ts");const n=f.WAo((k,x)=>{if(x)try{return(0,d.Z)(x,a.f.value[k])}catch(y){return console.warn(`Given ${k} format is incorrect:
${y.message}`),(0,d.Z)(x,w.d[k])}return""})},"./js/composables/filters.ts":function(C,$,r){"use strict";r.d($,{Q0:function(){return z},aS:function(){return U},d5:function(){return W},eB:function(){return T},hT:function(){return p},kC:function(){return y},n9:function(){return F},zM:function(){return j}});var f=r("../node_modules/date-fns/esm/formatDistance/index.js"),d=r("../node_modules/punycode/punycode.es6.js"),a=r("./js/composables/dateFilter.ts"),w=r("./js/composables/gettext.ts");const{$gettext:n,$ngettext:k,$gettextInterpolate:x}=(0,w.Z)(),y=i=>{var _;return i?((_=i.at(0))===null||_===void 0?void 0:_.toUpperCase())+i.slice(1):""},p=(i,_="datetime")=>(0,a.W)(_,i),j=i=>(0,f.Z)(i,new Date),T=(i,_=1024)=>{const D=Number(i);if(!D)return"0 B";const P=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],R=Math.floor(Math.log(D)/Math.log(_));return`${parseFloat((D/_**R).toFixed(2))} ${P[R]}`},L=i=>{try{return(0,d.xX)(i)}catch(_){return i}},F=i=>(0,d.xX)(i),z=i=>{if(!i||!i.includes("@"))return i;const[_,D]=i.split("@");return[_,L(D)].join("@")},W=i=>{if(i<60)return n("less than a minute");const _=Math.floor(i/60)%60,D=Math.floor(i/3600)%24,P=Math.floor(i/(3600*24)),R=[P?k("%{days} day","%{days} days",P):null,D?k("%{hours} hour","%{hours} hours",D):null,_?k("%{minutes} minute","%{minutes} minutes",_):null].filter(Boolean).join(", ");return x(R,{days:P,hours:D,minutes:_})},U=(i,_)=>i.length<=_?i:`${i.substring(0,_)}...`,J=()=>({capitalize:y,date:p,distanceFromNow:j,humanReadableSize:T,p6eUnicode:F,p6eUnicodeEmail:z,formatUptime:W,truncateString:U})},"./js/pages/admin/backups/index.vue":function(C,$,r){"use strict";r.r($),r.d($,{default:function(){return $e}});var f=function(){var e=this,t=e._self._c;return t("app-page",{attrs:{actions:[{handler:()=>e.$router.push("/admin/schedule-backup"),label:e.$gettext("Schedule"),icon:"#plus-fill",theme:"safe"},{handler:()=>e.$router.push("/admin/restore-backup"),label:e.$gettext("Restore"),icon:"#extract"}]},scopedSlots:e._u([{key:"default",fn:function(){return[t("app-page-section",[t("ui-tabs",{attrs:{tabs:[{id:"scheduled",label:e.$gettext("Scheduled Backups")},e.haveBackupsRunning?{id:"in-progress",label:e.$gettext("In Progress")}:{}],selected:e.tab,"hide-single-tab":""},on:{"update:selected":function(s){e.tab=s}},scopedSlots:e._u([{key:"tab:scheduled",fn:function(){return[t("cron-cards",{attrs:{items:e.crons},scopedSlots:e._u([{key:"backup-actions",fn:function({id:s}){return[t("ui-link",{attrs:{name:"admin/backups/modify",params:{id:s},icon:"pencil"}},[t("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:.5,expression:"0.5",arg:"right"}],attrs:{id:"pencil",size:12}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("Modify"))}})],1),e._v(" "),t("ui-link",{on:{click:function(h){return e.runCron(s)}}},[t("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:.5,expression:"0.5",arg:"right"}],attrs:{id:"upload",size:12}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("Run Now"))}})],1),e._v(" "),t("ui-link",{on:{click:function(h){return e.duplicateCron(s)}}},[t("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:.5,expression:"0.5",arg:"right"}],attrs:{id:"duplicate",size:12}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("Duplicate"))}})],1),e._v(" "),t("ui-link",{on:{click:function(h){return e.showDeleteDialog(s)}}},[t("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:.5,expression:"0.5",arg:"right"}],attrs:{id:"delete",size:12}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("Delete"))}})],1)]}}])})]},proxy:!0},{key:"tab:in-progress",fn:function(){return[t("current-backups-table",{on:{showDetails:e.showDetails}})]},proxy:!0}])})],1),e._v(" "),t("backup-restore-settings-dialog"),e._v(" "),t("monitor-backup-status-dialog",e._b({},"monitor-backup-status-dialog",{id:e.viewDialogPid},!1)),e._v(" "),t("ui-dialog-delete-items",{attrs:{subject:e.$gettext("scheduled backup")},on:{"click:confirm":e.deleteCron}})]},proxy:!0},{key:"bottom:links",fn:function(){return[t("ui-link",{attrs:{bullet:"",name:"user/backup"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Site Backup"))}})]),e._v(" "),e.hasResellerBackups?t("ui-link",{attrs:{bullet:"",name:"reseller/backups"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Switch to Reseller Level Backups"))}})]):e._e(),e._v(" "),t("ui-link",{attrs:{bullet:""},on:{click:function(s){e.$dialog("BACKUP_RESTORE_SETTINGS").open()}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Backup/Restore Settings"))}})])]},proxy:!0}])})},d=[],a=r("./js/api/commands/admin/backups/index.js"),w=r("./js/vue-globals/mixins.js"),n=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"responsive",rawName:"v-responsive",value:{"--one-column":s=>s.width<900},expression:`{
        '--one-column': (el) => el.width < 900,
    }`}],staticClass:"cron-cards"},[t("ui-data-iterator",{attrs:{items:e.items.rows,"key-prop":"id","empty-message":e.$gettext("No backups available")},scopedSlots:e._u([{key:"item",fn:function(s){return[t("cron-card",{attrs:{cron:s},scopedSlots:e._u([{key:"actions",fn:function(){return[t("ui-actions",[e._t("backup-actions",null,null,s)],2)]},proxy:!0}],null,!0)})]}}])})],1)},k=[],x=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("ui-card",{key:`backup-cron-${s.id}`,attrs:{"has-buttons":!1},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"start"},expression:`{
                cross: 'center',
                main: 'start',
            }`}],staticClass:"cron-card-header"},[t("img",{directives:[{name:"margin",rawName:"v-margin:right",value:2,expression:"2",arg:"right"}],staticClass:"cron-main-icon",attrs:{src:r("./assets/images/icons/backup.svg"),height:"32"}}),e._v(" "),t("h4",{directives:[{name:"margin",rawName:"v-margin",value:0,expression:"0"}]},[t(s.CronTime,e._b({},"cron-time",s.time,!1))],1),e._v(" "),t("div",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}]}),e._v(" "),t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:`{
                    cross: 'center',
                    main: 'between',
                }`},{name:"margin",rawName:"v-margin:bottom",value:1.6,expression:"1.6",arg:"bottom"}]},[e._t("actions")],2)])]},proxy:!0},{key:"content",fn:function(){return[t("div",{staticClass:"cron-card-content"},[t("strong",{staticClass:"cron-attribute",domProps:{textContent:e._s(s.$gettext("What:"))}}),e._v(" "),s.target.what==="all"?[t("span",{domProps:{textContent:e._s(s.$gettext("All Data"))}})]:[e._v(`
                `+e._s(s.target.select.join(", "))+`
            `)],e._v(" "),t("strong",{staticClass:"cron-attribute",domProps:{textContent:e._s(s.$gettext("Where:"))}}),e._v(" "),t("div",[s.dest.encrypted?t("ui-tooltip",{attrs:{theme:"safe",icon:"locked-padlock"}},[t("span",{domProps:{textContent:e._s(s.$gettext("Encrypted"))}})]):e._e(),e._v(" "),t("code",{domProps:{textContent:e._s(s.dest.path)}})],1),e._v(" "),t("strong",{staticClass:"cron-attribute",domProps:{textContent:e._s(s.$gettext("Who:"))}}),e._v(" "),t("div",[t("span",{domProps:{textContent:e._s(s.usersLabel)}}),e._v(" "),s.users.skip_suspended==="yes"?t("span",{domProps:{textContent:e._s(s.$gettext("(skip suspended)"))}}):e._e()]),e._v(" "),s.users.who!=="all"?[t("strong",{staticClass:"cron-attribute",domProps:{textContent:e._s(s.$gettext("Users:"))}}),e._v(" "),t("div",{staticClass:"users"},[s.selectedUsers.hasMore?[t("ui-tooltip",{scopedSlots:e._u([{key:"trigger",fn:function(){return[e._v(`
                                `+e._s(s.selectedUsers.main)+`
                            `)]},proxy:!0}],null,!1,2268505414)},[e._v(" "),t("ul",e._l(s.selectedUsers.more,function(h){return t("li",{key:h,domProps:{textContent:e._s(h)}})}),0)])]:[e._v(e._s(s.selectedUsers.main))]],2)]:e._e()],2)]},proxy:!0}],null,!0)})},y=[],p=r("../node_modules/vue/dist/vue.common.prod.js"),j=r.n(p),T=r("./js/composables/index.ts"),L=r("./js/composables/andMore.ts"),F=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("span",{domProps:{textContent:e._s(s.cronString)}})},z=[],W=r("./js/composables/cronstrue.ts"),U=(0,p.defineComponent)({__name:"cron-time",props:{minute:null,hour:null,dayofweek:null,month:null,dayofmonth:null},setup(o){const e=o,t=(0,p.computed)(()=>(0,W.N)(e));return{__sfc:!0,props:e,cronString:t}}}),J=U,i=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),_=(0,i.Z)(J,F,z,!1,null,null,null),D=_.exports,P=(0,p.defineComponent)({__name:"cron-card",props:{cron:null},setup(o){const e=o,{$gettext:t}=(0,T.st)(),s=(0,p.computed)(()=>e.cron.id),h=(0,p.computed)(()=>e.cron.what),Z=(0,p.computed)(()=>e.cron.where),ne=(0,p.computed)(()=>e.cron.when),K=(0,p.computed)(()=>e.cron.who),I=(0,p.computed)(()=>({all:t("All Users"),selected:t("Selected users"),except:t("All users except selected"),creator_all:t("Selected creators and their users")})[K.value.who]),M=(0,L.j)(K.value.who!=="all"?K.value.select:[],4);return{__sfc:!0,$gettext:t,props:e,id:s,target:h,dest:Z,time:ne,users:K,usersLabel:I,selectedUsers:M,CronTime:D}}}),R=P,V=(0,i.Z)(R,x,y,!1,null,null,null),c=V.exports,l=r("../node_modules/vue-responsive-components/index.js"),u={components:{CronCard:c},directives:{responsive:l.Jz},props:{items:{type:Object,required:!0}},methods:{getDataLabels(o){const e={domain:this.$gettext("Domain Directory"),subdomain:this.$gettext("Subdomain Lists"),ftp:this.$gettext("FTP Accounts"),ftpsettings:this.$gettext("FTP Settings"),database:this.$gettext("Database Settings"),database_data:this.$gettext("Database Data"),forwarder:this.$gettext("Forwarders"),email:this.$gettext("E-mail Accounts"),email_data:this.$gettext("E-mail Data"),emailsettings:this.$gettext("E-mail Settings"),vacation:this.$gettext("Vacation Messages"),autoresponder:this.$gettext("Autoresponders"),list:this.$gettext("Mailing Lists"),trash:this.$gettext("Deleted Trash Data")};return o.map(t=>e[t])}}},g=u,S=r("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/backups/_components/cron-cards.vue?vue&type=style&index=0&id=36f17e66&prod&lang=scss&"),E=(0,i.Z)(g,n,k,!1,null,null,null),m=E.exports,B=function(){var e=this,t=e._self._c;return t("ui-api-table",e._b({on:{"action:kill":e.killBackup},scopedSlots:e._u([{key:"col:start",fn:function({start:s}){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],staticClass:"disp:iblock"},[t("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Minute: %{minute}"),{minute:s.minute}))}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Hour: %{hour}"),{hour:s.hour}))}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Day of Month: %{dayofmonth}"),{dayofmonth:s.dayofmonth}))}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Month: %{month}"),{month:s.month}))}}),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Day of Week: %{dayofweek}"),{dayofweek:s.dayofweek}))}})])]}},{key:"col:who",fn:function({who:s}){return[s.who==="all"?t("span",{domProps:{textContent:e._s(e.$gettext("All Users"))}}):s.who==="selected"?[t("strong",{domProps:{textContent:e._s(e.$gettext("Selected Users:"))}}),e._v(" "),t("SelectedUsers",{attrs:{users:e.getSelectedUsers(s.select)}})]:[t("strong",{domProps:{textContent:e._s(e.$gettext("All Users Except:"))}}),e._v(" "),e._l(s.select,function(h,Z){return t("li",{key:`user-except-${Z}`},[e._v(`
                `+e._s(h)+`
            `)])})],e._v(" "),s.skip_suspended==="yes"?t("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Skip Suspended"))}})]):e._e()]}},{key:"col:type",fn:function({type:s}){return[t("span",{domProps:{textContent:e._s(s==="restore"?e.$gettext("Restore"):e.$gettext("Backup"))}})]}},{key:"col:what",fn:function({what:s}){return[t("span",{domProps:{textContent:e._s(s.what==="all"?e.$gettext("All Data"):e.getDataLabels(s.select))}})]}},{key:"col:where",fn:function({where:s}){return[s.encrypted?t("ui-tooltip",{attrs:{theme:"safe",icon:"locked-padlock"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Encrypted"))}})]):e._e(),e._v(`
        `+e._s(s.path)+`
    `)]}},{key:"col:progress",fn:function({progress:s}){return[t("ui-progress",{attrs:{theme:"safe",size:"big",value:s}},[e._v(`
            `+e._s(s)+`%
        `)])]}},{key:"row:actions",fn:function({pid:s}){return[t("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(h){return e.showDetails(s)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Details"))}})])]}}]),model:{value:e.select,callback:function(s){e.select=s},expression:"select"}},"ui-api-table",{command:e.$commands.getCurrentBackups,rowID:"pid",columns:{pid:e.$gettext("PID"),id:e.$gettext("Backup ID"),type:e.$gettext("Type"),start:e.$gettext("Start Time"),who:e.$gettext("Who"),where:e.$gettext("Where"),progress:e.$gettext("Progress")},actions:{kill:e.$gettext("Kill")}},!1))},v=[],X=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return e.users.hasMore?t("ui-tooltip",{scopedSlots:e._u([{key:"trigger",fn:function(){return[e._v(`
        `+e._s(e.users.main)+`
    `)]},proxy:!0}],null,!1,161087791)},[e._v(" "),t("ul",e._l(e.users.more,function(h){return t("li",{key:h,domProps:{textContent:e._s(h)}})}),0)]):t("span",{domProps:{textContent:e._s(e.users.main)}})},N=[],A=(0,p.defineComponent)({__name:"selected-users",props:{users:null},setup(o){return{__sfc:!0}}}),q=A,b=(0,i.Z)(q,X,N,!1,null,null,null),O=b.exports,ee={commands:{getCurrentBackups:a.pI},components:{SelectedUsers:O},data:()=>({select:[]}),methods:{async killBackup(){await(0,a.jB)({select:this.select})&&(Object.assign(this.$data,this.$options.data.apply(this)),(0,a.pI)())},getDataLabels(o){const e={domain:this.$gettext("Domain Directory"),subdomain:this.$gettext("Subdomain Lists"),ftp:this.$gettext("FTP Accounts"),ftpsettings:this.$gettext("FTP Settings"),database:this.$gettext("Database Settings"),database_data:this.$gettext("Database Data"),forwarder:this.$gettext("Forwarders"),email:this.$gettext("E-mail Accounts"),email_data:this.$gettext("E-mail Data"),emailsettings:this.$gettext("E-mail Settings"),vacation:this.$gettext("Vacation Messages"),autoresponder:this.$gettext("Autoresponders"),list:this.$gettext("Mailing Lists")};return o.map(t=>e[t]).join(", ")},showDetails(o){this.select=[],this.$emit("showDetails",o)},getSelectedUsers(o){return(0,L.j)(o,4).value}}},te=ee,se=(0,i.Z)(te,B,v,!1,null,null,null),Q=se.exports,H=function(){var e=this,t=e._self._c;return t("ui-dialog",{attrs:{id:"BACKUP_RESTORE_SETTINGS",title:e.$gettext("Backup/Restore Settings")},on:{"dialog:open":e.loadSettings},scopedSlots:e._u([e.show?{key:"content",fn:function(){return[t("ui-form-element",{scopedSlots:e._u([{key:"content",fn:function(){return[t("input-checkbox",{model:{value:e.message,callback:function(s){e.message=s},expression:"message"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Send a message when a backup has finished."))}})])]},proxy:!0}],null,!1,2823212999)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[t("input-radio",{attrs:{value:!0},model:{value:e.local_ns,callback:function(s){e.local_ns=s},expression:"local_ns"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Restore with local NameServers."))}})]),e._v(" "),t("input-radio",{attrs:{value:!1},model:{value:e.local_ns,callback:function(s){e.local_ns=s},expression:"local_ns"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Use NS values from backup."))}})])],1)]},proxy:!0}],null,!1,4135117177)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[t("input-radio",{attrs:{value:!0},model:{value:e.restore_spf,callback:function(s){e.restore_spf=s},expression:"restore_spf"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Restore with SPF values from backup."))}})]),e._v(" "),t("input-radio",{attrs:{value:!1},model:{value:e.restore_spf,callback:function(s){e.restore_spf=s},expression:"restore_spf"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Use local SPF values."))}})])],1)]},proxy:!0}],null,!1,2480785601)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"content",fn:function(){return[t("input-checkbox",{model:{value:e.confirm_with_domainowners,callback:function(s){e.confirm_with_domainowners=s},expression:"confirm_with_domainowners"}},[t("span",{domProps:{textContent:e._s(e.$gettext("On restore, check for domain conflict in domainowners file, rather than the named.conf, or remote named.conf files."))}})])]},proxy:!0}],null,!1,1095173512)}),e._v(" "),t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("directadmin.conf values"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select-multiple",{attrs:{"hide-header":"",options:e.options},scopedSlots:e._u([e._l(e.options,function(s){return{key:`option:${s}`,fn:function(){return[t("span",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"row",cross:"center",main:"between"},expression:`{
                                dir: 'row',
                                cross: 'center',
                                main: 'between',
                            }`}],key:s},[t("span",{domProps:{innerHTML:e._s(s)}}),e._v(" "),t("ui-link",{attrs:{href:e.optionLinks[s],target:"_blank"},nativeOn:{click:function(h){h.stopPropagation()}}},[t("ui-icon",{attrs:{id:"question",theme:"neutral",size:"medium"}})],1)],1)]},proxy:!0}})],null,!0),model:{value:e.directadmin_conf,callback:function(s){e.directadmin_conf=s},expression:"directadmin_conf"}})]},proxy:!0}],null,!1,3515064773)})]},proxy:!0}:null,{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe"},on:{click:e.saveSettings}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}],null,!0)})},ae=[],Y=r("../node_modules/ramda/es/index.js"),ie={api:[{command:a.LR,bind:"settings"}],data:()=>({message:!0,local_ns:!1,restore_spf:!0,confirm_with_domainowners:!0,show:!1,directadmin_conf:[]}),computed:{hasDaSettings(){return!!this.$api.settings.directadmin_conf},options(){return["backup_ftp_pre_test","backup_ftp_md5","allow_backup_encryption","restore_database_as_admin","tally_after_restore","backup_hard_link_check","webmail_backup_is_email_data"]},daValuesEncoded(){return this.hasDaSettings?Y.u4g((o,e)=>({...o,[e]:Y.q9t(e,this.directadmin_conf)?"1":"0"}),{},this.options):[]},requestData(){return{message:this.message,local_ns:this.local_ns,restore_spf:this.restore_spf,confirm_with_domainowners:this.confirm_with_domainowners,...this.daValuesEncoded}}},created(){this.optionLinks={backup_ftp_pre_test:"https://www.directadmin.com/features.php?id=1386",backup_ftp_md5:"https://www.directadmin.com/features.php?id=1977",allow_backup_encryption:"https://www.directadmin.com/features.php?id=2117",restore_database_as_admin:"https://www.directadmin.com/features.php?id=1817",tally_after_restore:"https://www.directadmin.com/features.php?id=853",backup_hard_link_check:"https://www.directadmin.com/features.php?id=1061",webmail_backup_is_email_data:"https://www.directadmin.com/features.php?id=2292"}},methods:{async loadSettings(){this.show=!1;const o=await(0,a.LR)();Object.assign(this,o),this.directadmin_conf=Y.XPQ(Y.hXT(Y.fS0(!0),this.$api.settings.directadmin_conf)),this.show=!0},saveSettings(){(0,a.VP)(this.requestData)}}},ue=ie,le=(0,i.Z)(ue,H,ae,!1,null,null,null),ce=le.exports,de=function(){var e=this,t=e._self._c;return t("ui-dialog",{attrs:{id:"MONITOR_BACKUP_STATUS_DIALOG","no-close-btn":"",size:"normal"},on:{"dialog:open":e.connect,"dialog:close":e.updateCurrentBackups},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Monitor Backup: %{ id }"),{id:e.id}))}})]},proxy:!0},{key:"content",fn:function(){return[e.$api.backupLoaded?t("ui-table",{attrs:{vertical:e.clientStore.isPhone,items:[e.$api.backup]}},[t("ui-column",{attrs:{id:"id",label:e.$gettext("Backup ID"),fit:""}}),e._v(" "),t("ui-column",{attrs:{id:"owner",label:e.$gettext("Owner")}}),e._v(" "),t("ui-column",{attrs:{id:"start",label:e.$gettext("Start Time")},scopedSlots:e._u([{key:"default",fn:function(s){return[e._v(`
                    `+e._s(e.date(s.start,"datetime"))+`
                `)]}}],null,!1,444385569)}),e._v(" "),t("ui-column",{attrs:{id:"who",label:e.$gettext("Who")},scopedSlots:e._u([{key:"default",fn:function(s){return[s.who.who==="all"?t("span",{domProps:{textContent:e._s(e.$gettext("All Users"))}}):s.who.who==="selected"?[t("strong",{domProps:{textContent:e._s(e.$gettext("Selected Users:"))}}),e._v(" "),t("SelectedUsers",{attrs:{users:e.getSelectedUsers(s.who.select)}})]:[t("strong",{domProps:{textContent:e._s(e.$gettext("All Users Except:"))}}),e._v(" "),e._l(s.who.select,function(h,Z){return t("li",{key:`user-except-${Z}`},[t("span",{domProps:{textContent:e._s(h)}})])})],e._v(" "),s.who.skip_suspended==="yes"?t("ui-tooltip",{attrs:{theme:"danger",icon:"warning"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Skip Suspended"))}})]):e._e()]}}],null,!1,1573157035)}),e._v(" "),t("ui-column",{attrs:{id:"where",label:e.$gettext("Where")},scopedSlots:e._u([{key:"default",fn:function(s){return[s.where.encrypted?t("ui-tooltip",{attrs:{theme:"safe",icon:"locked-padlock"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Encrypted"))}})]):e._e(),e._v(" "),t("span",{domProps:{textContent:e._s(s.where.path)}})]}}],null,!1,3302216904)})],1):e._e(),e._v(" "),e.percent?t("ui-progress",{attrs:{value:e.percent,size:"big",theme:"primary"}},[e._v(`
            `+e._s(e.percent)+`\xA0%
        `)]):e._e(),e._v(" "),e.overview?t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Overview:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("span",{domProps:{textContent:e._s(e.overview)}})]},proxy:!0}],null,!1,646429076)}):e._e(),e._v(" "),e.details&&e.percent<100?t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Details:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("span",[e._v(`
                    `+e._s(e.details)+`
                    `),e.showFilesize?[e._v(`
                        - `+e._s(e.humanReadableSize(e.filesize))+`
                    `)]:e._e()],2)]},proxy:!0}],null,!1,1440390277)}):e._e(),e._v(" "),e.status?t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("span",{domProps:{textContent:e._s(e.status)}})]},proxy:!0}],null,!1,3498592836)}):e._e()]},proxy:!0}])})},pe=[],me=r("./js/stores/index.ts"),re=r("./js/composables/filters.ts"),_e=r("./js/api/converters.js");const oe=o=>new DOMParser().parseFromString((0,_e.toAppString)(o),"text/html").body.textContent||"";class fe{constructor(){this.state=j().observable({overview:"",details:"",percent:0,filesize:0})}setOverview(e){this.state.overview=oe(e)}setDetails(e){this.state.details=oe(e)}setPercent(e){this.state.percent=Number(e)||0}setFilesize(e){this.state.filesize=Number(e)||0}open(e){return new Promise((t,s)=>{const h=new EventSource(e),Z=()=>Object.assign(this.state,{overview:"",details:"",percent:0,filesize:0,reconnects:0}),ne=I=>{try{const M=JSON.parse(I.data);M.finished==="1"&&(h.close(),t(I)),M.dynamic_text&&this.setOverview(M.dynamic_text),M.dynamic_details&&this.setDetails(M.dynamic_details),M.percent&&this.setPercent(M.percent),M.filesize&&this.setFilesize(M.filesize)}catch(M){}},K=I=>{I.readyState===EventSource.CLOSED?t(I):s(I)};h.addEventListener("open",Z,!1),h.addEventListener("message",ne,!1),h.addEventListener("error",K,!1)})}}const G=new fe;var he={components:{SelectedUsers:O},props:{id:{type:String,required:!1,default:""}},data:()=>({showFilesize:!1,status:""}),api:[{command:a.yf,bind:{response:"backup",isOk:"backupLoaded"}}],computed:{overview(){return G.state.overview},percent(){return G.state.percent},details(){return G.state.details},requestURL(){const o=this.id,e=Math.random();return`/CMD_ADMIN_BACKUP?action=monitor&get=tracking_data&pid=${o}&rand=${e}&type=sse`},filesize(){return G.state.filesize},...(0,me.Kc)(["client"])},watch:{filesize(){this.showFilesize||(this.showFilesize=!0)},details(){this.showFilesize=!1}},methods:{date:re.hT,humanReadableSize:re.eB,async connect(){this.status="",await(0,a.yf)({pid:this.id});try{this.status=this.$gettext("Reading from tracker stream..."),await G.open(this.requestURL),this.status=this.$gettext("Tracker stream was closed!")}catch(o){this.status=this.$gettext("Error getting backup details")}},updateCurrentBackups:a.pI,getSelectedUsers(o){return(0,L.j)(o,4).value}}},ve=he,ge=(0,i.Z)(ve,de,pe,!1,null,null,null),xe=ge.exports,ye={name:"AdminBackups",preload:[a.ld,a.pI],api:[{command:a.ld,bind:"crons"},{command:a.pI,bind:"currentBackups"}],commands:{getCrons:a.ld},components:{CronCards:m,CurrentBackupsTable:Q,BackupRestoreSettingsDialog:ce,MonitorBackupStatusDialog:xe},mixins:[(0,w.$bindTab)({defaultTab:"scheduled",param:"tab"})],data(){return{select:[],refreshTimeout:30*1e3,refresh:!0,viewDialogPid:void 0}},computed:{currentBackups(){return this.$api.currentBackups},crons(){return this.$api.crons},haveBackupsRunning(){return!!this.currentBackups.rowsCount},hasResellerBackups(){return this.$api.crons.has_reseller_level_backups}},watch:{haveBackupsRunning(o,e){!o&&e&&(this.tab="scheduled")}},mounted(){this.refreshCurrentBackups(),this.tab==="in-progress"&&!this.haveBackupsRunning&&this.$nextTick(()=>{this.tab="scheduled"})},beforeDestroy(){clearTimeout(this.timeoutId)},methods:{async refreshCurrentBackups(){this.refresh&&await(0,a.pI)(),this.timeoutId=setTimeout(this.refreshCurrentBackups,this.refreshTimeout)},showDetails(o){this.viewDialogPid=o,this.$nextTick(()=>this.$dialog("MONITOR_BACKUP_STATUS_DIALOG").open())},showDeleteDialog(o){this.select=[o],this.$dialog("DELETE_ITEMS_DIALOG").open()},async duplicateCron(o){return await(0,a.hd)({select:[o]}),(0,a.ld)()},async deleteCron(){return await(0,a.dh)({select:this.select}),(0,a.ld)()},async runCron(o){return await(0,a.Pd)({select:[o]}),(0,a.ld)()}}},be=ye,ke=(0,i.Z)(be,f,d,!1,null,null,null),$e=ke.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/backups/_components/cron-cards.vue?vue&type=style&index=0&id=36f17e66&prod&lang=scss&":function(C,$,r){var f=r("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/backups/_components/cron-cards.vue?vue&type=style&index=0&id=36f17e66&prod&lang=scss&");f.__esModule&&(f=f.default),typeof f=="string"&&(f=[[C.id,f,""]]),f.locals&&(C.exports=f.locals);var d=r("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,a=d("5a7582a8",f,!0,{})},"./assets/images/icons/backup.svg":function(C,$,r){"use strict";C.exports=r.p+"assets/images/icons/backup.094e3c0846293522db68.svg"}}]);
