"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[462],{"./js/api/commands/user/ssl/index.js":function(C,d,o){o.d(d,{$c:function(){return s},FW:function(){return a},Lm:function(){return S},Ng:function(){return R},Of:function(){return m},SA:function(){return c},T7:function(){return n},UJ:function(){return y},VB:function(){return O},_d:function(){return u},dV:function(){return E},lM:function(){return _},mb:function(){return D}});var t=o("./js/api/command/index.js"),p=o("../node_modules/punycode/punycode.es6.js"),i=o("./js/api/commands/user/ssl/pro.js");const a=t.Z.get({id:"SSL_OPTIONS",url:"/CMD_SSL",domain:!0,params:{dnsproviders:!0},after:e=>e.flow(e.project({"hashTypes.current":"hash_select","hashTypes.all":"hash_types",keySizes:"keysize_select",enabled:"SSL_ON",acmeProvider:"ACME_PROVIDER","tab.server":"SERVERCHECKED","tab.paste":"PASTECHECKED","letsEncrypt.domains":"LETSENCRYPT_OPTIONS","letsEncrypt.selected":"LETSENCRYPT_OPTIONS","letsEncrypt.wc.enabled":"WILDCARD","letsEncrypt.wc.domains":"LETSENCRYPT_WC_OPTIONS","letsEncrypt.wc.selected":"LETSENCRYPT_WC_OPTIONS","letsEncrypt.enabled":"LETSENCRYPT","letsEncrypt.showOptions":"LETSENCRYPT","letsEncrypt.maxRequests":"LETSENCRYPT_MAX_REQUESTS","letsEncrypt.renewalDays":"LETSENCRYPT_RENEWAL_DAYS","letsEncrypt.dnsProviders":"dnsproviders","letsEncrypt.backgroundDefault":"BACKGROUND_DEFAULT",cert:"CERTIFICATE",certHosts:"CERTIFICATE_HOSTS",certExpiry:"NOT_AFTER",key:"KEY","values.province":"PROVINCE","values.city":"CITY","values.company":"COMPANY","values.division":"DIVISION","values.email":"EMAIL","values.name":"NAME","values.country":"COUNTRY","options.forceRedirect":"FORCE_SSL_CHECKED","pro.certificates":"certificates","pro.retries":"next_retries","pro.snidomains":"snidomains"}),e.mapProps({acmeProvider:r=>r||"letsencrypt",key:e.convert.toAppText,cert:e.convert.toAppText,hashTypes:e.mapProp("all",e.transformObject((r,v)=>({[r]:v}))),tab:r=>Object.keys(r).find(v=>r[v]),keySizes:e.flow(e.toSelect,e.project({all:"options",current:"value"})),enabled:e.convert.toAppBoolean,options:e.mapProp("forceRedirect",r=>!!r),letsEncrypt:e.mapProps({enabled:r=>r!=="0",showOptions:e.isEqual("1"),maxRequests:r=>e.convert.toAppNumber(r||0),domains:e.flow(r=>typeof r=="string"?{}:r,e.setDefault({}),Object.keys,e.mapArray(p.ZP.toUnicode)),selected:e.flow(r=>typeof r=="string"?{}:r,e.setDefault({}),e.filter(e.notEmpty),Object.keys),backgroundDefault:r=>r||"auto",wc:e.mapProps({enabled:e.isEqual("1"),selected:e.flow(e.setDefault({}),e.filter(e.notEmpty),Object.keys),domains:e.flow(e.setDefault({}),Object.keys,e.mapArray(p.ZP.toUnicode))}),dnsProviders:r=>{if(!r||r.data.error)return{data:{},selected:{value:"",configuration:{}}};const v=T=>(delete T.dnsprovider,T);return{data:r.data,selected:{value:r.dnsprovider?r.dnsprovider.dnsprovider:"",configuration:r.dnsprovider?v(r.dnsprovider):{}}}}}),pro:i.xn}))}),l=t.Z.post({url:"/CMD_SSL",params:{action:"save"},domain:!0,schema:{type:t.Z.REQUIRED_STRING,request:{required:!0}}}),m=l.extend({id:"SSL_REQUEST",params:{type:"create"},schema:{country:t.Z.REQUIRED_STRING,province:t.Z.REQUIRED_STRING,city:t.Z.REQUIRED_STRING,company:t.Z.REQUIRED_STRING,division:t.Z.REQUIRED_STRING,name:t.Z.REQUIRED_STRING,email:t.Z.REQUIRED_STRING,keysize:t.Z.REQUIRED_STRING,encryption:t.Z.REQUIRED_STRING},after:e=>e.mapProp("request",e.flow(r=>r||"",e.convert.toAppString,e.convert.toAppText))}),E=l.extend({params:{type:"server",request:!1}}),_=l.extend({params:{type:"create",request:"letsencrypt"},schema:{name:t.Z.REQUIRED_STRING,keysize:t.Z.REQUIRED_STRING,encryption:t.Z.REQUIRED_STRING,wildcard:t.Z.OPTIONAL_BOOL,le_select:{type:Array,required:!1},le_wc_select:{type:Array,required:!1},background:t.Z.REQUIRED_STRING}}),R=t.Z.post({url:"/CMD_SSL",params:{disable_letsencrypt_autorenew:!0,json:!0},domain:!0}),n=t.Z.post({url:"/CMD_SSL",params:{action:"save",type:"paste"},domain:!0,body:{certificate:t.Z.REQUIRED_STRING},before:({certificate:e})=>({certificate:e.replace(/\r\n/g,`
`)})}),c=t.Z.get({id:"CA",url:"/CMD_SSL",params:{view:"cacert"},domain:!0,after:e=>e.flow(e.moveProp("CHECKED","active"),e.moveProp("CACERT","cacert"),e.mapProps({active:e.convert.toAppBoolean,cacert:r=>r.replace(/(\\n)/gm,`
`)}))}),u=t.Z.post({url:"/CMD_SSL",params:{action:"save",type:"cacert"},domain:!0,schema:{active:t.Z.REQUIRED_BOOL,cacert:t.Z.REQUIRED_STRING},before:({cacert:e})=>({cacert:e.replace(/\r\n/g,`
`)})}),S=t.Z.post({url:"/CMD_DOMAIN",params:{action:"private_html"},domain:!0,schema:{force_ssl:t.Z.REQUIRED_BOOL}}),s=t.Z.post({url:"/CMD_DOMAIN",params:{action:"modify",only_affect:"ssl",ssl:"ON"},domain:!0}),y=s.extend({params:{ssl:null}}),D=t.Z.post({url:"/CMD_SSL",params:{action:"save",type:"dnsprovider"},domain:!0}),O=t.Z.post({url:"/CMD_SSL",domain:!0,params:{action:"save",type:"dnsprovider",dnsprovider_reset:!0}})},"./js/api/commands/user/ssl/pro.js":function(C,d,o){o.d(d,{AW:function(){return R},HB:function(){return c},XZ:function(){return S},_u:function(){return u},vn:function(){return n},xn:function(){return _}});var t=o("./js/api/command/index.js"),p=o("./js/api/converters.js"),i=o("./js/context/index.ts"),a=o("../node_modules/ramda/es/index.js");const l=s=>({...s,valid:s.valid==="yes"}),m=s=>({host:s.domain,next_retry:(0,p.toAppDate)(s.next_retry),hosts:a.VO0(a.D95((y,D)=>D.includes(s.wildcard==="yes"?"le_wc_select":"le_select"),s))}),E=([s,y])=>({host:s,...y}),_=s=>typeof s.certificates=="undefined"?!1:a.rO9({certificates:a.zGw(a.VO0,a.UID(l)),retries:a.zGw(a.VO0,a.UID(m)),snidomains:a.zGw(a.Zpf,a.UID(E))},s),R=t.Z.select({url:"/CMD_SSL",domain:!0,params:{action:"certificate",retry:!0}}),n=t.Z.select({url:"/CMD_SSL",domain:!0,params:{action:"certificate",delete:!0}}),c=t.Z.select({url:"/CMD_SSL",domain:!0,params:{action:"retries",retry_now:!0}}),u=t.Z.select({url:"/CMD_SSL",domain:!0,params:{action:"retries",cancel:!0}}),S=t.Z.post({url:"/CMD_SSL",before:s=>({domain:i.T.session.domain,select0:i.T.session.domain,action:"retries",retry_now:!0,wildcard:s.wildcard?!0:null,subdomains:s.subdomains?!0:null,pointers:s.pointers?!0:null}),schema:{wildcard:t.Z.OPTIONAL_BOOL,subdomains:t.Z.OPTIONAL_BOOL,pointers:t.Z.OPTIONAL_BOOL}})},"./js/pages/user/ssl/ca-cert.vue":function(C,d,o){o.r(d),o.d(d,{default:function(){return _}});var t=function(){var n=this,c=n._self._c;return c("app-page",{attrs:{actions:[{label:n.$gettext("Copy to clipboard"),handler:n.copyToClipboard,icon:"#clipboard-copy"}]},scopedSlots:n._u([{key:"default",fn:function(){return[c("app-page-section",[c("ui-form-element",{attrs:{vertical:""},scopedSlots:n._u([{key:"content",fn:function(){return[c("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column",cross:"start"},expression:"{ dir: 'column', cross: 'start' }"},{name:"gutter",rawName:"v-gutter",value:[1,null],expression:"[1, null]"}]},[c("textarea",{directives:[{name:"model",rawName:"v-model",value:n.cacert,expression:"cacert"}],ref:"cacert",staticClass:"pageSsl-keyArea width:100%",attrs:{rows:"10"},domProps:{value:n.cacert},on:{input:function(u){u.target.composing||(n.cacert=u.target.value)}}})])]},proxy:!0}])}),n._v(" "),c("ui-form-element",{attrs:{vertical:""},scopedSlots:n._u([{key:"content",fn:function(){return[c("input-checkbox",{model:{value:n.active,callback:function(u){n.active=u},expression:"active"}},[c("span",{domProps:{textContent:n._s(n.$gettext("Use a CA Cert"))}})])]},proxy:!0}])})],1)]},proxy:!0},{key:"footer:buttons",fn:function(){return[c("ui-button",{attrs:{theme:"safe",disabled:!n.cacert},on:{click:n.submit}},[c("span",{domProps:{textContent:n._s(n.$gettext("Save"))}})])]},proxy:!0}])})},p=[],i=o("./js/api/commands/user/ssl/index.js"),a={preload:i.SA,api:[{command:i.SA,bind:"ca"}],data:()=>({cacert:"",active:!1}),created(){this.active=this.$api.ca.active,this.cacert=this.$api.ca.cacert},methods:{submit(){(0,i._d)({cacert:this.cacert,active:this.active})},copyToClipboard(){this.$refs.cacert.select(),document.execCommand("copy")}}},l=a,m=o("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),E=(0,m.Z)(l,t,p,!1,null,null,null),_=E.exports}}]);
