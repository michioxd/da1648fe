"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3311],{"../node_modules/date-fns/esm/formatDistance/index.js":function($,x,a){a.d(x,{Z:function(){return N}});var h=a("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),r=a("../node_modules/date-fns/esm/toDate/index.js"),i=a("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function v(s,t){(0,i.Z)(2,arguments);var e=(0,r.Z)(s),n=(0,r.Z)(t),c=e.getTime()-n.getTime();return c<0?-1:c>0?1:c}function E(s,t){(0,i.Z)(2,arguments);var e=(0,r.Z)(s),n=(0,r.Z)(t),c=e.getFullYear()-n.getFullYear(),M=e.getMonth()-n.getMonth();return c*12+M}function p(s){(0,i.Z)(1,arguments);var t=(0,r.Z)(s);return t.setHours(23,59,59,999),t}function g(s){(0,i.Z)(1,arguments);var t=(0,r.Z)(s),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function l(s){(0,i.Z)(1,arguments);var t=(0,r.Z)(s);return p(t).getTime()===g(t).getTime()}function C(s,t){(0,i.Z)(2,arguments);var e=(0,r.Z)(s),n=(0,r.Z)(t),c=v(e,n),M=Math.abs(E(e,n)),u;if(M<1)u=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-c*M);var Z=v(e,n)===-c;l((0,r.Z)(s))&&M===1&&v(s,n)===1&&(Z=!1),u=c*(M-Number(Z))}return u===0?0:u}function j(s,t){return(0,i.Z)(2,arguments),(0,r.Z)(s).getTime()-(0,r.Z)(t).getTime()}var T={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},B="trunc";function y(s){return s?T[s]:T[B]}function O(s,t,e){(0,i.Z)(2,arguments);var n=j(s,t)/1e3;return y(e==null?void 0:e.roundingMethod)(n)}var U=a("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function A(s,t){if(s==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s[e]=t[e]);return s}function L(s){return A({},s)}var o=a("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),d=1440,D=2520,P=43200,b=86400;function N(s,t,e){var n,c;(0,i.Z)(2,arguments);var M=(0,h.j)(),u=(n=(c=e==null?void 0:e.locale)!==null&&c!==void 0?c:M.locale)!==null&&n!==void 0?n:U.Z;if(!u.formatDistance)throw new RangeError("locale must contain formatDistance property");var Z=v(s,t);if(isNaN(Z))throw new RangeError("Invalid time value");var f=A(L(e),{addSuffix:Boolean(e==null?void 0:e.addSuffix),comparison:Z}),R,S;Z>0?(R=(0,r.Z)(t),S=(0,r.Z)(s)):(R=(0,r.Z)(s),S=(0,r.Z)(t));var m=O(S,R),W=((0,o.Z)(S)-(0,o.Z)(R))/1e3,_=Math.round((m-W)/60),I;if(_<2)return e!=null&&e.includeSeconds?m<5?u.formatDistance("lessThanXSeconds",5,f):m<10?u.formatDistance("lessThanXSeconds",10,f):m<20?u.formatDistance("lessThanXSeconds",20,f):m<40?u.formatDistance("halfAMinute",0,f):m<60?u.formatDistance("lessThanXMinutes",1,f):u.formatDistance("xMinutes",1,f):_===0?u.formatDistance("lessThanXMinutes",1,f):u.formatDistance("xMinutes",_,f);if(_<45)return u.formatDistance("xMinutes",_,f);if(_<90)return u.formatDistance("aboutXHours",1,f);if(_<d){var K=Math.round(_/60);return u.formatDistance("aboutXHours",K,f)}else{if(_<D)return u.formatDistance("xDays",1,f);if(_<P){var z=Math.round(_/d);return u.formatDistance("xDays",z,f)}else if(_<b)return I=Math.round(_/P),u.formatDistance("aboutXMonths",I,f)}if(I=C(S,R),I<12){var V=Math.round(_/P);return u.formatDistance("xMonths",V,f)}else{var X=I%12,F=Math.floor(I/12);return X<3?u.formatDistance("aboutXYears",F,f):X<9?u.formatDistance("overXYears",F,f):u.formatDistance("almostXYears",F+1,f)}}},"./js/composables/dateFilter.ts":function($,x,a){a.d(x,{W:function(){return E},f:function(){return i.f}});var h=a("../node_modules/ramda/es/index.js"),r=a("../node_modules/date-fns/esm/format/index.js"),i=a("./js/modules/date-formats.ts"),v=a("./js/modules/customizations/date-formats/default.ts");const E=h.WAo((p,g)=>{if(g)try{return(0,r.Z)(g,i.f.value[p])}catch(l){return console.warn(`Given ${p} format is incorrect:
${l.message}`),(0,r.Z)(g,v.d[p])}return""})},"./js/composables/filters.ts":function($,x,a){a.d(x,{Q0:function(){return O},aS:function(){return A},d5:function(){return U},eB:function(){return T},hT:function(){return C},kC:function(){return l},n9:function(){return y},zM:function(){return j}});var h=a("../node_modules/date-fns/esm/formatDistance/index.js"),r=a("../node_modules/punycode/punycode.es6.js"),i=a("./js/composables/dateFilter.ts"),v=a("./js/composables/gettext.ts");const{$gettext:E,$ngettext:p,$gettextInterpolate:g}=(0,v.Z)(),l=o=>{var d;return o?((d=o.at(0))===null||d===void 0?void 0:d.toUpperCase())+o.slice(1):""},C=(o,d="datetime")=>(0,i.W)(d,o),j=o=>(0,h.Z)(o,new Date),T=(o,d=1024)=>{const D=Number(o);if(!D)return"0 B";const P=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],b=Math.floor(Math.log(D)/Math.log(d));return`${parseFloat((D/d**b).toFixed(2))} ${P[b]}`},B=o=>{try{return(0,r.xX)(o)}catch(d){return o}},y=o=>(0,r.xX)(o),O=o=>{if(!o||!o.includes("@"))return o;const[d,D]=o.split("@");return[d,B(D)].join("@")},U=o=>{if(o<60)return E("less than a minute");const d=Math.floor(o/60)%60,D=Math.floor(o/3600)%24,P=Math.floor(o/(3600*24)),b=[P?p("%{days} day","%{days} days",P):null,D?p("%{hours} hour","%{hours} hours",D):null,d?p("%{minutes} minute","%{minutes} minutes",d):null].filter(Boolean).join(", ");return g(b,{days:P,hours:D,minutes:d})},A=(o,d)=>o.length<=d?o:`${o.substring(0,d)}...`,L=()=>({capitalize:l,date:C,distanceFromNow:j,humanReadableSize:T,p6eUnicode:y,p6eUnicodeEmail:O,formatUptime:U,truncateString:A})},"./js/composables/useDataStore.ts":function($,x,a){a.d(x,{a:function(){return v}});var h=a("./js/api/openapi/decorators/data-store-decorator.ts"),r=a("../node_modules/vue/dist/vue.common.prod.js"),i=a.n(r);const v=E=>{const p=(0,r.ref)(null);return{data:p,request:(0,h.i)(p,E)}}},"./js/openapi/version.ts":function($,x,a){a.d(x,{bo:function(){return v},fk:function(){return E},qx:function(){return p}});var h=a("./js/api/openapi/index.ts"),r=a("./js/openapi/web.types.ts");const i=(0,h.$d)(),v=h.an.Default(async g=>{const{data:l}=await i.get("/api/version",g);return l.status==="success"&&r.vB.guard(l.data)===!1?i.failure({type:"INVALID_RESPONSE",response:l.data}):l}),E=h.an.Default(async g=>{const{data:l}=await i.post("/api/version/update",g);return l}),p=h.an.Default(async(g,l)=>{const{data:C}=await i.patch("/api/version",g,l);return C.status==="success"&&r.vB.guard(C.data)===!1?i.failure({type:"INVALID_RESPONSE",response:C.data}):C})},"./js/pages/admin/updates/index.vue":function($,x,a){a.r(x),a.d(x,{default:function(){return N}});var h=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("app-page",{scopedSlots:t._u([{key:"default",fn:function(){return[e("app-page-section",{scopedSlots:t._u([{key:"footer:buttons",fn:function(){return[n.version.update.available?e("ui-button",{attrs:{disabled:n.updated,theme:"primary"},on:{click:n.updateDA}},[e("span",{domProps:{textContent:t._s(n.updated?n.$gettext("Updating now..."):n.$gettext("Update DirectAdmin"))}})]):t._e(),t._v(" "),e("ui-button",{attrs:{theme:"danger",disabled:n.restarted},on:{click:n.restartDA}},[e("span",{domProps:{textContent:t._s(n.restarted?n.$gettext("Restarting now..."):n.$gettext("Restart DirectAdmin"))}})])]},proxy:!0}])},[e("table",{staticClass:"table-elem"},[e("tbody",[e("tr",[e("td",{staticClass:"txt:bold",domProps:{textContent:t._s(n.$gettext("Version"))}}),t._v(" "),e("td",[t._v(`
                            `+t._s(n.version.version)+" ("+t._s(n.version.commit)+`)
                            `),e("ui-link",{staticClass:"c:txt:primary",attrs:{target:"_blank",href:n.changelogLink(n.version.version)}},[e("span",{domProps:{textContent:t._s(n.$gettext("Changelog"))}})])],1)]),t._v(" "),n.version.update.available?e("tr",[e("td",{staticClass:"txt:bold",domProps:{textContent:t._s(n.$gettext("Available Update"))}}),t._v(" "),e("td",[t._v(`
                            `+t._s(n.version.update.version)+" ("+t._s(n.version.update.commit)+`)
                            `),e("ui-link",{staticClass:"c:txt:primary",attrs:{target:"_blank",href:n.changelogLink(n.version.update.version)}},[e("span",{domProps:{textContent:t._s(n.$gettext("Changelog"))}})])],1)]):t._e(),t._v(" "),e("tr",[e("td",{staticClass:"txt:bold",domProps:{textContent:t._s(n.$gettext("DA build for OS"))}}),t._v(" "),e("td",{domProps:{textContent:t._s(n.version.buildDistro)}})]),t._v(" "),e("tr",[e("td",{staticClass:"txt:bold",domProps:{textContent:t._s(n.$gettext("Detected server OS"))}}),t._v(" "),e("td",{domProps:{textContent:t._s(n.version.detectedDistro)}})]),t._v(" "),e("tr",[e("td",{staticClass:"txt:bold",domProps:{textContent:t._s(n.$gettext("Uptime"))}}),t._v(" "),e("td",{domProps:{textContent:t._s(n.formatUptime(n.version.uptime/1e9))}})]),t._v(" "),e("tr",[e("td",{staticClass:"txt:bold",domProps:{textContent:t._s(n.$gettext("Update Channel"))}}),t._v(" "),e("td",[e("input-select",{attrs:{options:n.version.update.availableChannels,selected:n.version.update.channel},on:{change:n.updateChannel}})],1)]),t._v(" "),e("tr",[e("td",{staticClass:"txt:bold"},[t._v("Evolution Version")]),t._v(" "),e("td",[t._v(`
                            `+t._s(n.evolutionVersion.commit)+`
                        `)])])])])])]},proxy:!0}])})},r=[],i=a("../node_modules/vue/dist/vue.common.prod.js"),v=a("./js/openapi/version.ts"),E=a("./js/api/openapi/index.ts");const p=(0,E.$d)(),g=E.an.Default(async s=>{const{data:t}=await p.post("/api/restart",s);return t});var l=a("./js/composables/index.ts"),C=a("./js/context/index.ts"),j=a("./js/composables/useDataStore.ts");const{$gettext:T,$gettextInterpolate:B}=(0,l.st)(),y=(0,l.d$)(),{data:O,request:U}=(0,j.a)(v.bo),A=async()=>{const s=await U();return s.status==="error"&&y.error({title:T("Error"),content:B(T("Failed to load %{subject}!"),{subject:T("version information")})}),s};var L=a("./js/composables/filters.ts");const o=(0,i.defineComponent)({name:"DirectadminUpdates",async beforeRouteEnter(s,t,e){const{data:n,error:c}=await A();if(c||!n)return e(!1);e()}});var d=(0,i.defineComponent)({...o,emits:[],setup(s){const t=(0,i.ref)(!1),e=(0,i.ref)(!1),n=(0,l.d$)(),{$gettext:c}=(0,l.st)(),M=(0,l.Lu)({}),u=(0,i.computed)(()=>({version:C.T.session.values.server.skinVersion,commit:"1663b45e56b5109e17e9e079806879b27a349141"}));return{__sfc:!0,restarted:t,updated:e,notify:n,$gettext:c,notifyError:M,evolutionVersion:u,changelogLink:m=>`https://docs.directadmin.com/changelog/version-${m}.html`,updateDA:async()=>{const{error:m}=await(0,v.fk)();if(m){M(m);return}n.success({title:c("Success"),content:c("Update is scheduled")})},restartDA:async()=>{const{error:m}=await g();if(m){M(m);return}t.value=!0},updateChannel:async function(m){if(!O.value||m===O.value.update.channel)return;const W=O.value.update.channel;O.value.update.channel=m;const{data:_,error:I}=await(0,v.qx)({update:{channel:m}});if(I){O.value.update.channel=W,M(I);return}O.value=_,n.success({title:c("Success"),content:c("Channel update scheduled")})},version:O,formatUptime:L.d5}}}),D=d,P=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),b=(0,P.Z)(D,h,r,!1,null,null,null),N=b.exports}}]);
