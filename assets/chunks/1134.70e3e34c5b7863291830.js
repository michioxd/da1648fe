(self.webpackChunk=self.webpackChunk||[]).push([[1134],{"../node_modules/date-fns/esm/formatDistance/index.js":function(j,b,o){"use strict";o.d(b,{Z:function(){return z}});var n=o("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),u=o("../node_modules/date-fns/esm/toDate/index.js"),d=o("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function D(f,g){(0,d.Z)(2,arguments);var _=(0,u.Z)(f),R=(0,u.Z)(g),T=_.getTime()-R.getTime();return T<0?-1:T>0?1:T}function m(f,g){(0,d.Z)(2,arguments);var _=(0,u.Z)(f),R=(0,u.Z)(g),T=_.getFullYear()-R.getFullYear(),Z=_.getMonth()-R.getMonth();return T*12+Z}function E(f){(0,d.Z)(1,arguments);var g=(0,u.Z)(f);return g.setHours(23,59,59,999),g}function p(f){(0,d.Z)(1,arguments);var g=(0,u.Z)(f),_=g.getMonth();return g.setFullYear(g.getFullYear(),_+1,0),g.setHours(23,59,59,999),g}function l(f){(0,d.Z)(1,arguments);var g=(0,u.Z)(f);return E(g).getTime()===p(g).getTime()}function r(f,g){(0,d.Z)(2,arguments);var _=(0,u.Z)(f),R=(0,u.Z)(g),T=D(_,R),Z=Math.abs(m(_,R)),y;if(Z<1)y=0;else{_.getMonth()===1&&_.getDate()>27&&_.setDate(30),_.setMonth(_.getMonth()-T*Z);var $=D(_,R)===-T;l((0,u.Z)(f))&&Z===1&&D(f,R)===1&&($=!1),y=T*(Z-Number($))}return y===0?0:y}function i(f,g){return(0,d.Z)(2,arguments),(0,u.Z)(f).getTime()-(0,u.Z)(g).getTime()}var a={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(g){return g<0?Math.ceil(g):Math.floor(g)}},x="trunc";function c(f){return f?a[f]:a[x]}function v(f,g,_){(0,d.Z)(2,arguments);var R=i(f,g)/1e3;return c(_==null?void 0:_.roundingMethod)(R)}var N=o("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function C(f,g){if(f==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var _ in g)Object.prototype.hasOwnProperty.call(g,_)&&(f[_]=g[_]);return f}function F(f){return C({},f)}var h=o("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),P=1440,S=2520,U=43200,L=86400;function z(f,g,_){var R,T;(0,d.Z)(2,arguments);var Z=(0,n.j)(),y=(R=(T=_==null?void 0:_.locale)!==null&&T!==void 0?T:Z.locale)!==null&&R!==void 0?R:N.Z;if(!y.formatDistance)throw new RangeError("locale must contain formatDistance property");var $=D(f,g);if(isNaN($))throw new RangeError("Invalid time value");var A=C(F(_),{addSuffix:Boolean(_==null?void 0:_.addSuffix),comparison:$}),w,G;$>0?(w=(0,u.Z)(g),G=(0,u.Z)(f)):(w=(0,u.Z)(f),G=(0,u.Z)(g));var B=v(G,w),K=((0,h.Z)(G)-(0,h.Z)(w))/1e3,O=Math.round((B-K)/60),k;if(O<2)return _!=null&&_.includeSeconds?B<5?y.formatDistance("lessThanXSeconds",5,A):B<10?y.formatDistance("lessThanXSeconds",10,A):B<20?y.formatDistance("lessThanXSeconds",20,A):B<40?y.formatDistance("halfAMinute",0,A):B<60?y.formatDistance("lessThanXMinutes",1,A):y.formatDistance("xMinutes",1,A):O===0?y.formatDistance("lessThanXMinutes",1,A):y.formatDistance("xMinutes",O,A);if(O<45)return y.formatDistance("xMinutes",O,A);if(O<90)return y.formatDistance("aboutXHours",1,A);if(O<P){var X=Math.round(O/60);return y.formatDistance("aboutXHours",X,A)}else{if(O<S)return y.formatDistance("xDays",1,A);if(O<U){var Y=Math.round(O/P);return y.formatDistance("xDays",Y,A)}else if(O<L)return k=Math.round(O/U),y.formatDistance("aboutXMonths",k,A)}if(k=r(G,w),k<12){var J=Math.round(O/U);return y.formatDistance("xMonths",J,A)}else{var Q=k%12,H=Math.floor(k/12);return Q<3?y.formatDistance("aboutXYears",H,A):Q<9?y.formatDistance("overXYears",H,A):y.formatDistance("almostXYears",H+1,A)}}},"./js/api/commands/fm.js":function(j,b,o){"use strict";o.d(b,{Dp:function(){return E},rx:function(){return l},yC:function(){return r}});var n=o("./js/api/command/index.js"),u=o("../node_modules/ramda/es/index.js");const d="/CMD_FILE_MANAGER",D=i=>{const a=x=>u.zGw(u.Zpf,u.UID(c=>({path:c[0],size:Number(c[1]),type:x})));return u.mNm(u.vgT("path"),[...a("file")(i.files),...a("directory")(i.files)])},m={type:String,required:!1,default:"/"},E=n.Z.get({url:d,id:"FOLDER_TREE",params:{action:"parent_tree"},schema:{path:m},after:i=>i.flow(a=>typeof a=="string"?JSON.parse(a.replace(`[
,`,`[
`)):a,i.mapArray(i.mapProps({path:a=>a.replace(/\/\//g,"/").replace(/\/$/g,""),dirs:i.convert.toAppNumber,files:i.convert.toAppNumber,files_size:i.convert.toAppNumber})))}),p=n.Z.get({url:d,id:"FOLDER_DIRS",params:{action:"json_dirs",ipp:1e5},schema:{path:m},after:i=>i.flow(a=>{if(a.error)throw new Error(i.convert.toAppHtml(a.error));return a},i.transformObject(a=>({[a.truepath]:{path:a.truepath,dirs:Number(a.sub_directories||0),files:Number(a.files||0)}})))}),l=n.Z.get({url:d,id:"FILE_EXISTS",response:!1,params:{action:"exists"},schema:{path:n.Z.REQUIRED_STRING},after:i=>i.flow(i.getProp("exists"),i.isEqual("1"))}),r=n.Z.get({id:"FM_SEARCH",url:"/CMD_FILE_MANAGER",params:{action:"recursive_search"},schema:{path:n.Z.REQUIRED_STRING,search:n.Z.REQUIRED_STRING,type:n.Z.OPTIONAL_STRING},response:[],mapResponse:D})},"./js/api/commands/subdomains.js":function(j,b,o){"use strict";o.d(b,{AL:function(){return p},DG:function(){return u},HB:function(){return D},UZ:function(){return d},mz:function(){return E},xs:function(){return m}});var n=o("./js/api/command/index.js");const u=n.Z.get({id:"GET_SUBDOMAINS",url:"/CMD_SUBDOMAIN",schema:{domain:n.Z.DOMAIN,...n.Z.PAGINATION},after:r=>r.flow(r.moveProp("subdomains","rows"),r.moveProp("allow_subdomain_docroot_override","docroot"),r.processTableInfo("rows"),r.mapProps({awstats:i=>i!=="0",webalizer:r.isEqual("1"),docroot:r.isEqual("1"),has_php_selector:r.isEqual("yes"),rows:r.flow(r.toArray,r.mapArray(r.moveProp("subdomain_docroot_override","docroot")),r.mapArrayProps({bandwidth:r.convert.toAppNumber,stats:r.mapProps({webalizer_only:r.convert.toAppBoolean}),docroot:i=>{if(i&&Object.keys(i).length){if(typeof i.php1_select!="undefined"){const{options:a,value:x}=r.toSelect(i.php1_select);return{public_html:i.public_html,private_html:i.private_html,php_labels:a,php1_select:x}}return i}return!1}}))}))}),d=n.Z.post({url:"/CMD_SUBDOMAIN",params:{action:"create"},schema:{domain:n.Z.DOMAIN,subdomain:n.Z.REQUIRED_STRING,public_html:n.Z.OPTIONAL_STRING}}),D=n.Z.select({url:"/CMD_SUBDOMAIN",params:{action:"delete"},domain:!0,body:{contents:n.Z.REQUIRED_BOOL}}),m=n.Z.get({id:"GET_SUBDOMAIN_LOG",url:"/CMD_SHOW_LOG",params:{json:null},accept:"text/plain",schema:{domain:n.Z.DOMAIN,type:n.Z.REQUIRED_STRING,subdomain:n.Z.REQUIRED_STRING,lines:n.Z.OPTIONAL_STRING},after:r=>r.flow(r.convert.toLines,i=>i.slice(0,-1))}),E=n.Z.post({url:"/CMD_SUBDOMAIN",params:{action:"document_root_override"},domain:!0,schema:{subdomain:n.Z.REQUIRED_STRING,public_html:n.Z.OPTIONAL_STRING}}),p=n.Z.post({url:"/CMD_SUBDOMAIN",domain:!0,params:{action:"php_selector"},schema:{subdomain:n.Z.REQUIRED_STRING,php1_select:n.Z.REQUIRED_STRING}}),l=n.Z.get({url:"/CMD_SUBDOMAIN",id:"SUBDOMAIN_DATA",domain:!0,params:{action:"show_docroot_override"},schema:{subdomain:n.Z.REQUIRED_STRING},after:r=>r.flow(r.project({has_php_selector:"has_php_selector",http:"public_html",https:"private_html",php:"php1_select"}),r.mapProps({php:r.toSelect,has_php_selector:r.isEqual("yes")}))})},"./js/api/commands/validation/index.js":function(j,b,o){"use strict";o.d(b,{i9:function(){return v},ty:function(){return x},l7:function(){return i},OE:function(){return c},ub:function(){return h},oH:function(){return p},U5:function(){return l},k_:function(){return E},PR:function(){return a},uo:function(){return F},Jj:function(){return C},rV:function(){return N}});var n=o("./js/api/command/index.js"),u=o("../node_modules/punycode/punycode.es6.js"),d=o("./js/api/commands/converters/index.ts"),D={isValid(S){return typeof S.error=="undefined"},getMessage(S){return(0,d.S8)(S.error||"")}};const m=n.Z.get({url:"/CMD_JSON_VALIDATE",schema:{value:n.Z.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:D.isValid,message:D.getMessage}}),E=m.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}}),p=m.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}}),l=m.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0}),r=m.extend({params:{type:"dns"},domain:!0,schema:{record:n.Z.REQUIRED_STRING}}),i=r.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:n.Z.REQUIRED_STRING}}),a=i.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:({value:S})=>({value:"10",mx_value:S})}),x=r.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:n.Z.REQUIRED_STRING,value:null}}),c=m.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}}),v=m.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}}),N=m.extend({id:"VALIDATE_USERNAME",params:{type:"username"}}),C=m.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}}),F=m.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}}),h=m.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:({value:S})=>({value:u.ZP.toASCII(S)})}),P=m.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}})},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/subdomains/index.vue?vue&type=style&index=0&id=d5cabeb4&prod&lang=scss&scoped=true&":function(){},"./js/api/commands/converters/customItems.ts":function(j,b,o){"use strict";o.d(b,{CR:function(){return m}});var n=o("../node_modules/ramda/es/index.js"),u=o("./js/api/commands/converters/index.ts"),d=o("./js/api/commands/utils/transduce.ts"),D=o("./js/api/commands/converters/toSelectData.ts");const m=l=>{const r={name:l.name,type:l.type==="listbox"?"select":l.type,label:l.string,description:l.desc||"",value:l.type==="checkbox"?(0,u.sw)(l.checked||"no"):l.value||""};return r.type==="select"?n.BPw(r,(0,D.M1)(l.select||{})):r},E=l=>(0,d.vr)([(0,d.uD)(r=>/^item\d+val$/.test(r)),(0,d.r5)(r=>{const i=r,a=r.replace("val","txt"),x=l[i],c=l[a];return{[x]:c}})],Object.keys(l)),p=(l,r)=>n.qCK(a=>{const x={name:a.name,type:a.type==="listbox"?"select":a.type,description:a.desc||"",value:a.value||"",label:a.string};return a.type==="listbox"?(x.value=a.default,x.options=E(a)):a.type==="checkbox"&&(x.value=a.checked==="yes"),x},n.BPw({name:l}),(0,d.vr)([(0,d.r5)(a=>{const[x,c]=n.Vl2("=",a);return{[x]:c}})]),n.Vl2("&"))(r);b.ZP={fromObject:m,fromString:p}},"./js/api/commands/converters/index.ts":function(j,b,o){"use strict";o.d(b,{l$:function(){return i.ZP},t0:function(){return n.t0},S8:function(){return n.S8},ql:function(){return n.ql},sw:function(){return n.sw},Qu:function(){return n.Qu},He:function(){return n.He},M1:function(){return r.M1},sf:function(){return x},cc:function(){return l}});var n=o("./js/api/commands/converters/primitive.ts"),u=o("../node_modules/monet/dist/monet.js"),d=o("./js/api/commands/types.ts");const D=c=>typeof c=="object"?u.Either.Right(c):u.Either.Left(new Error("Passed param is not an object")),m=c=>typeof c.usage=="string"?u.Either.Right(c):u.Either.Left(new Error("usage property is required")),E=c=>({usage:(0,n.He)(c.usage),limit:(0,n.Qu)(c.limit)}),p=({usage:c,limit:v})=>{let N=d.H.Normal;const C=Math.floor(c/v*100);return C>=100?N=d.H.OverUsed:C>80&&(N=d.H.AlmostUsed),{usage:c,limit:v,status:N}},l=c=>{const v=u.Either.Right(c).flatMap(D).flatMap(m).map(E).map(p);if(v.isLeft())throw v.left();return v.right()};var r=o("./js/api/commands/converters/toSelectData.ts"),i=o("./js/api/commands/converters/customItems.ts"),a=o("../node_modules/ramda/es/index.js");const x=c=>v=>{const{info:N}=v,C=a.CEd(["info"],v);return{columns:N.columns,rowsCount:Number(N.rows),rows:a.UID(c,a.VO0(C))}}},"./js/api/commands/converters/toSelectData.ts":function(j,b,o){"use strict";o.d(b,{M1:function(){return p}});var n=o("../node_modules/monet/dist/monet.js"),u=o.n(n),d=o("./js/api/commands/utils/transduce.ts"),D=o("../node_modules/ramda/es/index.js");const m=l=>n.Maybe.Some(l).flatMap(r=>{const i=r.find(a=>a.selected==="yes");return i?n.Maybe.Some(i):n.Maybe.None()}).flatMap(r=>n.Maybe.fromNull(r.value)).orSome(""),E=(0,d.vr)([(0,d.r5)(l=>({[l.value]:l.text}))]),p=l=>{const r=(0,D.VO0)(l);return{value:m(r),options:E(r)}}},"./js/api/commands/types.ts":function(j,b,o){"use strict";o.d(b,{H:function(){return n}});var n;(function(u){u.Normal="normal",u.AlmostUsed="almost_used",u.OverUsed="overused"})(n||(n={}))},"./js/api/commands/utils/transduce.ts":function(j,b,o){"use strict";o.d(b,{Re:function(){return D},r5:function(){return u},uD:function(){return d},vr:function(){return r},zh:function(){return p}});var n=o("../node_modules/ramda/es/index.js");const u=i=>a=>(x,c)=>{const v=i(c);return a(x,v)},d=i=>a=>(x,c)=>i(c)?a(x,c):x,D=(i,a)=>(i.push(a),i),m=(i,a)=>n.BPw(i,a),E=(i,a,x,c)=>{const v=n.qCK(...x);return c.reduce(v(a),i)},p=n.WAo(E),l=p([],D),r=p({},m)},"./js/composables/dateFilter.ts":function(j,b,o){"use strict";o.d(b,{W:function(){return m},f:function(){return d.f}});var n=o("../node_modules/ramda/es/index.js"),u=o("../node_modules/date-fns/esm/format/index.js"),d=o("./js/modules/date-formats.ts"),D=o("./js/modules/customizations/date-formats/default.ts");const m=n.WAo((E,p)=>{if(p)try{return(0,u.Z)(p,d.f.value[E])}catch(l){return console.warn(`Given ${E} format is incorrect:
${l.message}`),(0,u.Z)(p,D.d[E])}return""})},"./js/composables/filters.ts":function(j,b,o){"use strict";o.d(b,{Q0:function(){return v},aS:function(){return C},d5:function(){return N},eB:function(){return a},hT:function(){return r},kC:function(){return l},n9:function(){return c},zM:function(){return i}});var n=o("../node_modules/date-fns/esm/formatDistance/index.js"),u=o("../node_modules/punycode/punycode.es6.js"),d=o("./js/composables/dateFilter.ts"),D=o("./js/composables/gettext.ts");const{$gettext:m,$ngettext:E,$gettextInterpolate:p}=(0,D.Z)(),l=h=>{var P;return h?((P=h.at(0))===null||P===void 0?void 0:P.toUpperCase())+h.slice(1):""},r=(h,P="datetime")=>(0,d.W)(P,h),i=h=>(0,n.Z)(h,new Date),a=(h,P=1024)=>{const S=Number(h);if(!S)return"0 B";const U=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],L=Math.floor(Math.log(S)/Math.log(P));return`${parseFloat((S/P**L).toFixed(2))} ${U[L]}`},x=h=>{try{return(0,u.xX)(h)}catch(P){return h}},c=h=>(0,u.xX)(h),v=h=>{if(!h||!h.includes("@"))return h;const[P,S]=h.split("@");return[P,x(S)].join("@")},N=h=>{if(h<60)return m("less than a minute");const P=Math.floor(h/60)%60,S=Math.floor(h/3600)%24,U=Math.floor(h/(3600*24)),L=[U?E("%{days} day","%{days} days",U):null,S?E("%{hours} hour","%{hours} hours",S):null,P?E("%{minutes} minute","%{minutes} minutes",P):null].filter(Boolean).join(", ");return p(L,{days:U,hours:S,minutes:P})},C=(h,P)=>h.length<=P?h:`${h.substring(0,P)}...`,F=()=>({capitalize:l,date:r,distanceFromNow:i,humanReadableSize:a,p6eUnicode:c,p6eUnicodeEmail:v,formatUptime:N,truncateString:C})},"./js/pages/user/subdomains/index.vue":function(j,b,o){"use strict";o.r(b),o.d(b,{default:function(){return se}});var n=function(){var e=this,t=e._self._c;return t("app-page",{attrs:{actions:[{label:e.$gettext("Add Subdomain"),handler:e.addSubdomainDialog.open,icon:"#plus-fill",visible:e.subdomainUsage.usage<e.subdomainUsage.limit,theme:"safe"}]},scopedSlots:e._u([{key:"details",fn:function(){return[t("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[t("ui-infobar-stats",e._b({attrs:{title:e.$gettext("Subdomains")}},"ui-infobar-stats",e.subdomainUsage,!1))],1)]},proxy:!0},{key:"default",fn:function(){return[t("app-page-section",[t("ui-api-table",e._b({on:{"action:delete":function(s){e.$dialog("DELETE_ITEMS_DIALOG").open()}},scopedSlots:e._u([{key:"col:subdomain_name",fn:function({subdomain_name:s}){return[e._v(`
                    `+e._s(e.$p6e.toU(s))+"."+e._s(e.$domainUnicode)+`
                `)]}},{key:"col:docroot",fn:function({docroot:s,subdomain_name:I}){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"start"},expression:"{ cross: 'center', main: 'start' }"}]},[e._v(`
                        `+e._s(s.public_html)+`

                        `),t("ui-link",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],on:{click:function(V){return e.changeDocroot(I,s)}}},[t("ui-icon",{attrs:{id:"pencil",size:12}})],1)],1)]}},{key:"col:phpver",fn:function({docroot:s,subdomain_name:I}){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"start"},expression:"{ cross: 'center', main: 'start' }"}]},[e._v(`
                        `+e._s(s.php_labels[s.php1_select])+`
                        `),t("ui-link",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],on:{click:function(V){return e.changePhp(I,s)}}},[t("ui-icon",{attrs:{id:"pencil",size:12}})],1)],1)]}},{key:"col:bandwidth",fn:function({bandwidth:s}){return[e._v(`
                    `+e._s(e.humanReadableSize(s))+`
                `)]}},{key:"row:actions",fn:function({item:s}){return[t("ui-actions",[t("ui-link",{attrs:{name:"user/subdomains/stats",params:{subdomain:s.subdomain_name}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Stats"))}})]),e._v(" "),t("ui-link",{attrs:{name:"user/subdomains/logs",params:{subdomain:s.subdomain_name,type:"usage"}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Usage Log"))}})]),e._v(" "),t("ui-link",{attrs:{name:"user/subdomains/logs",params:{subdomain:s.subdomain_name,type:"error"}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Error Log"))}})]),e._v(" "),e.$_cmd("/CMD_MODSECURITY")?t("ui-link",{attrs:{name:"user/modsecurity",params:{subdomainProp:s.subdomain_name,domainProp:e.$domain}}},[t("span",{domProps:{textContent:e._s(e.$gettext("ModSecurity"))}})]):e._e()],1)]}}]),model:{value:e.select,callback:function(s){e.select=s},expression:"select"}},"ui-api-table",{command:e.$commands.getSubdomains,rowID:"subdomain_name",columns:{subdomain_name:{label:e.$gettext("Subdomain Name"),grow:!0},bandwidth:e.$gettext("Bandwidth"),docroot:{label:e.$gettext("Docroot"),hide:!e.docrootOverrideEnabled},phpver:{label:e.$gettext("PHP Version"),hide:!e.docrootOverrideEnabled}},actions:{delete:e.$gettext("Delete")}},!1))],1),e._v(" "),t("add-subdomain-dialog",{on:{update:e.resetData}}),e._v(" "),t("change-docroot-dialog",e._b({on:{"docroot-changed":e.resetData}},"change-docroot-dialog",e.selectedSubdomain,!1)),e._v(" "),t("change-php-dialog",e._b({on:{"php-changed":e.resetData}},"change-php-dialog",e.selectedSubdomain,!1)),e._v(" "),t("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("subdomain","subdomains",e.select.length)},on:{"click:confirm":e.deleteSubdomains}},[t("input-checkbox",{model:{value:e.removeDir,callback:function(s){e.removeDir=s},expression:"removeDir"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Remove Directory Content"))}})])],1)]},proxy:!0}])})},u=[],d=o("./js/api/commands/subdomains.js"),D=o("./js/api/commands/validation/index.js"),m=o("./js/composables/index.ts"),E=o("./js/composables/filters.ts"),p=o("../node_modules/vue/dist/vue.common.prod.js"),l=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("ui-dialog",{attrs:{id:"ADD_SUBDOMAIN_DIALOG",title:e.$gettext("Add New Subdomain"),size:"normal"},on:{"dialog:open":s.reset},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-form-element",{attrs:{vertical:"",group:"createSubdomain",validators:{required:!0,api:s.validateSubdomain}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Subdomain"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{suffix:`.${s.domainUnicode}`},model:{value:s.newSubdomain,callback:function(I){s.newSubdomain=I},expression:"newSubdomain"}})]},proxy:!0}])}),e._v(" "),s.newSubdomain?[t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Document Root"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-radio",{directives:[{name:"padding",rawName:"v-padding:left",value:0,expression:"0",arg:"left"}],attrs:{value:"default"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Default"))}})]},proxy:!0},{key:"description",fn:function(){return[t("code",[e._v(e._s(s.defaultDocroot))])]},proxy:!0}],null,!1,3231330588),model:{value:s.docrootType,callback:function(I){s.docrootType=I},expression:"docrootType"}})]},proxy:!0}],null,!1,3388697820)}),e._v(" "),t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("input-radio",{directives:[{name:"padding",rawName:"v-padding:left",value:0,expression:"0",arg:"left"}],attrs:{value:"legacy"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Legacy (a sub-folder inside main domain)"))}})]},proxy:!0},{key:"description",fn:function(){return[t("code",[e._v(e._s(s.legacyDocroot))])]},proxy:!0}],null,!1,1618941304),model:{value:s.docrootType,callback:function(I){s.docrootType=I},expression:"docrootType"}})]},proxy:!0}],null,!1,578559538)}),e._v(" "),t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"content",fn:function(){return[t("input-radio",{directives:[{name:"padding",rawName:"v-padding:left",value:0,expression:"0",arg:"left"}],attrs:{value:"custom"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Custom"))}})]},proxy:!0},{key:"description",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Use a custom document root for this subdomain"))}})]},proxy:!0}],null,!1,835657873),model:{value:s.docrootType,callback:function(I){s.docrootType=I},expression:"docrootType"}})]},proxy:!0}],null,!1,1922956334)}),e._v(" "),s.docrootType==="custom"?t("ui-form-element",{attrs:{group:"createSubdomain",validators:{required:!0,domainsPart:s.validators.domainsPart,endingPart:s.validators.endingPart,forbiddenParts:s.validators.forbiddenParts},vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Path"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:s.customDocrootPath,callback:function(I){s.customDocrootPath=I},expression:"customDocrootPath"}})]},proxy:!0},{key:"error:domainsPart",fn:function(){return[t("span",{domProps:{textContent:e._s(s.validationMessages.domainsPart)}})]},proxy:!0},{key:"error:endingPart",fn:function(){return[t("span",{domProps:{textContent:e._s(s.validationMessages.endingPart)}})]},proxy:!0},{key:"error:forbiddenParts",fn:function(){return[t("span",{domProps:{textContent:e._s(s.validationMessages.forbiddenParts)}})]},proxy:!0}],null,!1,2316772385)}):e._e()]:e._e()]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe","validate-group":"createSubdomain"},on:{click:s.submit}},[t("span",{domProps:{textContent:e._s(e.$gettext("Add Subdomain"))}})])]},proxy:!0}])})},r=[],i=o("./js/composables/domain.ts"),a=o("../node_modules/punycode/punycode.es6.js"),x=o("./js/api/commands/fm.js"),c=o("./js/composables/gettext.ts"),v=o("../node_modules/ramda/es/index.js");const P={domainsPart:M=>M?M.startsWith("/domains/"):!0,forbiddenParts:M=>M?v.sv4([v.CyQ(v.q9t("/../")),v.CyQ(v.q9t("/./")),v.CyQ(v.q9t("//"))])(M):!0,endingPart:M=>M?v.sv4([v.CyQ(v.pnn("/..")),v.CyQ(v.pnn("/.")),v.CyQ(v.pnn("/"))])(M):!0,exists:async M=>{if(!M)return!0;const e=await(0,x.rx)({path:M});return Boolean(e)}},{$gettext:S}=(0,c.Z)(),U={domainsPart:S("The path must start with /domains/"),forbiddenParts:S("The path must not contain /../, /./ or //"),endingPart:S("The path must not end with /.., /. or /"),exists:S("The path does not exists")};var L=(0,p.defineComponent)({__name:"add-subdomain-dialog",emits:["update"],setup(M,{emit:e}){const{domain:t,domainUnicode:s}=(0,i.a)(),I=(0,p.ref)(""),V=(0,p.ref)("default"),q=(0,p.ref)(""),W=(0,p.computed)(()=>(0,a.H9)(I.value)),ae=(0,p.computed)(()=>`/domains/${W.value}.${t.value}/public_html`),ee=(0,p.computed)(()=>`/domains/${t.value}/public_html/${W.value}`),te=(0,p.computed)(()=>{switch(V.value){case"legacy":return ee.value;case"custom":return q.value;default:return null}});return{__sfc:!0,domain:t,domainUnicode:s,newSubdomain:I,docrootType:V,customDocrootPath:q,emit:e,punycodedSubdomain:W,defaultDocroot:ae,legacyDocroot:ee,docroot:te,reset:()=>{I.value="",V.value="default",q.value=""},submit:async()=>{const{$gettext:ne}=(0,m.st)();W.value!==I.value&&(0,m.d$)().info({title:ne("Subdomain name punycoded"),content:ne("Subdomain name has been automatically converted to punycode format. Punycode is used to encode internationalized domain names (IDN) by converting Unicode characters to ASCII.")}),await(0,d.UZ)({domain:t.value,subdomain:W.value,public_html:te.value}),e("update")},validateSubdomain:D.Jj,validators:P,validationMessages:U}}}),z=L,f=o("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),g=(0,f.Z)(z,l,r,!1,null,null,null),_=g.exports,R=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("ui-dialog",{attrs:{id:"CHANGE_DOCROOT_DIALOG"},on:{"dialog:open":s.resetDocroot},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Change Document Root"))}})]},proxy:!0},{key:"content",fn:function(){return[t("ui-form-element",{attrs:{vertical:"",group:"change-docroot",validators:{required:!0,...s.validators}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Document Root"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:s.docrootPath,callback:function(I){s.docrootPath=I},expression:"docrootPath"}})]},proxy:!0},{key:"error:domainsPart",fn:function(){return[t("span",{domProps:{textContent:e._s(s.validationMessages.domainsPart)}})]},proxy:!0},{key:"error:endingPart",fn:function(){return[t("span",{domProps:{textContent:e._s(s.validationMessages.endingPart)}})]},proxy:!0},{key:"error:forbiddenParts",fn:function(){return[t("span",{domProps:{textContent:e._s(s.validationMessages.forbiddenParts)}})]},proxy:!0},{key:"error:exists",fn:function(){return[t("span",{domProps:{textContent:e._s(s.validationMessages.exists)}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe","validate-group":"change-docroot"},on:{click:s.saveDocroot}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])})},T=[],Z=(0,p.defineComponent)({__name:"change-docroot-dialog",props:{subdomain:null,docroot:null},emits:["docroot-changed"],setup(M,{emit:e}){const t=M,s=(0,p.ref)(t.docroot.public_html);return{__sfc:!0,props:t,emit:e,docrootPath:s,saveDocroot:()=>{(0,d.mz)({subdomain:t.subdomain,public_html:s.value}),e("docroot-changed")},resetDocroot:()=>{s.value=t.docroot.public_html},validators:P,validationMessages:U}}}),y=Z,$=(0,f.Z)(y,R,T,!1,null,null,null),A=$.exports,w=function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("ui-dialog",{attrs:{id:"CHANGE_PHP_DIALOG"},on:{"dialog:open":s.resetPhp},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Change PHP Version"))}})]},proxy:!0},{key:"content",fn:function(){return[t("ui-form-element",{attrs:{vertical:"",group:"change-php",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("PHP Version"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:e.docroot.php_labels},model:{value:s.phpVersion,callback:function(I){s.phpVersion=I},expression:"phpVersion"}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe","validate-group":"change-php"},on:{click:s.savePhp}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])})},G=[],B=(0,p.defineComponent)({__name:"change-php-dialog",props:{subdomain:null,docroot:null},emits:["php-changed"],setup(M,{emit:e}){const t=M,s=(0,p.ref)(t.docroot.php1_select);return{__sfc:!0,props:t,emit:e,phpVersion:s,savePhp:async()=>{await(0,d.AL)({subdomain:t.subdomain,php1_select:s.value}),e("php-changed")},resetPhp:()=>{s.value=t.docroot.php1_select}}}}),K=B,O=(0,f.Z)(K,w,G,!1,null,null,null),k=O.exports;const X=(0,m.Rh)("CHANGE_DOCROOT_DIALOG"),Y=(0,m.Rh)("ADD_SUBDOMAIN_DIALOG"),J=(0,m.Rh)("CHANGE_PHP_DIALOG");var Q={name:"SubdomainsIndex",preload:d.DG,commands:{getSubdomains:d.DG,validateSubdomain:D.Jj},components:{AddSubdomainDialog:_,ChangeDocrootDialog:A,ChangePhpDialog:k},api:[{command:d.DG,bind:"subdomains"}],data(){return{removeDir:!1,select:[],selectedSubdomain:{subdomain:"",docroot:{public_html:"",php1_select:"",php_labels:{}}}}},computed:{awstats(){return this.$api.subdomains.awstats},webalizer(){return this.$api.subdomains.webalizer},rowsCount(){return this.$api.subdomains.rowsCount},docrootOverrideEnabled(){return this.$api.subdomains.docroot},subdomainUsage(){return{usage:this.rowsCount,limit:this.$_session.usage.subdomains.limit}}},watch:{$domain:"resetData"},created(){this.addSubdomainDialog=Y},methods:{humanReadableSize:E.eB,getSubdomains:d.DG,async deleteSubdomains(){await(0,d.HB)({select:this.select,contents:this.removeDir}),this.resetData()},resetData(){this.getSubdomains(),this.select=[],this.removeDir=!1},async changeDocroot(M,e){this.selectedSubdomain={subdomain:M,docroot:e},await(0,p.nextTick)(),X.open()},async changePhp(M,e){this.selectedSubdomain={subdomain:M,docroot:e},await(0,p.nextTick)(),J.open()}}},H=Q,re=o("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/subdomains/index.vue?vue&type=style&index=0&id=d5cabeb4&prod&lang=scss&scoped=true&"),oe=(0,f.Z)(H,n,u,!1,null,"d5cabeb4",null),se=oe.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/subdomains/index.vue?vue&type=style&index=0&id=d5cabeb4&prod&lang=scss&scoped=true&":function(j,b,o){var n=o("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/subdomains/index.vue?vue&type=style&index=0&id=d5cabeb4&prod&lang=scss&scoped=true&");n.__esModule&&(n=n.default),typeof n=="string"&&(n=[[j.id,n,""]]),n.locals&&(j.exports=n.locals);var u=o("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,d=u("5835e0e0",n,!0,{})}}]);
