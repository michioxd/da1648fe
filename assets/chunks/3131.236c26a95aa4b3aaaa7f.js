"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3131],{"./js/api/commands/reseller/ip-config.js":function(T,m,s){s.d(m,{BN:function(){return c},gd:function(){return o},iE:function(){return _}});var e=s("./js/api/command/index.js");const u="/CMD_IP_CONFIG",_=e.Z.get({id:"IP_CONFIG",url:u,response:{},after:r=>r.flow(i=>({ips:i.data,hideUsersCount:i.hide_ip_user_numbers==="1",haveShared:i.have_shared==="1"||!0,select:i.ip_list||{}}),r.mapProp("ips",r.flow(r.mapValues((i,p)=>({ip:p,...i})),Object.values,r.mapArrayProps({linked_ips:i=>Object.values(r.mapValues(i,(p,I)=>({ip:I,apache:r.convert.toAppBoolean(p.apache),dns:r.convert.toAppBoolean(p.dns)}))),value:i=>r.convert.toAppNumber(i)||i}))),r.mapProp("select",r.toSelect))}),c=e.Z.select({url:u,params:{share:!0}}),o=e.Z.select({url:u,params:{free:"Free Selected"}})},"./js/api/commands/reseller/users/actions.js":function(T,m,s){s.d(m,{Ak:function(){return f},DU:function(){return E},De:function(){return t},GR:function(){return r},HO:function(){return l},JF:function(){return n},Pi:function(){return R},QP:function(){return x},Ss:function(){return c},Vt:function(){return o},YY:function(){return g},a0:function(){return N},dG:function(){return v},f1:function(){return _},it:function(){return O},mX:function(){return a},r4:function(){return p},sv:function(){return i},tH:function(){return S},vk:function(){return I}});var e=s("./js/api/command/index.js");const u=e.Z.post({url:"/CMD_SELECT_USERS",notifySuccess:!0,notifyError:!0,params:{location:"CMD_USER_SHOW"},schema:{select:e.Z.ROWS},blocking:!0}),_=u.extend({params:{dosuspend:!0},schema:{reason:e.Z.REQUIRED_STRING}}),c=u.extend({params:{dounsuspend:!0}}),o=u.extend({params:{delete:!0,confirmed:!0},schema:{leave_dns:e.Z.OPTIONAL_BOOL}}),r=u.extend({params:{dopackage:!0},schema:{package:e.Z.OPTIONAL_STRING}}),i=u.extend({params:{doip:!0},schema:{ip:e.Z.OPTIONAL_STRING}}),p=e.Z.post({url:"/CMD_ACCOUNT_USER",params:{add:!0,action:"create"},schema:{username:e.Z.REQUIRED_STRING,email:e.Z.REQUIRED_STRING,passwd:e.Z.REQUIRED_STRING,passwd2:e.Z.REQUIRED_STRING,domain:e.Z.REQUIRED_STRING,package:e.Z.OPTIONAL_STRING,ip:e.Z.REQUIRED_STRING,notify:e.Z.REQUIRED_BOOL}}),I=e.Z.post({url:"/CMD_COMMENTS",params:{location:"CMD_USER_SHOW"},schema:{user:e.Z.REQUIRED_STRING,comments:e.Z.REQUIRED_STRING}}),R=e.Z.post({url:"/CMD_RESEND_EMAIL",schema:{user:e.Z.REQUIRED_STRING,email:e.Z.REQUIRED_STRING,newpass:e.Z.REQUIRED_BOOL}}),g=e.Z.post({url:"/CMD_MODIFY_USER",params:{additional_bw:!0,action:"single",json:null},schema:{user:e.Z.REQUIRED_STRING,additional_bandwidth:e.Z.REQUIRED_STRING}}),d=e.Z.post({url:"/CMD_MODIFY_USER",params:{json:!0,action:"single"},schema:{user:e.Z.REQUIRED_STRING}}),f=d.extend({params:{skin:!0},schema:{skinvalue:e.Z.REQUIRED_STRING}}),E=d.extend({params:{language:!0},schema:{lvalue:e.Z.REQUIRED_STRING}}),O=d.extend({params:{email:!0},schema:{evalue:e.Z.REQUIRED_STRING}}),v=d.extend({params:{name:!0},schema:{nvalue:e.Z.REQUIRED_STRING}}),N=d.extend({params:{ns:!0},schema:{ns1:e.Z.REQUIRED_STRING,ns2:e.Z.REQUIRED_STRING}}),S=d.extend({params:{max_per_email_send_limit:!0},schema:{max_per_email_send_limit_value:e.Z.REQUIRED_STRING}}),x=e.Z.post({url:"/CMD_MODIFY_USER",params:{action:"package"},schema:{user:e.Z.REQUIRED_STRING,package:e.Z.REQUIRED_STRING}}),l=e.Z.post({url:"/CMD_MODIFY_USER",params:{action:"ip"},schema:{user:e.Z.REQUIRED_STRING,ip:e.Z.REQUIRED_STRING}}),t=e.Z.post({url:"/CMD_MODIFY_USER",params:{action:"multi_ip"},schema:{user:e.Z.REQUIRED_STRING,extra_ip:e.Z.REQUIRED_STRING}}),a=e.Z.select({url:"/CMD_MODIFY_USER",params:{action:"multi_ip_delete",delete:!0},schema:{user:e.Z.REQUIRED_STRING,removedns:e.Z.REQUIRED_BOOL}}),n=e.Z.post({url:"/CMD_MODIFY_USER",params:{action:"customize",bytes:!0},body:{user:e.Z.REQUIRED_STRING,bandwidth:e.Z.OPTIONAL_STRING,ubandwidth:e.Z.OPTIONAL_BOOL,quota:e.Z.OPTIONAL_STRING,uquota:e.Z.OPTIONAL_BOOL,inode:e.Z.OPTIONAL_STRING,uinode:e.Z.OPTIONAL_BOOL,vdomains:e.Z.OPTIONAL_STRING,uvdomains:e.Z.OPTIONAL_BOOL,nsubdomains:e.Z.OPTIONAL_STRING,unsubdomains:e.Z.OPTIONAL_BOOL,nemails:e.Z.OPTIONAL_STRING,unemails:e.Z.OPTIONAL_BOOL,nemailf:e.Z.OPTIONAL_STRING,unemailf:e.Z.OPTIONAL_BOOL,nemailml:e.Z.OPTIONAL_STRING,unemailml:e.Z.OPTIONAL_BOOL,nemailr:e.Z.OPTIONAL_STRING,unemailr:e.Z.OPTIONAL_BOOL,mysql:e.Z.OPTIONAL_STRING,umysql:e.Z.OPTIONAL_BOOL,domainptr:e.Z.OPTIONAL_STRING,udomainptr:e.Z.OPTIONAL_BOOL,ftp:e.Z.OPTIONAL_STRING,uftp:e.Z.OPTIONAL_BOOL,aftp:e.Z.OPTIONAL_STRING,cgi:e.Z.OPTIONAL_STRING,git:e.Z.OPTIONAL_STRING,php:e.Z.OPTIONAL_STRING,spam:e.Z.OPTIONAL_STRING,catchall:e.Z.OPTIONAL_STRING,ssl:e.Z.OPTIONAL_STRING,ssh:e.Z.OPTIONAL_STRING,cron:e.Z.OPTIONAL_STRING,sysinfo:e.Z.OPTIONAL_STRING,login_keys:e.Z.OPTIONAL_STRING,dnscontrol:e.Z.OPTIONAL_STRING,suspend_at_limit:e.Z.OPTIONAL_STRING,skin:e.Z.OPTIONAL_STRING,ns1:e.Z.REQUIRED_STRING,ns2:e.Z.REQUIRED_STRING}})},"./js/api/commands/reseller/users/message.js":function(T,m,s){s.d(m,{FC:function(){return _},TB:function(){return o},o6:function(){return c}});var e=s("./js/api/command/index.js");const u="/CMD_EDIT_USER_MESSAGE",_=e.Z.get({id:"USER_MESSAGE",url:u,after:r=>r.mapProp("message",r.convert.toAppText)}),c=e.Z.post({url:u,params:{save:!0},schema:{subject:e.Z.REQUIRED_STRING,message:e.Z.REQUIRED_STRING}}),o=e.Z.post({url:u,params:{reset:!0}})},"./js/api/commands/validation/index.js":function(T,m,s){s.d(m,{i9:function(){return E},ty:function(){return d},l7:function(){return R},OE:function(){return f},ub:function(){return S},oH:function(){return i},U5:function(){return p},k_:function(){return r},PR:function(){return g},uo:function(){return N},Jj:function(){return v},rV:function(){return O}});var e=s("./js/api/command/index.js"),u=s("../node_modules/punycode/punycode.es6.js"),_=s("./js/api/commands/converters/index.ts"),c={isValid(l){return typeof l.error=="undefined"},getMessage(l){return(0,_.S8)(l.error||"")}};const o=e.Z.get({url:"/CMD_JSON_VALIDATE",schema:{value:e.Z.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:c.isValid,message:c.getMessage}}),r=o.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}}),i=o.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}}),p=o.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0}),I=o.extend({params:{type:"dns"},domain:!0,schema:{record:e.Z.REQUIRED_STRING}}),R=I.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:e.Z.REQUIRED_STRING}}),g=R.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:({value:l})=>({value:"10",mx_value:l})}),d=I.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:e.Z.REQUIRED_STRING,value:null}}),f=o.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}}),E=o.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}}),O=o.extend({id:"VALIDATE_USERNAME",params:{type:"username"}}),v=o.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}}),N=o.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}}),S=o.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:({value:l})=>({value:u.ZP.toASCII(l)})}),x=o.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}})},"./js/pages/reseller/users/create.vue":function(T,m,s){s.r(m),s.d(m,{default:function(){return x}});var e=function(){var t=this,a=t._self._c;return a("app-page",{attrs:{id:"create-user",actions:[{name:"reseller/edit-user-message",icon:"edit-user-message",label:t.$gettext("Edit User Message"),visible:t.packages.length>0,theme:"safe"},{name:"reseller/create-user-package",icon:"#plus-fill",label:t.$gettext("Create User Package"),visible:t.packages.length===0,theme:"safe"}]},scopedSlots:t._u([{key:"default",fn:function(){return[t.packages.length?a("app-page-section",[a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,api:t.$commands.validateUsername}},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("Username"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{model:{value:t.username,callback:function(n){t.username=n},expression:"username"}})]},proxy:!0}],null,!1,3173921427)}),t._v(" "),a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,email:!0}},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("E-mail"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{model:{value:t.email,callback:function(n){t.email=n},expression:"email"}})]},proxy:!0},{key:"error:email",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("Should be valid email address"))}})]},proxy:!0}],null,!1,357487308)}),t._v(" "),a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,api:t.$commands.validatePassword}},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("Password"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-password",{attrs:{"show-generator":""},model:{value:t.passwd,callback:function(n){t.passwd=n},expression:"passwd"}})]},proxy:!0}],null,!1,4155682395)}),t._v(" "),a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0,domain:!0,api:t.$commands.validateDomain}},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("Domain"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{model:{value:t.domain,callback:function(n){t.domain=n},expression:"domain"}})]},proxy:!0},{key:"error:domain",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("Should be valid domain name"))}})]},proxy:!0}],null,!1,2580602096)}),t._v(" "),t.customize?a("user-package",{attrs:{package:t.packageName},on:{update:function(n){t.packageData=n}}}):a("ui-form-element",{attrs:{group:"createUser",validators:{required:!0}},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("User Package"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-select",{attrs:{options:t.packages},scopedSlots:t._u([{key:"additions:right",fn:function(){return[a("ui-button",{on:{click:function(n){t.customize=!0}}},[a("span",{domProps:{textContent:t._s(t.$gettext("Customize"))}})])]},proxy:!0}],null,!1,3538324191),model:{value:t.packageName,callback:function(n){t.packageName=n},expression:"packageName"}})]},proxy:!0}],null,!1,1659149456)}),t._v(" "),a("ui-form-element",{scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("IP"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-select",{attrs:{options:t.ips},model:{value:t.ip,callback:function(n){t.ip=n},expression:"ip"}})]},proxy:!0}],null,!1,496530166)}),t._v(" "),a("ui-form-element",{scopedSlots:t._u([{key:"title",fn:function(){return[a("span")]},proxy:!0},{key:"content",fn:function(){return[a("div",[a("input-checkbox",{model:{value:t.notify,callback:function(n){t.notify=n},expression:"notify"}},[a("span",{domProps:{textContent:t._s(t.$gettext("Send E-mail Notification"))}})])],1)]},proxy:!0}],null,!1,3336971364)})],1):a("app-page-section",[a("p",{domProps:{textContent:t._s(t.$gettext("Sorry, it seems that there are no user packages created yet. Would you like to create one?"))}})]),t._v(" "),a("change-user-message-dialog")]},proxy:!0},{key:"footer:buttons",fn:function(){return[t.packages.length?a("ui-button",{attrs:{"validate-group":"createUser",theme:"primary"},on:{click:t.create}},[a("span",{domProps:{textContent:t._s(t.$gettext("Submit"))}})]):t._e()]},proxy:!0},{key:"disabled-message",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("You have reached your license limits and could not create users anymore"))}})]},proxy:!0}])})},u=[],_=s("./js/api/commands/reseller/users/actions.js"),c=s("./js/api/commands/reseller/users/message.js"),o=s("./js/api/commands/reseller/users/packages/index.js"),r=s("./js/api/commands/reseller/ip-config.js"),i=s("./js/api/commands/validation/index.js"),p=s("./js/components/local/user-package.vue"),I=function(){var t=this,a=t._self._c;return a("ui-dialog",{attrs:{id:"CHANGE_USER_MESSAGE_DIALOG",size:"normal","no-auto-close":"","no-close-btn":"",title:t.$gettext("Edit User Message")},on:{"dialog:open":t.loadUserMessage},scopedSlots:t._u([{key:"content",fn:function(){return[a("ui-form-element",{attrs:{group:"message",validators:{required:!0},vertical:""},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("Subject"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{model:{value:t.subject,callback:function(n){t.subject=n},expression:"subject"}})]},proxy:!0}])}),t._v(" "),a("ui-form-element",{attrs:{group:"message",validators:{required:!0},vertical:""},scopedSlots:t._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:t._s(t.$gettext("Message"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-textarea",{model:{value:t.message,callback:function(n){t.message=n},expression:"message"}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[a("ui-button",{attrs:{theme:"safe","validate-group":"message"},on:{click:t.saveUserMessage}},[a("span",{domProps:{textContent:t._s(t.$gettext("Save"))}})]),t._v(" "),a("ui-button",{attrs:{theme:"danger"},on:{click:t.resetMessage}},[a("span",{domProps:{textContent:t._s(t.$gettext("Reset"))}})])]},proxy:!0}])})},R=[],g={api:[{command:c.FC,bind:"message"}],data:()=>({subject:"",message:""}),methods:{loadUserMessage(){Object.assign(this,this.$api.message)},saveUserMessage(){c.o6({subject:this.subject,message:this.message})},async resetMessage(){await c.TB(),Object.assign(this,await c.FC())}}},d=g,f=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),E=(0,f.Z)(d,I,R,!1,null,null,null),O=E.exports,v={preload:[()=>(0,o.EV)({ipp:9999}),r.iE],api:[{command:o.EV,bind:"packages"},{command:r.iE,bind:"config"}],commands:{validatePassword:i.uo,validateUsername:i.rV,validateDomain:i.ub},components:{UserPackage:p.Z,ChangeUserMessageDialog:O},data(){return{username:"",email:"",passwd:"",domain:"",packageName:"",ip:"",notify:!0,customize:!1,packageData:{}}},computed:{packages(){return this.$api.packages.rows.map(l=>l.package)},ips(){return this.$api.config.select.options},requestData(){return{username:this.username,email:this.$p6e.email2ascii(this.email),passwd:this.passwd,passwd2:this.passwd,domain:this.$p6e.toA(this.domain),ip:this.ip,notify:this.notify,package:this.customize?null:this.packageName,...this.packageData}}},created(){this.ip=this.$api.config.select.value,this.packages.length&&([this.packageName]=this.packages)},methods:{async editUserMessage(){await(0,c.FC)(),this.$dialog("CHANGE_USER_MESSAGE_DIALOG").open()},async create(){await(0,_.r4)(this.requestData)&&this.$router.push({name:"reseller/users"})}}},N=v,S=(0,f.Z)(N,e,u,!1,null,null,null),x=S.exports}}]);
