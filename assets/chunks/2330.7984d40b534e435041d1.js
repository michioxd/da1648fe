(self.webpackChunk=self.webpackChunk||[]).push([[2330],{"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&":function(){},"./js/composables/dateFilter.ts":function(E,h,s){"use strict";s.d(h,{W:function(){return g},f:function(){return f.f}});var d=s("../node_modules/ramda/es/index.js"),_=s("../node_modules/date-fns/esm/format/index.js"),f=s("./js/modules/date-formats.ts"),c=s("./js/modules/customizations/date-formats/default.ts");const g=d.WAo((m,y)=>{if(y)try{return(0,_.Z)(y,f.f.value[m])}catch(p){return console.warn(`Given ${m} format is incorrect:
${p.message}`),(0,_.Z)(y,c.d[m])}return""})},"./js/composables/filters.ts":function(E,h,s){"use strict";s.d(h,{Q0:function(){return P},aS:function(){return u},d5:function(){return r},eB:function(){return b},hT:function(){return x},kC:function(){return p},n9:function(){return M},zM:function(){return l}});var d=s("../node_modules/date-fns/esm/formatDistance/index.js"),_=s("../node_modules/punycode/punycode.es6.js"),f=s("./js/composables/dateFilter.ts"),c=s("./js/composables/gettext.ts");const{$gettext:g,$ngettext:m,$gettextInterpolate:y}=(0,c.Z)(),p=a=>{var i;return a?((i=a.at(0))===null||i===void 0?void 0:i.toUpperCase())+a.slice(1):""},x=(a,i="datetime")=>(0,f.W)(i,a),l=a=>(0,d.Z)(a,new Date),b=(a,i=1024)=>{const D=Number(a);if(!D)return"0 B";const S=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],k=Math.floor(Math.log(D)/Math.log(i));return`${parseFloat((D/i**k).toFixed(2))} ${S[k]}`},C=a=>{try{return(0,_.xX)(a)}catch(i){return a}},M=a=>(0,_.xX)(a),P=a=>{if(!a||!a.includes("@"))return a;const[i,D]=a.split("@");return[i,C(D)].join("@")},r=a=>{if(a<60)return g("less than a minute");const i=Math.floor(a/60)%60,D=Math.floor(a/3600)%24,S=Math.floor(a/(3600*24)),k=[S?m("%{days} day","%{days} days",S):null,D?m("%{hours} hour","%{hours} hours",D):null,i?m("%{minutes} minute","%{minutes} minutes",i):null].filter(Boolean).join(", ");return y(k,{days:S,hours:D,minutes:i})},u=(a,i)=>a.length<=i?a:`${a.substring(0,i)}...`,v=()=>({capitalize:p,date:x,distanceFromNow:l,humanReadableSize:b,p6eUnicode:M,p6eUnicodeEmail:P,formatUptime:r,truncateString:u})},"./js/openapi/email.ts":function(E,h,s){"use strict";s.d(h,{E:function(){return m},y:function(){return y}});var d=s("./js/api/openapi/index.ts"),_=s("../node_modules/runtypes/lib/index.js"),f=s.n(_),c=s("./js/openapi/web.types.ts");const g=(0,d.$d)(),m=d.an.Default(async(p,x)=>{const{data:l}=await g.get("/api/email-logs",Object.assign({},x||{},{params:p}));return l.status==="success"&&c.JH.guard(l.data)===!1?g.failure({type:"INVALID_RESPONSE",response:l.data}):l}),y=d.an.Default(async(p,x)=>{const{data:l}=await g.get("/api/email-logs-summary",Object.assign({},x||{},{params:p}));return l.status==="success"&&_.Array(c.ix).guard(l.data)===!1?g.failure({type:"INVALID_RESPONSE",response:l.data}):l})},"./js/components/local/inputs/input-date-range.vue":function(E,h,s){"use strict";s.d(h,{Z:function(){return P}});var d=function(){var u=this,v=u._self._c;return v("div",{staticClass:"date-range-picker"},[v("date-range-picker",u._b({attrs:{"single-date-picker":u.single,"time-picker":"","time-picker-24-hour":"","append-to-body":"","date-range":u.dateRange,ranges:u.predefinedRanges,"max-date":u.maxDate,"locale-data":u.localeData},on:{update:u.updateValues},scopedSlots:u._u([{key:"input",fn:function(a){return[v("input-text",{attrs:{readonly:"",value:a.rangeText}})]}},{key:"footer",fn:function(a){return[v("div",{staticClass:"datepicker-footer"},[v("span",{staticClass:"range-text",domProps:{textContent:u._s(a.rangeText)}}),u._v(" "),v("ui-button",{directives:[{name:"margin",rawName:"v-margin:right",value:1,expression:"1",arg:"right"}],attrs:{theme:"light",size:"normal"},on:{click:a.clickCancel}},[v("span",{domProps:{textContent:u._s(u.$gettext("Cancel"))}})]),u._v(" "),v("ui-button",{attrs:{theme:"primary",size:"normal"},on:{click:a.clickApply}},[v("span",{domProps:{textContent:u._s(u.$gettext("Apply"))}})])],1)]}}])},"date-range-picker",u.$attrs,!1))],1)},_=[],f=s("../node_modules/vue2-daterange-picker/dist/vue2-daterange-picker.umd.min.js"),c=s.n(f),g=s("./js/composables/dateFilter.ts"),m=s("../node_modules/date-fns/esm/subMinutes/index.js"),y=s("../node_modules/date-fns/esm/subHours/index.js"),p=s("../node_modules/date-fns/esm/subDays/index.js");c().computed.startText=function(){return this.start===null?"":(0,g.W)("date",this.start)},c().computed.endText=function(){return this.end===null?"":(0,g.W)("date",this.end)};var x={components:{DateRangePicker:c()},model:{prop:"range",event:"update:range"},props:{range:{type:Object,required:!0},single:{type:Boolean,required:!1,default:!1}},computed:{maxDate(){return new Date},dateRange(){return{startDate:this.range.start,endDate:this.range.end}},localeData(){return{firstDay:g.f.value.weekStart==="monday"?1:0,applyLabel:this.$gettext("Apply"),cancelLabel:this.$gettext("Cancel"),daysOfWeek:[this.$gettext("Sun"),this.$gettext("Mon"),this.$gettext("Tue"),this.$gettext("Wed"),this.$gettext("Thu"),this.$gettext("Fri"),this.$gettext("Sat")],monthNames:[this.$gettext("Jan"),this.$gettext("Feb"),this.$gettext("Mar"),this.$gettext("Apr"),this.$gettext("May"),this.$gettext("Jun"),this.$gettext("Jul"),this.$gettext("Aug"),this.$gettext("Sep"),this.$gettext("Oct"),this.$gettext("Nov"),this.$gettext("Dec")]}},predefinedRanges(){if(this.single)return!1;const r=new Date;return{[this.$gettext("10 minutes")]:[(0,m.Z)(r,10),r],[this.$gettext("30 minutes")]:[r,(0,m.Z)(r,30),r],[this.$gettext("1 hour")]:[(0,y.Z)(r,1),r],[this.$gettext("4 hour")]:[(0,y.Z)(r,4),r],[this.$gettext("1 day")]:[(0,p.Z)(r,1),r],[this.$gettext("3 days")]:[(0,p.Z)(r,3),r],[this.$gettext("7 days")]:[(0,p.Z)(r,7),r]}}},methods:{updateValues(r){this.$emit("update:range",{start:r.startDate,end:r.endDate})}}},l=x,b=s("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&"),C=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),M=(0,C.Z)(l,d,_,!1,null,null,null),P=M.exports},"./js/pages/admin/email-summary/index.vue":function(E,h,s){"use strict";s.r(h),s.d(h,{default:function(){return I}});var d=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("app-page",{scopedSlots:e._u([{key:"default",fn:function(){return[t("app-page-section",{on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:o.request.apply(null,arguments)}},scopedSlots:e._u([{key:"footer:buttons",fn:function(){return[t("ui-button",{attrs:{theme:"primary"},on:{click:function(n){return n.preventDefault(),o.search.apply(null,arguments)}}},[t("span",{domProps:{textContent:e._s(o.$gettext("Search"))}})])]},proxy:!0}])},[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(o.$gettext("Range"))}})]},proxy:!0},{key:"content",fn:function(){return[t(o.DateRangePicker,{attrs:{range:o.query.range},on:{"update:range":o.updateRange,keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:o.request.apply(null,arguments)}}})]},proxy:!0}])})],1),e._v(" "),t("app-page-section",[t("ui-table",{attrs:{items:o.emailLogsSummaries}},[t("ui-column",{attrs:{id:"domain",label:o.$gettext("Domain")},scopedSlots:e._u([{key:"default",fn:function(n){return[t("ui-link",{attrs:{name:"user/email/email-tracking",params:{domain:n.domain}}},[e._v(`
                            `+e._s(n.domain)+`
                        `)])]}}])}),e._v(" "),t("ui-column",{attrs:{id:"mailbox",label:o.$gettext("Mailbox")},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(`
                        `+e._s(n.mailbox)+`
                    `)]}}])}),e._v(" "),t("ui-column",{attrs:{id:"owner",label:o.$gettext("Owner")},scopedSlots:e._u([{key:"default",fn:function(n){return[n.owner!=="-unknown-"?t("ui-link",{attrs:{name:"reseller/users/view",params:{user:n.owner}}},[e._v(`
                            `+e._s(n.owner)+`
                        `)]):t("span",{domProps:{textContent:e._s(n.owner)}})]}}])}),e._v(" "),t("ui-column",{attrs:{id:"delivered",label:o.$gettext("Delivered")},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(`
                        `+e._s(n.delivered.count)+`
                    `)]}}])}),e._v(" "),t("ui-column",{attrs:{id:"failed",label:o.$gettext("Failed")},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(`
                        `+e._s(n.failed.count)+`
                    `)]}}])}),e._v(" "),t("ui-column",{attrs:{id:"deferred",label:o.$gettext("Deferred")},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(`
                        `+e._s(n.deferred.count)+`
                    `)]}}])}),e._v(" "),t("ui-column",{attrs:{id:"unknown",label:o.$gettext("Unknown")},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(`
                        `+e._s(n.unknown.count)+`
                    `)]}}])}),e._v(" "),t("ui-column",{attrs:{id:"size",label:o.$gettext("Size")},scopedSlots:e._u([{key:"default",fn:function(n){return[t("span",{staticClass:"wrap:nowrap"},[e._v(`
                            `+e._s(o.humanReadableSize(o.sumByParameter(n,"bytes")))+`
                        `)])]}}])}),e._v(" "),t("ui-column",{attrs:{id:"amount",label:o.$gettext("Amount")},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v(`
                        `+e._s(o.sumByParameter(n,"count"))+`
                    `)]}}])}),e._v(" "),t("ui-column",{attrs:{id:"actions",label:o.$gettext("Actions")},scopedSlots:e._u([{key:"default",fn:function(n){return[t("ui-link",{attrs:{title:o.$gettext("Show Info")},on:{click:function($){return o.showRawInfo(n)}}},[t("ui-icon",{attrs:{id:"circle-info",theme:"safe"}})],1)]}}])})],1),e._v(" "),t(o.DetailsDialog,{attrs:{item:o.currentDomain}})],1)]},proxy:!0}])})},_=[],f=s("../node_modules/vue/dist/vue.common.prod.js"),c=s("./js/composables/index.ts"),g=s("./js/openapi/email.ts"),m=s("./js/openapi/formats.types.ts");const y=(0,c.d$)(),{$gettext:p}=(0,c.st)(),x=async R=>{const{data:e,error:t}=await(0,g.y)({from:(0,m.j)(R.range.start),to:R.range.end?(0,m.j)(R.range.end):void 0});return t&&t.type==="BAD_REQUEST"&&y.error({title:p("Bad Request"),content:t.message}),{response:e,error:t}};var l=s("../node_modules/date-fns/esm/subDays/index.js"),b=s("./js/components/local/inputs/input-date-range.vue"),C=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("ui-dialog",{attrs:{id:"EMAIL_SUMMARY_DETAILS_DIALOG",title:o.$gettext("Details")},scopedSlots:e._u([{key:"content",fn:function(){return[t("table",e._l(o.props.item,function(n,$){return t("tr",{key:$},[t("td",{domProps:{textContent:e._s(`${$}:`)}}),e._v(" "),t("td",[o.hasCount($)?t("ui-tooltip",{scopedSlots:e._u([{key:"trigger",fn:function(){return[t("span",[e._v(`
                                `+e._s(n.count)+` /
                                `+e._s(o.humanReadableSize(n.bytes))+`
                            `)])]},proxy:!0}],null,!0)},[e._v(" "),t("span",{domProps:{textContent:e._s(o.$gettext("Amount / Size"))}})]):$==="bytes"?[e._v(`
                        `+e._s(o.humanReadableSize(n))+`
                    `)]:t("span",{domProps:{textContent:e._s(n)}})],2)])}),0)]},proxy:!0}])})},M=[],P=s("./js/composables/filters.ts"),r=(0,f.defineComponent)({__name:"details-dialog",props:{item:null},setup(R){const e=R,{$gettext:t}=(0,c.st)();function o(n){return["unknown","deferred","failed","delivered"].includes(n)}return{__sfc:!0,$gettext:t,props:e,hasCount:o,humanReadableSize:P.eB}}}),u=r,v=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),a=(0,v.Z)(u,C,M,!1,null,null,null),i=a.exports,D=s("../node_modules/ramda/es/index.js");const S=(0,f.ref)([]),k={name:"EmailLogsSummariesIndex",async beforeRouteEnter(R,e,t){const{response:o,error:n}=await x({range:{start:(0,l.Z)(new Date,1),end:new Date}});return n?t(!1):(o&&(S.value=o),t())}};var A=(0,f.defineComponent)({...k,setup(R){const e=(j,O)=>D.Smz([j.deferred[O],j.delivered[O],j.failed[O],j.unknown[O]]),t=(0,c.Rh)("EMAIL_SUMMARY_DETAILS_DIALOG"),{$gettext:o}=(0,c.st)(),n=(0,f.reactive)({range:{start:(0,l.Z)(new Date,1),end:new Date}}),$=(0,f.ref)({});function T(j){n.range.start=j.start,n.range.end=j.end}function z(j){$.value=j,t.open()}async function U(){const{response:j}=await x(n);j&&(S.value=j)}return{__sfc:!0,emailLogsSummaries:S,sumByParameter:e,emailSummaryDetailsDialog:t,$gettext:o,query:n,currentDomain:$,updateRange:T,showRawInfo:z,search:U,request:x,DateRangePicker:b.Z,DetailsDialog:i,humanReadableSize:P.eB}}}),B=A,L=(0,v.Z)(B,d,_,!1,null,null,null),I=L.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&":function(E,h,s){var d=s("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&");d.__esModule&&(d=d.default),typeof d=="string"&&(d=[[E.id,d,""]]),d.locals&&(E.exports=d.locals);var _=s("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,f=_("33f26770",d,!0,{})}}]);
