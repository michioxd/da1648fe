(self.webpackChunk=self.webpackChunk||[]).push([[3693,8952],{"./js/api/commands/reseller/backup.js":function(_,d,r){"use strict";r.d(d,{Fi:function(){return e},Gw:function(){return S},Q0:function(){return k},VP:function(){return v},dO:function(){return y},dh:function(){return m},fz:function(){return g},hd:function(){return f},ld:function(){return c},o7:function(){return o},pZ:function(){return j},pi:function(){return s},v6:function(){return l}});var t=r("./js/api/command/index.js");const i="/CMD_USER_BACKUP",c=t.Z.get({id:"USER_BACKUPS",url:i,after:n=>n.flow(u=>({rows:u.crons,location:u.files_location}),n.processTableInfo("rows"),n.mapProps({rows:n.flow(n.toArray,n.mapArrayProps({where:n.flow(n.moveProp("encryption_password","encrypted"),n.mapProps({encrypted:n.flow(n.setDefault("0"),n.isEqual("1")),path:u=>u.replace("<span class='green_lock'>&#128274;</span>","").trim()}))}))}))}),a=t.Z.get({id:"HAS_USER_BACKUPS",url:i,response:!1,mapResponse:n=>n.crons.length!==0}),l=t.Z.get({id:"BACKUP_ENCRYPTION_STATUS",url:i,after:n=>n.flow(n.project({enabled:"settings.allow_backup_encryption",password:"settings.encryption_password"}),n.mapProp("enabled",n.convert.toAppBoolean))}),f=t.Z.select({url:i,params:{duplicate:!0}}),m=t.Z.select({url:i,params:{delete:!0}}),v=t.Z.post({url:i,params:{action:"setting"},schema:{message:t.Z.REQUIRED_BOOL,local_ns:t.Z.REQUIRED_BOOL,restore_spf:t.Z.REQUIRED_BOOL}}),S=t.Z.get({id:"USER_BACKUP_SETTINGS",url:i,after:n=>n.flow(n.project({local_ns:"settings.local_ns",message:"settings.message",restore_spf:"settings.restore_spf"}),n.mapValues(n.convert.toAppBoolean))}),y=t.Z.get({id:"USER_BACKUP_SCHEDULE_OPTIONS",url:i,after:n=>n.flow(n.project({settings:"settings","settings.append":"append_to_path",where:"where",users:"users",location:"files_location"}),n.mapProps({users:n.flow(n.deleteProp("info"),n.toArray,n.mapArray(n.getProp("user"))),settings:n.flow(n.project({ip:"ftp_ip",password:"ftp_password",path:"ftp_path",port:"ftp_port",secure:"ftp_secure",username:"ftp_username",append:"append"}),n.mapProps({secure:n.convert.toAppBoolean,append:u=>{const p=Object.values(u),h=p.find(x=>x.selected),P=(x,w)=>({...x,[w.value]:w.text}),O=p.reduce(P,{});return{value:h.value,options:O}}}))}))}),j=t.Z.get({id:"USER_BACKUP_RESTORE_OPTIONS",url:i,after:n=>n.flow(n.project({settings:"settings",where:"where",location:"files_location",ips:"ip_list",files:"files"}),n.mapProps({files:n.flow(n.deleteProp("info"),n.toArray),settings:n.flow(n.getProps(["ftp_ip","ftp_password","ftp_path","ftp_port","ftp_secure","ftp_username"]),n.mapProps({ftp_secure:n.convert.toAppBoolean})),ips:u=>{const p=Object.values(u),h=p.find(x=>x.selected),P=(x,w)=>({...x,[w.value]:w.text}),O=p.reduce(P,{});return{value:h.value,options:O}}}))}),g=t.Z.post({url:i,params:{action:"create",form_version:"3"},schema:{who:t.Z.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:t.Z.OPTIONAL_BOOL,when:t.Z.REQUIRED_STRING,minute:t.Z.OPTIONAL_STRING,hour:t.Z.OPTIONAL_STRING,dayofmonth:t.Z.OPTIONAL_STRING,month:t.Z.OPTIONAL_STRING,dayofweek:t.Z.OPTIONAL_STRING,where:t.Z.REQUIRED_STRING,ftp_ip:t.Z.OPTIONAL_STRING,ftp_username:t.Z.OPTIONAL_STRING,ftp_password:t.Z.OPTIONAL_STRING,ftp_path:t.Z.OPTIONAL_STRING,ftp_port:t.Z.OPTIONAL_STRING,ftp_secure:t.Z.OPTIONAL_STRING,append_to_path:t.Z.OPTIONAL_STRING,custom_append:t.Z.OPTIONAL_STRING,encryption_password:t.Z.OPTIONAL_STRING}}),e=t.Z.get({url:i,id:"USER_BACKUP_RESTORE_FILES",params:{action:"update_files"},schema:{where:t.Z.REQUIRED_STRING,ftp_ip:t.Z.OPTIONAL_STRING,ftp_username:t.Z.OPTIONAL_STRING,ftp_password:t.Z.OPTIONAL_STRING,ftp_path:t.Z.OPTIONAL_STRING,ftp_port:t.Z.OPTIONAL_STRING,ftp_secure:t.Z.OPTIONAL_STRING},after:n=>n.flow(n.getProp("files"),n.deleteProp("info"),n.toArray)}),s=t.Z.post({url:i,params:{action:"restore"},schema:{where:t.Z.REQUIRED_STRING,ftp_ip:t.Z.OPTIONAL_STRING,ftp_username:t.Z.OPTIONAL_STRING,ftp_password:t.Z.OPTIONAL_STRING,ftp_path:t.Z.OPTIONAL_STRING,ftp_port:t.Z.OPTIONAL_STRING,ftp_secure:t.Z.OPTIONAL_STRING,ip_choice:t.Z.REQUIRED_STRING,ip:t.Z.OPTIONAL_STRING,select:{type:Array,required:!0},encryption_password:t.Z.OPTIONAL_STRING}}),o=t.Z.post({url:"/CMD_USER_BACKUP_MODIFY",id:"USER_BACKUP_CRON",schema:{id:t.Z.REQUIRED_STRING},notifySuccess:!1,notifyError:!0,after:n=>n.flow(n.moveProp({append_to_path:"append","settings.where":"where"}),n.mapProps({settings:n.mapProp("ftp_secure",n.convert.toAppBoolean),who:n.mapProps({skip_suspended:n.convert.toAppBoolean,users:n.flow(n.deleteProp("info"),n.toArray,n.mapArray(n.getProp("user"))),select:n.feedWith(1,n.flow(n.getProp("users"),n.deleteProp("info"),n.filter(n.flow(n.getProp("checkbox"),n.isEqual("checked"))),n.mapValues(n.getProp("user")),n.toArray))}),append:n.flow(n.mapProps({options:n.feedWith(1,n.transformObject(({value:u,text:p})=>({[u]:p}))),value:n.feedWith(1,n.flow(n.find(n.getProp("selected")),n.getProp("value")))}),n.getProps(["value","options"])),custom_append:n.feedWith(1,n.getProp("append.custom_append"))}))}),k=t.Z.post({url:i,params:{action:"modify",when:"cron",form_version:"3"},schema:{id:t.Z.REQUIRED_STRING,who:t.Z.REQUIRED_STRING,select:{type:Array,required:!1},skip_suspended:t.Z.OPTIONAL_BOOL,minute:t.Z.REQUIRED_STRING,hour:t.Z.REQUIRED_STRING,dayofmonth:t.Z.REQUIRED_STRING,month:t.Z.REQUIRED_STRING,dayofweek:t.Z.REQUIRED_STRING,where:t.Z.REQUIRED_STRING,ftp_ip:t.Z.OPTIONAL_STRING,ftp_username:t.Z.OPTIONAL_STRING,ftp_password:t.Z.OPTIONAL_STRING,ftp_path:t.Z.OPTIONAL_STRING,ftp_port:t.Z.OPTIONAL_STRING,ftp_secure:t.Z.OPTIONAL_STRING,append_to_path:t.Z.REQUIRED_STRING,custom_append:t.Z.OPTIONAL_STRING}})},"./js/vue-globals/mixins.js":function(_,d,r){"use strict";r.r(d),r.d(d,{$bindTab:function(){return n},$clickOutside:function(){return e},$resizeListener:function(){return k},$scrollListener:function(){return s}});var t=r("../node_modules/vue/dist/vue.common.prod.js"),i=r.n(t),c=r("../node_modules/ramda/es/index.js"),a=r("./js/modules/file.js"),l=r("./js/modules/utils/index.js"),f=r("./js/modules/constants.js"),m=r("./js/modules/utils/css.js"),v=r("../node_modules/punycode/punycode.es6.js"),S=r("./js/vue-globals/helpers.js"),y=r("./js/stores/index.ts");const j=r("./js/vue-globals/mixins sync recursive \\.js$");(0,a.s)(j,u=>i().mixin(u.module)),i().mixin({data:()=>({isMounted:!1}),mounted(){this.isMounted=!0}}),i().mixin({methods:{$dialog(u){return{open:()=>S.uY.emit("dialog:open",u),close:()=>S.uY.emit("dialog:close",u)}}}}),i().mixin({computed:{$domain(){return this.$_ctx.session.domain},$domainUnicode(){return v.ZP.toUnicode(this.$domain)}}}),i().mixin({beforeCreate(){const u=(0,y.oR)(PiniaStores.VALIDATION);this.$valid=u.isValid.bind(u)}}),i().mixin({created(){this.regexps=f.gk}}),i().mixin({computed:{$p6e(){const u=p=>h=>{try{return p(h)}catch(P){return h}};return{toA:u(v.ZP.toASCII),toU:u(v.ZP.toUnicode),email2ascii:p=>{if(!p||!p.includes("@"))return p;const[h,P]=p.split("@");return[h,v.ZP.toASCII(P)].join("@")},email2unicode:p=>{if(!p||!p.includes("@"))return p;const[h,P]=p.split("@");return[h,v.ZP.toUnicode(P)].join("@")}}}}}),i().mixin({computed:{$_layout:(0,S.YM)("skin/layout")}}),i().mixin({methods:{$_useStore(u){return(0,y.oR)(u)}}});const g=[];document.body.addEventListener("click",u=>{g.forEach(p=>p(u.target))}),window.addEventListener("touchmove",u=>{g.forEach(p=>p(u.target))});const e={methods:{$clickOutsideListener(u,p){const h=O=>c.zGw(c.Bxt(p),c.qhW(Array.isArray,x=>[x]),c.hXT(c.CyQ(c.kKJ)),c.YPD(x=>x===O||x.contains(O)))(),P=O=>{h(O)&&this.$emit(`clickOutside:${u}`)};g.push(P)}}},s={methods:{__getScroller(){return this.$_layout==="sidebar"?window.document.querySelector("main"):window},__emitScroll(){this.$emit("window:scroll",window.pageYOffset)}},mounted(){const u=this.__getScroller();u&&u.addEventListener("scroll",this.__emitScroll)},destroyed(){const u=this.__getScroller();u&&u.removeEventListener("scroll",this.__emitScroll)}},o=[];window.addEventListener("resize",()=>{o.forEach(u=>u())});const k={created(){this.$resizeListener=()=>{this.$emit("window:resize",window.innerWidth)},o.push(this.$resizeListener)},destroyed(){o.splice(o.indexOf(this.$resizeListener),1)}},n=({param:u="tab",defaultTab:p}={param:"tab"})=>({computed:{[u]:{get(){return this.$route.params[u]||p},set(h){this.$route.params[u]!==h&&this.$router.replace(l._.merge({},this.$route,{params:{[u]:h}}))}}}})},"./js/vue-globals/mixins/bindApi.js":function(_,d,r){"use strict";r.r(d);var t=r("../node_modules/ramda/es/index.js");const i=(c,a)=>t.ETc(c.split("."),a);d.default={beforeCreate(){this.$options.commands&&(this.$commands=this.$options.commands)},computed:{$api(){if(!this.$options.api)return[];const c=this.$options.api;return typeof c=="function"?c.data.response:t.u4g((l,{command:f,bind:m})=>{if(typeof m=="string")return{...l,[m]:f.data.response};const v=t.u4g((S,[y,j])=>{const g=y.includes(".")?i(y,f.data):f.data[y]||f.data.response[y];return{...S,[j]:g}},{},t.Zpf(m));return{...l,...v}},{},c)}}}},"./js/vue-globals/mixins/local/clickOutside.js":function(_,d,r){"use strict";r.r(d),r.d(d,{$clickOutside:function(){return a}});var t=r("../node_modules/ramda/es/index.js");const i=[];document.body.addEventListener("click",l=>{i.forEach(t.gH4(l))}),window.addEventListener("touchstart",l=>{i.forEach(t.gH4(l))});const c=(l,f)=>t.zGw(t.qhW(Array.isArray,m=>[m]),t.hXT(t.CyQ(t.kKJ)),t.YPD(m=>m===l||m.contains(l)))(f),a={methods:{$clickOutsideListener(l,f){const m=v=>{c(v.target,f)&&this.$emit(`clickOutside:${l}`)};i.push(m)}}}},"./js/vue-globals/mixins/local/inputValidation.js":function(_,d,r){"use strict";r.r(d),r.d(d,{$inputValidation:function(){return c}});var t=r("./js/vue-globals/helpers.js"),i=r("./js/stores/index.ts");const c={inject:{groupID:{default:null},inputID:{default:null},validators:{default:()=>({})}},props:{id:{type:String,required:!1,default(){return this.inputID}},group:{type:String,required:!1,default(){return this.groupID}},novalidate:{type:Boolean,required:!1,default(){return!Object.keys(this.validators).length}}},computed:{validationStore(){return(0,i.oR)(PiniaStores.VALIDATION)},valid(){return this.validationStore.isValid(this.group,this.id)},errorState(){return!this.novalidate&&this.isUpdated&&!this.valid},isUpdated(){var a;const l=(a=this.validationStore.groups[this.group])==null?void 0:a[this.id];return typeof l=="undefined"?!1:l.updated}},methods:{$validate(a){this.id&&!this.novalidate&&this.validationStore.validate(this.groupID,this.id,a,this.validators)}},created(){if(!this.novalidate){const{validate:a}=this.$options;a&&this.$watch(a,(0,t.Ds)(this.$validate,{trailing:!0,leading:!1,delay:200}),{immediate:!0})}},destroyed(){this.novalidate||this.validationStore.deleteInput(this.group,this.id)}}},"./js/vue-globals/mixins/notification.js":function(_,d,r){"use strict";r.r(d);var t=r("./js/composables/index.ts");d.default={created(){const i=new t.d$;this.$notifications=i}}},"./js/vue-globals/mixins/reloadApiTable.js":function(_,d,r){"use strict";r.r(d);var t=r("./js/modules/constants.js");const i=a=>a.$options&&a.$options.name==="UiApiTable",c=a=>{const l=[a];let f=a;for(;f=l.shift();){if(i(f))return f;f.$children.length&&l.push(...f.$children)}return!1};d.default={methods:{$reloadApiTable({reset:a=!0}={}){const l=c(this);if(!l){t.Vi.DEV&&console.warn("$reloadApiTable called without any ui-api-table child");return}l.reloadTable(),a&&Object.assign(this.$data,this.$options.data.apply(this))}}}},"./js/vue-globals/mixins/session.js":function(_,d,r){"use strict";r.r(d);var t=r("./js/context/index.ts");d.default={computed:{$_ctx(){return t.T},$_flags(){return t.T.session.features},$_session(){return t.T.session.allValues}},methods:{$_cmd(i){return t.T.session.allowedCommands.includes(i)}}}},"./js/vue-globals/mixins/staticData.js":function(_,d,r){"use strict";r.r(d),d.default={created(){this.$options.staticData&&Object.entries(this.$options.staticData).forEach(([t,i])=>{this[t]=typeof i=="function"?i.bind(this)():i})}}},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/reseller/backups/schedule.vue?vue&type=style&index=0&id=e0e58054&prod&lang=scss&":function(){},"./js/pages/reseller/backups/schedule.vue":function(_,d,r){"use strict";r.r(d),r.d(d,{default:function(){return j}});var t=function(){var e=this,s=e._self._c;return s("app-page",{attrs:{id:"schedule-reseller-backup"},scopedSlots:e._u([{key:"default",fn:function(){return[s("app-page-section",[s("ui-steps",{attrs:{steps:[{id:"who",label:e.$gettext("Step 1: Who"),desc:e.$gettext("Select users you would like to backup."),completed:e.validWho},{id:"when",label:e.$gettext("Step 2: When"),desc:e.$gettext("Select time period for backup."),completed:e.validWhen},{id:"where",label:e.$gettext("Step 3: Where"),desc:e.$gettext("Select directory for backups."),completed:e.validWhere}],current:e.step},on:{"update:current":function(o){e.step=o}},scopedSlots:e._u([{key:"step:who",fn:function(){return[s("div",{key:"who"},[s("ui-form-element",{attrs:{reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("All Users"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-radio",{attrs:{value:"all"},model:{value:e.who,callback:function(o){e.who=o},expression:"who"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Selected Users"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-radio",{attrs:{type:"radio",value:"selected"},model:{value:e.who,callback:function(o){e.who=o},expression:"who"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("All Users Except Selected"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-radio",{attrs:{value:"except"},model:{value:e.who,callback:function(o){e.who=o},expression:"who"}})]},proxy:!0}])}),e._v(" "),e.who!=="all"?s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Users"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-select-multiple",{attrs:{options:e.options.users},model:{value:e.whoData.select,callback:function(o){e.$set(e.whoData,"select",o)},expression:"whoData.select"}})]},proxy:!0}],null,!1,3453077901)}):e._e(),e._v(" "),s("ui-form-element",{attrs:{underline:!1,reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Skip Suspended"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-checkbox",{model:{value:e.whoData.skip_suspended,callback:function(o){e.$set(e.whoData,"skip_suspended",o)},expression:"whoData.skip_suspended"}})]},proxy:!0}])})],1)]},proxy:!0},{key:"step:when",fn:function(){return[s("div",{key:"when"},[s("ui-form-element",{attrs:{reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Now"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-radio",{attrs:{value:"now"},model:{value:e.when,callback:function(o){e.when=o},expression:"when"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{underline:e.when==="cron",reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("On Schedule"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-radio",{attrs:{value:"cron"},model:{value:e.when,callback:function(o){e.when=o},expression:"when"}})]},proxy:!0}])}),e._v(" "),e.when==="cron"?s("ui-form-element",{key:"cron-settings",staticClass:"cron-settings",attrs:{underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Cron Settings"))}})]},proxy:!0},{key:"content",fn:function(){return[s("div",[s("ui-form-element",{attrs:{group:"scheduleBackupWhen",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Minute"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[s("span",[e._v("0\u201359")])]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.cron.minute,callback:function(o){e.$set(e.cron,"minute",o)},expression:"cron.minute"}})]},proxy:!0}],null,!1,233024940)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhen",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Hour"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[s("span",[e._v("0\u201323")])]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.cron.hour,callback:function(o){e.$set(e.cron,"hour",o)},expression:"cron.hour"}})]},proxy:!0}],null,!1,3118107297)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhen",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Day of Month"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[s("span",[e._v("1\u201331")])]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.cron.dayofmonth,callback:function(o){e.$set(e.cron,"dayofmonth",o)},expression:"cron.dayofmonth"}})]},proxy:!0}],null,!1,1124185955)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhen",validators:{required:!0}},scopedSlots:e._u([{key:"tooltip",fn:function(){return[s("span",[e._v("1\u201312")])]},proxy:!0},{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Month"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.cron.month,callback:function(o){e.$set(e.cron,"month",o)},expression:"cron.month"}})]},proxy:!0}],null,!1,240362146)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhen",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Day of Week"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("0\u20137; 0, 7 = Sunday"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.cron.dayofweek,callback:function(o){e.$set(e.cron,"dayofweek",o)},expression:"cron.dayofweek"}})]},proxy:!0}],null,!1,3153172307)})],1)]},proxy:!0}],null,!1,1903325252)}):e._e()],1)]},proxy:!0},{key:"step:where",fn:function(){return[s("div",{key:"where"},[s("ui-form-element",{attrs:{reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Local: %{ location }"),{location:e.options.location}))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-radio",{attrs:{value:"local"},model:{value:e.where,callback:function(o){e.where=o},expression:"where"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("FTP"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-radio",{attrs:{value:"ftp"},model:{value:e.where,callback:function(o){e.where=o},expression:"where"}})]},proxy:!0}])}),e._v(" "),e.where==="ftp"?s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("FTP Settings"))}})]},proxy:!0},{key:"content",fn:function(){return[s("div",[s("ui-form-element",{attrs:{group:"scheduleBackupWhere",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("IP"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.ftp.ip,callback:function(o){e.$set(e.ftp,"ip",o)},expression:"ftp.ip"}})]},proxy:!0}],null,!1,1915475883)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhere",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Username"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.ftp.username,callback:function(o){e.$set(e.ftp,"username",o)},expression:"ftp.username"}})]},proxy:!0}],null,!1,864793611)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhere",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Password"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-password",{model:{value:e.ftp.password,callback:function(o){e.$set(e.ftp,"password",o)},expression:"ftp.password"}})]},proxy:!0}],null,!1,3752580841)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhere",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Remote Path"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{model:{value:e.ftp.path,callback:function(o){e.$set(e.ftp,"path",o)},expression:"ftp.path"}})]},proxy:!0}],null,!1,3735967951)}),e._v(" "),s("ui-form-element",{attrs:{group:"scheduleBackupWhere",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Port"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{attrs:{number:""},model:{value:e.ftp.port,callback:function(o){e.$set(e.ftp,"port",o)},expression:"ftp.port"}})]},proxy:!0}],null,!1,2367341282)}),e._v(" "),s("ui-form-element",{attrs:{"vertical-on-phone":!1,reverse:e.clientStore.isPhone},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Secure FTP"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-checkbox",{model:{value:e.ftp.secure,callback:function(o){e.$set(e.ftp,"secure",o)},expression:"ftp.secure"}})]},proxy:!0}],null,!1,655509447)})],1)]},proxy:!0}],null,!1,4146181691)}):e._e(),e._v(" "),s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Append"))}})]},proxy:!0},{key:"content",fn:function(){return[s("div",{directives:[{name:"flex",rawName:"v-flex"}]},[s("input-select",{attrs:{options:e.options.settings.append.options},model:{value:e.append_to_path,callback:function(o){e.append_to_path=o},expression:"append_to_path"}})],1)]},proxy:!0}])}),e._v(" "),e.append_to_path==="custom"?s("ui-form-element",{attrs:{"path-segment":"directadmin/backup-restore-migration/backups.html#custom-append-values-in-backup-path"},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Custom Path"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{directives:[{name:"margin",rawName:"v-margin",value:[1,0],expression:"[1, 0]"}],attrs:{prefix:"/"},model:{value:e.custom_append,callback:function(o){e.custom_append=o},expression:"custom_append"}})]},proxy:!0}],null,!1,2428725859)}):e._e(),e._v(" "),e.encryptionEnabled?[s("ui-form-element",{attrs:{underline:e.encrypt,reverse:e.clientStore.isPhone,"vertical-on-phone":!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Backup Encryption"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-checkbox",{model:{value:e.encrypt,callback:function(o){e.encrypt=o},expression:"encrypt"}})]},proxy:!0}],null,!1,769703515)}),e._v(" "),s("transition",{attrs:{name:"fadeBounce"}},[e.encrypt?s("ui-form-element",{attrs:{underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Password"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-password",{model:{value:e.password,callback:function(o){e.password=o},expression:"password"}})]},proxy:!0}],null,!1,3464064881)}):e._e()],1)]:e._e()],2)]},proxy:!0},{key:"buttons",fn:function(){return[s("ui-button",{attrs:{theme:"primary",disabled:!(e.validWho&&e.validWhen&&e.validWhere)},on:{click:e.submit}},[s("span",{domProps:{textContent:e._s(e.$gettext("Schedule"))}})])]},proxy:!0}])})],1)]},proxy:!0}])})},i=[],c=r("./js/stores/index.ts"),a=r("./js/api/commands/reseller/backup.js"),l=r("./js/vue-globals/mixins.js"),f={preload:[a.dO,a.v6],api:[{command:a.dO,bind:"options"},{command:a.v6,bind:"encryption"}],mixins:[(0,l.$bindTab)({defaultTab:"who",param:"step"})],data(){return{who:"all",when:"now",where:"local",whoData:{select:[],skip_suspended:!1},cron:{minute:"0",hour:"5",dayofmonth:"*",month:"*",dayofweek:"*"},ftp:{ip:"",username:"",password:"",path:"",port:"",secure:!1},append_to_path:"nothing",custom_append:"",encrypt:!1,password:""}},computed:{validWho(){return this.who==="all"||this.whoData.select.length},validWhen(){return this.when==="now"||!!this.cron.minute&&!!this.cron.hour&&!!this.cron.dayofmonth&&!!this.cron.month&&!!this.cron.dayofweek},validWhere(){return this.where==="local"||!!this.ftp.ip&&!!this.ftp.username&&!!this.ftp.password&&!!this.ftp.path&&!!this.ftp.port},options(){return this.$api.options},encryptionEnabled(){return this.$api.encryption.enabled},requestData(){const g={who:this.who,when:this.when,where:this.where},e=this.who==="all"?{}:this.whoData,s=this.when==="now"?{}:this.cron,o=this.where==="local"?{}:{ftp_ip:this.ftp.ip,ftp_username:this.ftp.username,ftp_password:this.ftp.password,ftp_path:this.ftp.path,ftp_port:this.ftp.port,ftp_secure:this.ftp.secure?"ftps":"no"};return{...g,...e,...s,...o,append_to_path:this.append_to_path,custom_append:this.custom_append,encryption_password:this.password}},...(0,c.Kc)(["client"])},created(){this.ftp.ip=this.options.settings.ip,this.ftp.username=this.options.settings.username,this.ftp.password=this.options.settings.password,this.ftp.path=this.options.settings.path,this.ftp.port=this.options.settings.port,this.ftp.secure=this.options.settings.secure,this.append_to_path=this.options.settings.append.value},methods:{async submit(){(await(0,a.fz)(this.requestData)).status==200&&this.$router.push({name:"reseller/backups"})}}},m=f,v=r("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/reseller/backups/schedule.vue?vue&type=style&index=0&id=e0e58054&prod&lang=scss&"),S=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),y=(0,S.Z)(m,t,i,!1,null,null,null),j=y.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/reseller/backups/schedule.vue?vue&type=style&index=0&id=e0e58054&prod&lang=scss&":function(_,d,r){var t=r("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/reseller/backups/schedule.vue?vue&type=style&index=0&id=e0e58054&prod&lang=scss&");t.__esModule&&(t=t.default),typeof t=="string"&&(t=[[_.id,t,""]]),t.locals&&(_.exports=t.locals);var i=r("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,c=i("675246b0",t,!0,{})},"./js/vue-globals/mixins sync recursive \\.js$":function(_,d,r){var t={"./bindApi.js":"./js/vue-globals/mixins/bindApi.js","./local/clickOutside.js":"./js/vue-globals/mixins/local/clickOutside.js","./local/inputValidation.js":"./js/vue-globals/mixins/local/inputValidation.js","./notification.js":"./js/vue-globals/mixins/notification.js","./reloadApiTable.js":"./js/vue-globals/mixins/reloadApiTable.js","./session.js":"./js/vue-globals/mixins/session.js","./staticData.js":"./js/vue-globals/mixins/staticData.js","vue-globals/mixins/bindApi.js":"./js/vue-globals/mixins/bindApi.js","vue-globals/mixins/local/clickOutside.js":"./js/vue-globals/mixins/local/clickOutside.js","vue-globals/mixins/local/inputValidation.js":"./js/vue-globals/mixins/local/inputValidation.js","vue-globals/mixins/notification.js":"./js/vue-globals/mixins/notification.js","vue-globals/mixins/reloadApiTable.js":"./js/vue-globals/mixins/reloadApiTable.js","vue-globals/mixins/session.js":"./js/vue-globals/mixins/session.js","vue-globals/mixins/staticData.js":"./js/vue-globals/mixins/staticData.js"};function i(a){var l=c(a);return r(l)}function c(a){if(!r.o(t,a)){var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}return t[a]}i.keys=function(){return Object.keys(t)},i.resolve=c,_.exports=i,i.id="./js/vue-globals/mixins sync recursive \\.js$"}}]);
