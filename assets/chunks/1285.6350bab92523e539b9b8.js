"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1285],{"./js/api/commands/widgets.js":function(T,c,t){t.d(c,{$l:function(){return r},Fd:function(){return s},Hp:function(){return o},IU:function(){return E},Qp:function(){return f},UJ:function(){return v},e:function(){return e},em:function(){return S},fH:function(){return d},tQ:function(){return g},w6:function(){return p}});var i=t("./js/api/command/index.js"),n=t("../node_modules/ramda/es/index.js"),m=t("./js/composables/index.ts");const d=i.Z.get({id:"GET_WIDGETS",url:"/CMD_WIDGET",params:{level:()=>(0,m.oR)("user").mode},after:(l,{level:a})=>u=>({installed:n.XPQ(u[`${a}_widgets`]),available:n.XPQ(u[`${a}_widgets_available`]),data:{...n.UID(R=>({title:R}),u[`${a}_widgets_available`]),...n.UID(l.moveProp({tab:"desc",url:"link"}),u[`${a}_widgets_tabs`]||{})}}),notifySuccess:!1,notifyError:!0}),p=i.Z.post({url:"/CMD_WIDGET",params:{type:()=>`${(0,m.oR)("user").mode}_widgets`},schema:{action:i.Z.REQUIRED_STRING,widget:i.Z.REQUIRED_STRING},blocking:!0,silent:!0,notifySuccess:!1,notifyError:!0}).extend({params:{action:"add"}}),v=p.extend({params:{action:"move",json:null},schema:{direction:{type:Number,required:!0,validator:l=>l!==0}}}),g=p.extend({params:{action:"remove"}}),f=i.Z.get({url:"/CMD_WIDGET",id:"EXTERNAL_WIDGET",params:{item:"main"},schema:{id:i.Z.REQUIRED_STRING},before:({id:l})=>({id:null,show:l}),after:(l,{show:a})=>u=>({html:u[a].main,refresh:Number(u[a].refresh_interval)||0})}),_=l=>a=>({...a[`${l}_widgets`],...a[`${l}_widgets_available`]}),r=i.Z.get({url:"/CMD_WIDGET",id:"WIDGETS_LIST",mapResponse:{admin:_("admin"),user:_("user"),reseller:_("reseller")}}),e=i.Z.get({url:"/CMD_USER_BACKUP",mapResponse:n.zGw(n.vgT("users"),n.CEd("info"),n.VO0,n.UID(n.vgT("user")),n.hXT(Boolean))}),s=i.Z.get({url:"/CMD_ADMIN_BACKUP",mapResponse:n.zGw(n.vgT("data_list"),n.hXT(n.kE))}),o=i.Z.post({url:"/CMD_WIDGET",params:{action:"accounts",add:!0},query:{level:i.Z.REQUIRED_STRING,who:i.Z.REQUIRED_STRING,widget:i.Z.ROWS,user:i.Z.ROWS}}),E=o.extend({params:{add:null,delete:!0}}),S=i.Z.get({url:"/CMD_WIDGET",id:"WIDGET_LIST",notifySuccess:!1,notifyError:!0,response:{list:[],custom:[]},mapResponse:{list:n.zGw(n.VO0,n.UID(n.XPQ),n.xHg,n.jj$),custom:n.zGw(n.eiS(["admin_widgets_tabs","reseller_widgets_tabs","user_widgets_tabs"]),n.VO0,n.Jnq)}})},"./js/modules/widgets.js":function(T,c){c.Z=t=>({WGT_SYSTEM_INFO:{level:"user",route:"user/system-info",title:t("System Information"),desc:t("Hardware details")},WGT_ADDITIONAL_DOMAINS:{level:"user",route:"user/domains",title:t("Domain Setup"),desc:t("Change domain options")},WGT_DB:{level:"user",route:"user/database",title:t("Databases"),desc:t("Setup your Databases")},WGT_IP_CONFIG:{level:"reseller",route:"reseller/ip-config",title:t("IP Manager"),desc:t("Manage IPs")},WGT_USER_STATS:{level:"user",route:"user/stats",title:t("Your Account"),desc:t("Usage, logs and statistics")},WGT_EMAIL_POP:{level:"user",route:"user/email/accounts",title:t("E-mail Accounts"),desc:t("Accounts and usage information")},WGT_RESELLER_STATS:{level:"reseller",route:"reseller/stats",title:t("Reseller Stats"),desc:t("Statistics for your Account")},WGT_LIST_USERS:{level:"reseller",route:"reseller/users",title:t("List Users"),desc:t("Users under your control")},WGT_SKINS:{level:"reseller",route:"reseller/skins",title:t("Skins"),desc:t("Choose a new look")},WGT_IP_MANAGER:{level:"admin",route:"admin/ip-manager",title:t("IP Manager"),desc:t("Manage Server IPs")},WGT_ADMIN_STATS:{level:"admin",route:"admin/stats",title:t("Admin Stats"),desc:t("Full Server Statistics")},WGT_ALL_USERS:{level:"admin",route:"admin/users",title:t("All Users"),desc:t("All Accounts on the Server")},WGT_MAIL_QUEUE:{level:"admin",route:"admin/mail-queue",title:t("Mail Queue"),desc:t("E-mail pending delivery")},WGT_LICENSE:{level:"admin",route:"admin/license",title:t("License"),desc:t("License Info")},WGT_UPDATES:{level:"admin",route:"admin/updates",title:t("Updates"),desc:t("DirectAdmin version and updates")},WGT_SHOW_SERVICES:{level:"admin",route:"admin/services",title:t("Services"),desc:t("Monitor all services")}})},"./js/pages/reseller/customize-skin/widgets.vue":function(T,c,t){t.r(c),t.d(c,{default:function(){return _}});var i=function(){var e=this,s=e._self._c;return s("app-page",{scopedSlots:e._u([{key:"default",fn:function(){return[s("app-page-section",{staticClass:"widgets-editor"},[s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Level"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-select",{attrs:{options:{user:e.$gettext("User"),reseller:e.$gettext("Reseller"),admin:e.$gettext("Admin")}},model:{value:e.level,callback:function(o){e.level=o},expression:"level"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Widgets"))}})]},proxy:!0},{key:"content",fn:function(){return[s("ui-r-table",{attrs:{rows:e.widgetsList,columns:[{id:"id",label:e.$gettext("Widget ID")},{id:"name",label:e.$gettext("Name")}],"checked-rows":e.checkedRows,"disable-pagination":"","unstick-headers":"","hide-before-controls":""},on:{"update:checkedRows":function(o){e.checkedRows=o}},scopedSlots:e._u([{key:"table:actions",fn:function(){return[s("ui-table-action",{on:{click:function(o){e.action="add",e.$dialog("APPLY_WIDGET_ACTION_TO").open()}}},[s("span",{domProps:{textContent:e._s(e.$gettext("Add Widget"))}})]),e._v(" "),s("ui-table-action",{on:{click:function(o){e.action="remove",e.$dialog("APPLY_WIDGET_ACTION_TO").open()}}},[s("span",{domProps:{textContent:e._s(e.$gettext("Remove Widget"))}})])]},proxy:!0}])})]},proxy:!0}])}),e._v(" "),s("ui-dialog",{attrs:{id:"APPLY_WIDGET_ACTION_TO",theme:e.action==="add"?"safe":"danger",size:"small"},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.action==="add"?e.$gettext("Add Widget"):e.$gettext("Remove Widget"))}})]},proxy:!0},{key:"content",fn:function(){return[s("div",[s("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"content",fn:function(){return[s("ui-grid",[s("span",{staticClass:"txt:bold",domProps:{textContent:e._s(e.action==="add"?e.$gettext("Add to"):e.$gettext("Remove from"))}}),e._v(" "),s("input-radio",{attrs:{value:"all"},model:{value:e.applyTo,callback:function(o){e.applyTo=o},expression:"applyTo"}},[s("span",{domProps:{textContent:e._s(e.$gettext("all users"))}})]),e._v(" "),s("input-radio",{attrs:{value:"selected"},model:{value:e.applyTo,callback:function(o){e.applyTo=o},expression:"applyTo"}},[s("span",{domProps:{textContent:e._s(e.$gettext("selected users"))}})])],1)]},proxy:!0}])}),e._v(" "),s("transition",{attrs:{name:"fade"}},[e.applyTo==="selected"?s("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"content",fn:function(){return[e.userList?s("input-select-multiple",{attrs:{options:e.userList},model:{value:e.selectedUsers,callback:function(o){e.selectedUsers=o},expression:"selectedUsers"}}):e._e()]},proxy:!0}],null,!1,1024985771)}):e._e()],1)],1)]},proxy:!0},{key:"buttons",fn:function(){return[s("ui-button",{attrs:{theme:e.action==="add"?"safe":"danger"},on:{click:e.handleButtonClick}},[s("span",{domProps:{textContent:e._s(e.action==="add"?e.$gettext("Add"):e.$gettext("Remove"))}})])]},proxy:!0}])})],1)]},proxy:!0}])})},n=[],m=t("../node_modules/ramda/es/index.js"),d=t("./js/api/commands/widgets.js"),I=t("./js/modules/widgets.js"),p={name:"ResellerCustomizeSkinWidgets",data:()=>({level:"user",checkedRows:[],action:"",selectedUsers:[],applyTo:"all",userList:null}),api:[{command:d.$l,bind:"widgets"}],computed:{widgetsNames(){const r=(0,I.Z)(this.$gettext);return m.UID(m.vgT("title"),r)},widgetsList(){const r=this.$api.widgets[this.level]||{};return Object.entries(r).map(([e,s])=>({id:e,name:s===e?this.widgetsNames[e]:s}))},select(){return this.checkedRows.map(r=>r.id)}},created(){(0,d.$l)(),this.getUserList()},methods:{async getUserList(){if(this.$_useStore("user").isAdmin){const r=await(0,d.Fd)();this.userList=m.IDH((e,s)=>({label:this.$gettextInterpolate(this.$gettext("Reseller: %{ creator }"),{creator:s}),entries:[s,...e]}),r);return}this.userList=await(0,d.e)()},async handleButtonClick(){await(this.action==="add"?d.Hp:d.IU)({level:this.level,widget:this.select,who:this.applyTo==="all"?"all":"multiple",user:this.selectedUsers}),this.action="",this.selectedUsers=[],this.applyTo="all",this.checkedRows=[]}}},v=p,g=t("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),f=(0,g.Z)(v,i,n,!1,null,null,null),_=f.exports}}]);
