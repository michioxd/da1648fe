"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[606],{"./js/pages/user/git-version/request.ts":function(w,_,y){y.d(_,{cQ:function(){return N},ER:function(){return p},Je:function(){return v},h2:function(){return c},pD:function(){return R},LJ:function(){return x},tQ:function(){return h},St:function(){return E},gJ:function(){return j}});var m=y("./js/api/openapi/index.ts"),P=y("../node_modules/runtypes/lib/index.js"),g=y("./js/openapi/web.types.ts");const f=(0,m.$d)(),A=m.an.Default(async(r,t)=>{const{data:n}=await f.get(`/api/git/domain/${r}`,t);return n.status==="success"&&P.Array(g.Uu).guard(n.data)===!1?f.failure({type:"INVALID_RESPONSE",response:n.data}):n}),$=m.an.Default(async(r,t)=>{const{data:n}=await f.get(`/api/git/uuid/${r}`,t);return n.status==="success"&&g.Uu.guard(n.data)===!1?f.failure({type:"INVALID_RESPONSE",response:n.data}):n}),D=m.an.Default(async(r,t,n,d)=>{const{data:k}=await f.get(`/api/git/uuid/${r}/branch/${t}`,Object.assign({},d||{},{params:n}));return k.status==="success"&&g.B_.guard(k.data)===!1?f.failure({type:"INVALID_RESPONSE",response:k.data}):k}),b=m.an.Default(async(r,t,n)=>{const{data:d}=await f.get(`/api/git/uuid/${r}/commit/${t}`,n);return d.status==="success"&&g.IK.guard(d.data)===!1?f.failure({type:"INVALID_RESPONSE",response:d.data}):d}),O=m.an.Default(async(r,t)=>{const{data:n}=await f.post(`/api/git/uuid/${r}/deploy`,t);return n}),I=m.an.Default(async(r,t,n)=>{const{data:d}=await f.post(`/api/git/domain/${r}`,t,n);return d.status==="success"&&g.Uu.guard(d.data)===!1?f.failure({type:"INVALID_RESPONSE",response:d.data}):d}),C=m.an.Default(async(r,t)=>{const{data:n}=await f.post(`/api/git/uuid/${r}/fetch`,t);return n}),S=m.an.Default(async(r,t,n)=>{const{data:d}=await f.put(`/api/git/uuid/${r}`,t,n);return d}),o=m.an.Default(async(r,t)=>{const{data:n}=await f.delete(`/api/git/uuid/${r}`,t);return n});var a=y("./js/composables/notify.ts"),l=y("./js/composables/gettext.ts"),i=y("./js/composables/useErrorMessages.ts");const{$gettext:e}=(0,l.Z)(),s=(0,a.d$)(),u=(0,i.L)({GIT_DEPLOY_BRANCH_NOT_SET:e("Git deploy branch is not set"),GIT_DEPLOY_DIR_NOT_SET:e("Git deploy directory is not set"),GIT_DIRECTORY_EXISTS:e("Git directory exists %{ directory }"),GIT_REMOTE_PERMISSION_DENIED:e("Lacking authorization to connect to the remote repository"),GIT_REMOTE_CONNECTION_ERROR:e("Server failed to connect to the remote repository")}),p=async r=>{const t=await A(r);return t.error&&u(t.error),t},c=async r=>{const t=await $(r);return t.error&&u(t.error),t},R=async(r,t,n)=>{const d=await D(r,t,n);return d.error&&u(d.error),d},v=async(r,t)=>{const n=await b(r,t);return n.error&&u(n.error),n},x=async r=>{const t=await O(r);return t.error?u(t.error):s.success({title:e("Git Deploy"),content:e("Deployment completed")}),t},E=async(r,t)=>{const n=await I(r,t);return n.error?u(n.error):s.success({title:e("Git"),content:e("Repository created")}),n},h=async r=>{const t=await C(r);return t.error?u(t.error):s.success({title:e("Git Fetch"),content:e("Fetch completed")}),t},j=async(r,t)=>{const n=await S(r,t);return n.error?u(n.error):s.success({title:e("Git Modify"),content:e("Repository modified")}),n},N=async r=>{const t=await o(r);return t.error?u(t.error):s.success({title:e("Delete"),content:e("Repository deleted")}),t}},"./js/pages/user/git-version/create.vue":function(w,_,y){y.r(_),y.d(_,{default:function(){return C}});var m=function(){var o=this,a=o._self._c,l=o._self._setupProxy;return a("app-page",{scopedSlots:o._u([{key:"default",fn:function(){return[a("ui-form-element",{scopedSlots:o._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:o._s(o.$gettext("Domain"))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{attrs:{disabled:""},model:{value:l.domainUnicode,callback:function(i){l.domainUnicode=i},expression:"domainUnicode"}})]},proxy:!0}])}),o._v(" "),a("ui-form-element",{attrs:{group:"git-init",validators:{required:!0}},scopedSlots:o._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:o._s(o.$gettext("Name"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[a("span",{domProps:{textContent:o._s(o.$gettext('If hosting a repository on this server, only the "name" parameter is required.'))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{attrs:{required:""},on:{keyup:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"enter",13,i.key,"Enter")?null:l.git.apply(null,arguments)}},model:{value:l.query.name,callback:function(i){o.$set(l.query,"name",i)},expression:"query.name"}})]},proxy:!0}])}),o._v(" "),a("ui-form-element",{scopedSlots:o._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:o._s(o.$gettext("Remote"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[a("span",{domProps:{textContent:o._s(o.$gettext("Optional. Required for syncing to a remote repository."))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{on:{keyup:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"enter",13,i.key,"Enter")?null:l.git.apply(null,arguments)}},model:{value:l.query.remote,callback:function(i){o.$set(l.query,"remote",i)},expression:"query.remote"}})]},proxy:!0}])}),o._v(" "),a("ui-form-element",{scopedSlots:o._u([{key:"title",fn:function(){return[a("span",{domProps:{textContent:o._s(o.$gettext("Keyfile"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[a("span",{domProps:{textContent:o._s(o.$gettext("Optional. Required for syncing to a private remote repository."))}})]},proxy:!0},{key:"content",fn:function(){return[a("input-text",{on:{keyup:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"enter",13,i.key,"Enter")?null:l.git.apply(null,arguments)}},model:{value:l.query.keyfile,callback:function(i){o.$set(l.query,"keyfile",i)},expression:"query.keyfile"}})]},proxy:!0}])})]},proxy:!0},{key:"footer:buttons",fn:function(){return[a("ui-button",{attrs:{theme:"primary","validate-group":"git-init"},on:{click:l.git}},[a("span",{domProps:{textContent:o._s(o.$gettext("Create repository"))}})])]},proxy:!0}])})},P=[],g=y("../node_modules/vue/dist/vue.common.prod.js"),f=y("./js/composables/domain.ts"),A=y("../node_modules/vue-router/composables.mjs"),$=y("./js/pages/user/git-version/request.ts"),D=(0,g.defineComponent)({__name:"create",setup(S){const{domain:o,domainUnicode:a}=(0,f.a)(),l=(0,A.tv)(),i=(0,g.ref)({name:"",keyfile:"",remote:""});async function e(){const{error:s}=await(0,$.St)(o.value,i.value);s||l.push("/user/git-version")}return{__sfc:!0,domain:o,domainUnicode:a,router:l,query:i,git:e}}}),b=D,O=y("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),I=(0,O.Z)(b,m,P,!1,null,null,null),C=I.exports},"../node_modules/vue-router/composables.mjs":function(w,_,y){y.d(_,{tv:function(){return g},yj:function(){return f}});var m=y("../node_modules/vue/dist/vue.common.prod.js");/*!
  * vue-router v3.6.5
  * (c) 2022 Evan You
  * @license MIT
  */function P(e){if(!getCurrentInstance())throw new Error("[vue-router]: Missing current instance. "+e+"() must be called inside <script setup> or setup().")}function g(){return(0,m.getCurrentInstance)().proxy.$root.$router}function f(){var e=(0,m.getCurrentInstance)().proxy.$root;if(!e._$route){var s=(0,m.effectScope)(!0).run(function(){return(0,m.shallowReactive)(Object.assign({},e.$router.currentRoute))});e._$route=s,e.$router.afterEach(function(u){Object.assign(s,u)})}return e._$route}function A(e){return I(e,$)}function $(e,s,u){var p=e.matched,c=s.matched;return p.length>=u&&p.slice(0,u+1).every(function(R,v){return R===c[v]})}function D(e,s,u){var p=e.matched,c=s.matched;return p.length<u||p[u]!==c[u]}function b(e){return I(e,D)}var O=function(){};function I(e,s){for(var u=getCurrentInstance(),p=g(),c=u.proxy;c&&c.$vnode&&c.$vnode.data&&c.$vnode.data.routerViewDepth==null;)c=c.$parent;var R=c&&c.$vnode&&c.$vnode.data?c.$vnode.data.routerViewDepth:null;if(R!=null){var v=p.beforeEach(function(x,E,h){return s(x,E,R)?e(x,E,h):h()});return onUnmounted(v),v}return O}function C(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){var s=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return e.preventDefault&&e.preventDefault(),!0}}function S(e,s){var u=function(R){var v=s[R],x=e[R];if(typeof v=="string"){if(v!==x)return{v:!1}}else if(!Array.isArray(x)||x.length!==v.length||v.some(function(E,h){return E!==x[h]}))return{v:!1}};for(var p in s){var c=u(p);if(c)return c.v}return!0}function o(e,s){return Array.isArray(e)?a(e,s):Array.isArray(s)?a(s,e):e===s}function a(e,s){return Array.isArray(s)?e.length===s.length&&e.every(function(u,p){return u===s[p]}):e.length===1&&e[0]===s}function l(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(var u in e)if(!o(e[u],s[u]))return!1;return!0}function i(e){var s=g(),u=f(),p=computed(function(){return s.resolve(unref(e.to),u)}),c=computed(function(){var E=p.value.route,h=E.matched,j=h.length,N=h[j-1],r=u.matched;if(!N||!r.length)return-1;var t=r.indexOf(N);if(t>-1)return t;var n=r[r.length-2];return j>1&&n&&n===N.parent}),R=computed(function(){return c.value>-1&&S(u.params,p.value.route.params)}),v=computed(function(){return c.value>-1&&c.value===u.matched.length-1&&l(u.params,p.value.route.params)}),x=function(E){var h=p.value.route;return C(E)?e.replace?s.replace(h):s.push(h):Promise.resolve()};return{href:computed(function(){return p.value.href}),route:computed(function(){return p.value.route}),isExactActive:v,isActive:R,navigate:x}}}}]);
