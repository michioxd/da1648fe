"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1965],{"../node_modules/date-fns/esm/formatDistance/index.js":function(B,k,i){i.d(k,{Z:function(){return U}});var $=i("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),l=i("../node_modules/date-fns/esm/toDate/index.js"),d=i("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function f(a,o){(0,d.Z)(2,arguments);var r=(0,l.Z)(a),m=(0,l.Z)(o),v=r.getTime()-m.getTime();return v<0?-1:v>0?1:v}function h(a,o){(0,d.Z)(2,arguments);var r=(0,l.Z)(a),m=(0,l.Z)(o),v=r.getFullYear()-m.getFullYear(),w=r.getMonth()-m.getMonth();return v*12+w}function _(a){(0,d.Z)(1,arguments);var o=(0,l.Z)(a);return o.setHours(23,59,59,999),o}function x(a){(0,d.Z)(1,arguments);var o=(0,l.Z)(a),r=o.getMonth();return o.setFullYear(o.getFullYear(),r+1,0),o.setHours(23,59,59,999),o}function g(a){(0,d.Z)(1,arguments);var o=(0,l.Z)(a);return _(o).getTime()===x(o).getTime()}function P(a,o){(0,d.Z)(2,arguments);var r=(0,l.Z)(a),m=(0,l.Z)(o),v=f(r,m),w=Math.abs(h(r,m)),u;if(w<1)u=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-v*w);var A=f(r,m)===-v;g((0,l.Z)(a))&&w===1&&f(a,m)===1&&(A=!1),u=v*(w-Number(A))}return u===0?0:u}function M(a,o){return(0,d.Z)(2,arguments),(0,l.Z)(a).getTime()-(0,l.Z)(o).getTime()}var y={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(o){return o<0?Math.ceil(o):Math.floor(o)}},N="trunc";function C(a){return a?y[a]:y[N]}function E(a,o,r){(0,d.Z)(2,arguments);var m=M(a,o)/1e3;return C(r==null?void 0:r.roundingMethod)(m)}var D=i("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function S(a,o){if(a==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(a[r]=o[r]);return a}function O(a){return S({},a)}var n=i("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),e=1440,t=2520,s=43200,b=86400;function U(a,o,r){var m,v;(0,d.Z)(2,arguments);var w=(0,$.j)(),u=(m=(v=r==null?void 0:r.locale)!==null&&v!==void 0?v:w.locale)!==null&&m!==void 0?m:D.Z;if(!u.formatDistance)throw new RangeError("locale must contain formatDistance property");var A=f(a,o);if(isNaN(A))throw new RangeError("Invalid time value");var c=S(O(r),{addSuffix:Boolean(r==null?void 0:r.addSuffix),comparison:A}),Z,I;A>0?(Z=(0,l.Z)(o),I=(0,l.Z)(a)):(Z=(0,l.Z)(a),I=(0,l.Z)(o));var j=E(I,Z),R=((0,n.Z)(I)-(0,n.Z)(Z))/1e3,p=Math.round((j-R)/60),T;if(p<2)return r!=null&&r.includeSeconds?j<5?u.formatDistance("lessThanXSeconds",5,c):j<10?u.formatDistance("lessThanXSeconds",10,c):j<20?u.formatDistance("lessThanXSeconds",20,c):j<40?u.formatDistance("halfAMinute",0,c):j<60?u.formatDistance("lessThanXMinutes",1,c):u.formatDistance("xMinutes",1,c):p===0?u.formatDistance("lessThanXMinutes",1,c):u.formatDistance("xMinutes",p,c);if(p<45)return u.formatDistance("xMinutes",p,c);if(p<90)return u.formatDistance("aboutXHours",1,c);if(p<e){var W=Math.round(p/60);return u.formatDistance("aboutXHours",W,c)}else{if(p<t)return u.formatDistance("xDays",1,c);if(p<s){var F=Math.round(p/e);return u.formatDistance("xDays",F,c)}else if(p<b)return T=Math.round(p/s),u.formatDistance("aboutXMonths",T,c)}if(T=P(I,Z),T<12){var z=Math.round(p/s);return u.formatDistance("xMonths",z,c)}else{var L=T%12,q=Math.floor(T/12);return L<3?u.formatDistance("aboutXYears",q,c):L<9?u.formatDistance("overXYears",q,c):u.formatDistance("almostXYears",q+1,c)}}},"./js/composables/dateFilter.ts":function(B,k,i){i.d(k,{W:function(){return h},f:function(){return d.f}});var $=i("../node_modules/ramda/es/index.js"),l=i("../node_modules/date-fns/esm/format/index.js"),d=i("./js/modules/date-formats.ts"),f=i("./js/modules/customizations/date-formats/default.ts");const h=$.WAo((_,x)=>{if(x)try{return(0,l.Z)(x,d.f.value[_])}catch(g){return console.warn(`Given ${_} format is incorrect:
${g.message}`),(0,l.Z)(x,f.d[_])}return""})},"./js/composables/filters.ts":function(B,k,i){i.d(k,{Q0:function(){return E},aS:function(){return S},d5:function(){return D},eB:function(){return y},hT:function(){return P},kC:function(){return g},n9:function(){return C},zM:function(){return M}});var $=i("../node_modules/date-fns/esm/formatDistance/index.js"),l=i("../node_modules/punycode/punycode.es6.js"),d=i("./js/composables/dateFilter.ts"),f=i("./js/composables/gettext.ts");const{$gettext:h,$ngettext:_,$gettextInterpolate:x}=(0,f.Z)(),g=n=>{var e;return n?((e=n.at(0))===null||e===void 0?void 0:e.toUpperCase())+n.slice(1):""},P=(n,e="datetime")=>(0,d.W)(e,n),M=n=>(0,$.Z)(n,new Date),y=(n,e=1024)=>{const t=Number(n);if(!t)return"0 B";const s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],b=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/e**b).toFixed(2))} ${s[b]}`},N=n=>{try{return(0,l.xX)(n)}catch(e){return n}},C=n=>(0,l.xX)(n),E=n=>{if(!n||!n.includes("@"))return n;const[e,t]=n.split("@");return[e,N(t)].join("@")},D=n=>{if(n<60)return h("less than a minute");const e=Math.floor(n/60)%60,t=Math.floor(n/3600)%24,s=Math.floor(n/(3600*24)),b=[s?_("%{days} day","%{days} days",s):null,t?_("%{hours} hour","%{hours} hours",t):null,e?_("%{minutes} minute","%{minutes} minutes",e):null].filter(Boolean).join(", ");return x(b,{days:s,hours:t,minutes:e})},S=(n,e)=>n.length<=e?n:`${n.substring(0,e)}...`,O=()=>({capitalize:g,date:P,distanceFromNow:M,humanReadableSize:y,p6eUnicode:C,p6eUnicodeEmail:E,formatUptime:D,truncateString:S})},"./js/pages/user/email/spamassassin.vue":function(B,k,i){i.r(k),i.d(k,{default:function(){return O}});var $=function(){var e=this,t=e._self._c;return t("app-page",{attrs:{actions:[{label:e.$gettext("Disable SpamAssassin"),handler:e.disableSpamAssassin,icon:"#settings",visible:e.$api.enabled}]},scopedSlots:e._u([{key:"default",fn:function(){return[e.$api.enabled?t("app-page-section",[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Where do you want the spam to go?"))}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[e.showMainSpamboxError?t("ui-badge",{attrs:{theme:"danger"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Please, select one of options listed below"))}})]):e._e(),e._v(" "),t("input-radio",{attrs:{value:"inbox"},model:{value:e.values.where,callback:function(s){e.$set(e.values,"where",s)},expression:"values.where"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Inbox (don't block it)"))}})]),e._v(" "),e.$api.options.show_main_spambox?t("input-radio",{attrs:{value:"spamfolder"},model:{value:e.values.where,callback:function(s){e.$set(e.values,"where",s)},expression:"values.where"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Redirect it to the catch-all spam folder in your main IMAP account"))}})]):e._e(),e._v(" "),t("input-radio",{attrs:{value:"userspamfolder"},model:{value:e.values.where,callback:function(s){e.$set(e.values,"where",s)},expression:"values.where"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Send the spam to the user's spam folder"))}})]),e._v(" "),t("input-radio",{attrs:{value:"delete"},model:{value:e.values.where,callback:function(s){e.$set(e.values,"where",s)},expression:"values.where"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Delete the spam"))}})])],1)]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[t("span",{domProps:{textContent:e._s(e.$gettext("What score threshold do you wish to use?"))}}),e._v(" "),t("ui-tooltip",[t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("A lower threshold will block more spam, but can potentially tag legitimate mail."))}}),e._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("A higher threshold will let more spam through, but is less likely to tag legitimate mail."))}})])],1)]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[t("input-radio",{attrs:{value:"5.0"},model:{value:e.values.required_hits,callback:function(s){e.$set(e.values,"required_hits",s)},expression:"values.required_hits"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Low Threshold (5.0)"))}})]),e._v(" "),t("input-radio",{attrs:{value:"7.5"},model:{value:e.values.required_hits,callback:function(s){e.$set(e.values,"required_hits",s)},expression:"values.required_hits"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Medium Threshold (7.5)"))}})]),e._v(" "),t("input-radio",{attrs:{value:"10.0"},model:{value:e.values.required_hits,callback:function(s){e.$set(e.values,"required_hits",s)},expression:"values.required_hits"}},[t("span",{domProps:{textContent:e._s(e.$gettext("High Threshold (10.0)"))}})]),e._v(" "),t("input-radio",{attrs:{value:"custom"},model:{value:e.values.required_hits,callback:function(s){e.$set(e.values,"required_hits",s)},expression:"values.required_hits"}},[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:e.clientStore.isPhone?"start":"center",dir:e.clientStore.isPhone?"column":"row"},expression:`{
                                    cross: clientStore.isPhone
                                        ? 'start'
                                        : 'center',
                                    dir: clientStore.isPhone
                                        ? 'column'
                                        : 'row',
                                }`},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[t("span",{domProps:{textContent:e._s(e.$gettext("Custom Threshold"))}}),e._v(" "),t("transition",{attrs:{name:"fade"}},[t("input-text",{attrs:{number:"float"},model:{value:e.values.required_hits_custom,callback:function(s){e.$set(e.values,"required_hits_custom",s)},expression:`
                                            values.required_hits_custom
                                        `}})],1)],1)])],1)]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Would you like to delete high scoring spam?"))}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[t("input-radio",{attrs:{value:"yes"},model:{value:e.values.high_score_block,callback:function(s){e.$set(e.values,"high_score_block",s)},expression:"values.high_score_block"}},[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:e.clientStore.isPhone?"start":"center",dir:e.clientStore.isPhone?"column":"row"},expression:`{
                                    cross: clientStore.isPhone
                                        ? 'start'
                                        : 'center',
                                    dir: clientStore.isPhone
                                        ? 'column'
                                        : 'row',
                                }`},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[t("span",{domProps:{textContent:e._s(e.$gettext("Yes, block all spam scoring higher than:"))}}),e._v(" "),t("ui-input-group",{scopedSlots:e._u([{key:"input",fn:function(){return[t("input-text",{attrs:{number:""},model:{value:e.values.high_score,callback:function(s){e.$set(e.values,"high_score",s)},expression:"values.high_score"}})]},proxy:!0},{key:"additions:right",fn:function(){return[t("ui-tooltip",{scopedSlots:e._u([{key:"trigger",fn:function(){return[t("ui-button",{attrs:{disabled:""}},[t("ui-icon",{attrs:{id:"question",theme:"neutral",size:"medium3"}})],1)]},proxy:!0}])},[e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("1-50, no decimals"))}})])]},proxy:!0}])})],1)]),e._v(" "),t("input-radio",{attrs:{value:"no"},model:{value:e.values.high_score_block,callback:function(s){e.$set(e.values,"high_score_block",s)},expression:"values.high_score_block"}},[t("span",{domProps:{textContent:e._s(e.$gettext("No, do not block high scoring spam. Use only the threshold in the previous section."))}})])],1)]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Do you wish to rewrite the subject of a spam e-mail?"))}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[t("input-radio",{attrs:{value:"1"},model:{value:e.values.rewrite_subject,callback:function(s){e.$set(e.values,"rewrite_subject",s)},expression:"values.rewrite_subject"}},[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:e.clientStore.isPhone?"start":"center",dir:e.clientStore.isPhone?"column":"row"},expression:`{
                                    cross: clientStore.isPhone
                                        ? 'start'
                                        : 'center',
                                    dir: clientStore.isPhone
                                        ? 'column'
                                        : 'row',
                                }`},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[t("span",{domProps:{textContent:e._s(e.$gettext("Yes, set the subject to the following:"))}}),e._v(" "),t("input-text",{model:{value:e.values.subject_tag,callback:function(s){e.$set(e.values,"subject_tag",s)},expression:"values.subject_tag"}})],1)]),e._v(" "),t("input-radio",{attrs:{value:"0"},model:{value:e.values.rewrite_subject,callback:function(s){e.$set(e.values,"rewrite_subject",s)},expression:"values.rewrite_subject"}},[t("span",{domProps:{textContent:e._s(e.$gettext("No, leave the subject unchanged."))}})])],1)]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[t("span",{domProps:{textContent:e._s(e.$gettext("How should the spam be delivered?"))}}),e._v(" "),t("ui-tooltip",[t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("Attachments will separate the spam into its own message, preventing scripts from being run."))}}),e._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("Text-only attachments are used for increased safety."))}}),e._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("Not using attachments will leave the spam unaltered except for spam headers."))}})])],1)]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[t("input-radio",{attrs:{value:"0"},model:{value:e.values.report_safe,callback:function(s){e.$set(e.values,"report_safe",s)},expression:"values.report_safe"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Don't use attachments (dangerous)."))}})]),e._v(" "),t("input-radio",{attrs:{value:"1"},model:{value:e.values.report_safe,callback:function(s){e.$set(e.values,"report_safe",s)},expression:"values.report_safe"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Use attachments."))}})]),e._v(" "),t("input-radio",{attrs:{value:"2"},model:{value:e.values.report_safe,callback:function(s){e.$set(e.values,"report_safe",s)},expression:"values.report_safe"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Use text-only attachments."))}})])],1)]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[t("span",{domProps:{textContent:e._s(e.$gettext("E-mail Blocklist"))}}),e._v(" "),t("ui-tooltip",[t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("This is the list of e-mail address that will be blocked."))}}),e._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("Any e-mail from these addresses will automatically be tagged as spam."))}}),e._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("e.g. *@domain.com"))}})])],1)]},proxy:!0},{key:"content",fn:function(){return[t("ui-r-table",e._b({attrs:{"hide-before-controls":""},scopedSlots:e._u([{key:"col:email",fn:function({email:s}){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:`{
                                    cross: 'center',
                                    main: 'between',
                                }`}]},[e._v(`
                                `+e._s(e.p6eUnicodeEmail(s))+`
                                `),t("ui-button-icon",{attrs:{icon:"delete",size:"medium3",title:e.$gettext("Remove")},on:{click:function(b){return e.removeFromList("blacklist_from",s)}}})],1)]}},{key:"table:after",fn:function(){return[t("ui-form-element",{attrs:{vertical:"",group:"blacklist",validators:{required:!0,email:!0,unique:e.checkUniqueness("blacklist_from"),oppositeUnique:e.checkUniqueness("whitelist_from")}},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-input-group",{scopedSlots:e._u([{key:"input",fn:function(){return[t("input-text",{on:{keyup:function(s){if(!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;e.$valid("blacklist")&&e.addToList("blacklist_from",e.newBlacklistEmail)}},model:{value:e.newBlacklistEmail,callback:function(s){e.newBlacklistEmail=s},expression:"newBlacklistEmail"}})]},proxy:!0},{key:"additions:right",fn:function(){return[t("ui-button",{attrs:{theme:"safe",size:"big","validate-group":"blacklist"},on:{click:function(s){return e.addToList("blacklist_from",e.newBlacklistEmail)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Add"))}})])]},proxy:!0}])})]},proxy:!0},{key:"error:email",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Should be valid email"))}})]},proxy:!0},{key:"error:unique",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Already in the list"))}})]},proxy:!0},{key:"error:oppositeUnique",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Already allowed"))}})]},proxy:!0}])})]},proxy:!0}])},"ui-r-table",{rows:e.values.blacklist_from.map(s=>({email:s})),columns:[{id:"email",label:e.$gettext("Blocked E-mail")}],isCheckable:!1},!1))]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[t("span",{domProps:{textContent:e._s(e.$gettext("E-mail Allow"))}}),e._v(" "),t("ui-tooltip",[t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("This is the list of e-mail address that will be allowed through, regardless of content."))}}),e._v(" "),t("span",{staticClass:"disp:block",domProps:{textContent:e._s(e.$gettext("The format is the same as the E-mail Blocklist"))}})])],1)]},proxy:!0},{key:"content",fn:function(){return[t("ui-r-table",e._b({scopedSlots:e._u([{key:"col:email",fn:function({email:s}){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:`{
                                    cross: 'center',
                                    main: 'between',
                                }`}]},[e._v(`
                                `+e._s(e.p6eUnicodeEmail(s))+`
                                `),t("ui-button-icon",{attrs:{icon:"delete",size:"medium3",title:e.$gettext("Remove")},on:{click:function(b){return e.removeFromList("whitelist_from",s)}}})],1)]}},{key:"col:delete-action",fn:function({item:s}){return[t("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(b){return e.removeFromList("whitelist_from",s.email)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Remove"))}})])]}},{key:"table:after",fn:function(){return[t("ui-form-element",{attrs:{vertical:"",group:"whitelist",validators:{required:!0,email:!0,unique:e.checkUniqueness("whitelist_from"),oppositeUnique:e.checkUniqueness("blacklist_from")}},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-input-group",{scopedSlots:e._u([{key:"input",fn:function(){return[t("input-text",{on:{keyup:function(s){if(!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;e.$valid("whitelist")&&e.addToList("whitelist_from",e.newWhitelistEmail)}},model:{value:e.newWhitelistEmail,callback:function(s){e.newWhitelistEmail=s},expression:"newWhitelistEmail"}})]},proxy:!0},{key:"additions:right",fn:function(){return[t("ui-button",{attrs:{theme:"safe",size:"big","validate-group":"whitelist"},on:{click:function(s){return e.addToList("whitelist_from",e.newWhitelistEmail)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Add"))}})])]},proxy:!0}])})]},proxy:!0},{key:"error:email",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Should be valid email"))}})]},proxy:!0},{key:"error:unique",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Already in the list"))}})]},proxy:!0},{key:"error:oppositeUnique",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Already blocked"))}})]},proxy:!0}])})]},proxy:!0}])},"ui-r-table",{rows:e.values.whitelist_from.map(s=>({email:s})),columns:[{id:"email",label:e.$gettext("Allowed E-mail")}],isCheckable:!1,hideBeforeControls:!0},!1))]},proxy:!0}])})],1):t("app-page-section",[t("span",{domProps:{textContent:e._s(e.$gettext("SpamAssassin is not currently enabled."))}})])]},proxy:!0},{key:"footer:buttons",fn:function(){return[e.$api.enabled?[t("ui-button",{attrs:{theme:"safe",disabled:e.showMainSpamboxError},on:{click:e.saveValues}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})]),e._v(" "),t("ui-tooltip",{attrs:{position:"left"},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("ui-button",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{theme:"danger"},on:{click:e.deleteBayesData}},[t("span",{domProps:{textContent:e._s(e.$gettext("Delete Bayes Data"))}})])]},proxy:!0}])},[e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("This button will remove data learned by SpamAssassin."))}}),e._v(" "),t("br"),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("It will free up some space, but will reset any learned progress SpamAssassin has previously made."))}})])]:t("ui-button",{attrs:{theme:"primary"},on:{click:e.enableSpamAssassin}},[t("span",{domProps:{textContent:e._s(e.$gettext("Enable SpamAssassin"))}})])]},proxy:!0},e.$api.enabled?{key:"bottom:links",fn:function(){return[t("ui-link",{attrs:{bullet:"",href:"/HTM_FILE_MANAGER_EDIT?path=/.spamassassin/user_prefs",target:"_blank"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Manually edit the config file yourself"))}})])]},proxy:!0}:null],null,!0)})},l=[],d=i("./js/stores/index.ts"),f=i("./js/api/command/index.js");const h=f.Z.get({id:"SPAMASSASSIN_INFO",url:"/CMD_SPAMASSASSIN",domain:!0,after:n=>n.flow(e=>({...e,required_hits:["5.0","7.5","10.0"].includes(e.required_score||e.required_hits)?e.required_score||e.required_hits:"custom",required_hits_custom:e.required_score||e.required_hits,rewrite_subject:e.rewrite_header?"1":"0",rewrite_header:e.rewrite_header||e.subject_tag}),n.deleteProp("required_score"),n.mapProps({is_on:n.convert.toAppBoolean,rewrite_header:e=>e.replace("subject ",""),show_main_spambox:n.isEqual("1")}),n.moveProp({is_on:"enabled",where:"values.where",required_score:"values.required_score",high_score:"values.high_score",high_score_block:"values.high_score_block",rewrite_subject:"values.rewrite_subject",rewrite_header:"values.subject_tag",required_hits:"values.required_hits",required_hits_custom:"values.required_hits_custom",report_safe:"values.report_safe",whitelist_from:"values.whitelist_from",blacklist_from:"values.blacklist_from",show_main_spambox:"options.show_main_spambox"}))}),_=n=>h.data.response.values[n].join(`\r
`),x=f.Z.post({url:"/CMD_SPAMASSASSIN",params:{action:"save"},domain:!0,before:()=>({...h.data.response.values,blacklist_from:_("blacklist_from"),whitelist_from:_("whitelist_from")})}),g=f.Z.post({url:"/CMD_SPAMASSASSIN",domain:!0,params:{action:"disable"}}),P=f.Z.post({url:"/CMD_SPAMASSASSIN",domain:!0,params:{action:"save"},schema:{values:{type:Object,required:!0}},before:({values:n})=>({...n,values:null,whitelist_from:n.whitelist_from.join(`\r
`),blacklist_from:n.blacklist_from.join(`\r
`)})}),M=f.Z.post({url:"/CMD_FILE_MANAGER",params:{select:["auto-whitelist","bayes_seen","bayes_journal","bayes_toks"].map(n=>`/.spamassassin/${n}`),action:"multiple",button:"delete",overwrite:!1,path:"/.spamassassin"}});var y=i("../node_modules/ramda/es/index.js"),N=i("./js/composables/filters.ts"),C={preload:h,api:[{command:h,bind:{"response.enabled":"enabled","response.values":"defaults","response.options":"options"}}],data(){return{values:{},newBlacklistEmail:"",newWhitelistEmail:""}},computed:{showMainSpamboxError(){return!this.$api.options.show_main_spambox&&this.values.where==="spamfolder"},...(0,d.Kc)(["client"])},watch:{$domain:{async handler(){await h(),this.values=y.d9v(this.$api.defaults)}}},created(){this.values=y.d9v(this.$api.defaults),this.$watch("values.required_hits",(n,e)=>{n==="custom"&&(this.values.required_hits_custom=e)})},methods:{p6eUnicodeEmail:N.Q0,reloadSettings(){h()},checkUniqueness(n){return e=>!this.values[n].includes(e)},disableSpamAssassin(){g().then(this.reloadSettings)},enableSpamAssassin(){x().then(this.reloadSettings)},addToList(n,e){this.values[n].push(this.$p6e.email2ascii(e)),this[n.includes("blacklist")?"newBlacklistEmail":"newWhitelistEmail"]=""},removeFromList(n,e){this.values[n]=this.values[n].filter(t=>t!==e)},saveValues(){P({values:this.values})},deleteBayesData(){M()}}},E=C,D=i("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),S=(0,D.Z)(E,$,l,!1,null,null,null),O=S.exports}}]);
