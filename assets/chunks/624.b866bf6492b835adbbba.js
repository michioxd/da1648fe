"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[624],{"./js/pages/admin/users/move.vue":function(x,i,r){r.r(i),r.d(i,{default:function(){return g}});var c=function(){var e=this,s=e._self._c;return s("app-page",{attrs:{id:"move-users"},scopedSlots:e._u([{key:"default",fn:function(){return[s("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Select Users"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-select-multiple",{attrs:{options:e.userGroups},model:{value:e.users,callback:function(u){e.users=u},expression:"users"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Select Reseller"))}})]},proxy:!0},{key:"content",fn:function(){return[s("div",{directives:[{name:"flex",rawName:"v-flex"}]},[s("input-select",{attrs:{options:e.targetCreators},model:{value:e.creator,callback:function(u){e.creator=u},expression:"creator"}})],1)]},proxy:!0}])})]},proxy:!0},{key:"footer:buttons",fn:function(){return[s("ui-button",{attrs:{theme:"primary",disabled:!e.users.length||!e.creator},on:{click:e.moveUsers}},[s("span",{domProps:{textContent:e._s(e.$gettext("Move Users"))}})])]},proxy:!0}])})},p=[],o=r("./js/api/command/index.js");const l="/CMD_MOVE_USERS",a=o.Z.get({id:"USERS_MOVE_LIST",url:l,after:t=>t.getProp("data_list")}),m=o.Z.select({url:l,params:{action:"moveusers"},schema:{creator:o.Z.REQUIRED_STRING}});var n=r("../node_modules/ramda/es/index.js"),d={preload:a,api:[{command:a,bind:"list"}],data(){return{users:[],creator:""}},computed:{targetCreators(){return n.XPQ(this.$api.list)},userGroups(){return n.zGw(n.hXT(this.hasUsers),n.UID(this.getUserGroup))(this.targetCreators)}},watch:{creator(t){this.users=n.hXT(e=>!this.$api.list[t].includes(e),this.users)}},methods:{hasUsers(t){return!!this.$api.list[t].length},getResellerLabel(t){return this.$gettextInterpolate(this.$gettext("Reseller: %{ creator }"),{creator:t})},getUserGroup(t){return{label:this.getResellerLabel(t),entries:this.$api.list[t],disabled:this.creator===t}},async moveUsers(){await m({select:this.users,creator:this.creator}),a(),this.checkedRows=[]}}},v=d,h=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),f=(0,h.Z)(v,c,p,!1,null,null,null),g=f.exports}}]);
