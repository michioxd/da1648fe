"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5207],{"./js/roots/login/pages/lost-password.vue":function(K,I,d){d.r(I),d.d(I,{default:function(){return X}});var x=function(){var e=this,n=e._self._c,r=e._self._setupProxy;return n("div",[n(r.stageComponent,e._b({tag:"component",on:{success:r.nextStage}},"component",r.payload,!1)),e._v(" "),n("router-link",{key:"standard-auth-link",staticClass:"Link",attrs:{to:{name:"login/main"}}},[e._v(`
        \u2190
        `),n("span",{domProps:{textContent:e._s(e.$pgettext("login-page","Back to the login page"))}})])],1)},D=[],p=d("../node_modules/vue/dist/vue.common.prod.js"),S=function(){var e=this,n=e._self._c,r=e._self._setupProxy;return n(r.LoginBox,{attrs:{message:e.$pgettext("login-page","Enter your Username and a confirmation link will be sent to your email account.")},on:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:r.sendMail.apply(null,arguments)}}},[n("label",{staticClass:"InputLabel",attrs:{for:"username"},domProps:{textContent:e._s(e.$pgettext("login-page","Username"))}}),e._v(" "),n(r.InputText,{key:"username",attrs:{id:"username",value:r.username,placeholder:e.$pgettext("login-page","Please enter username")},on:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:r.sendMail.apply(null,arguments)},"update:value":function(o){r.username=o}}}),e._v(" "),n("span",{staticClass:"InputHint",domProps:{textContent:e._s(e.$pgettext("login-page","Enter your Username and a confirmation link will be sent to your email account."))}}),e._v(" "),n("button",{staticClass:"Button",on:{click:r.sendMail}},[n(r.Loader,[n("span",{domProps:{textContent:e._s(e.$pgettext("login-page","Send me a Link"))}})])],1)],1)},U=[],i=d("./js/api/command/index.js");const $=i.Z.post({url:"/CMD_LOGIN",params:{json:!0},schema:{username:i.Z.REQUIRED_STRING,password:i.Z.REQUIRED_STRING,referrer:{type:String,required:!1,default:()=>window.location.href}},after:c=>c.mapProps({json:c.convert.toAppBoolean,success:c.convert.toAppBoolean}),notifySuccess:!1,notifyError:!1}),F=i.Z.post({url:"/CMD_ASK_TWOSTEP_AUTH",params:{json:!0,action:"submit",referrer:"/"},schema:{code:i.Z.REQUIRED_STRING,trust_device:i.Z.OPTIONAL_BOOL},notifySuccess:!1,notifyError:!1}),N=i.Z.post({url:"/CMD_ASK_SECURITY_QUESTION",params:{json:!0,action:"submit",referrer:"/"},schema:{answer:i.Z.REQUIRED_STRING},notifySuccess:!1,notifyError:!1}),b=i.Z.post({url:"/CMD_LOST_PASSWORD",params:{action:"request"},schema:{username:i.Z.REQUIRED_STRING},notifySuccess:!1,notifyError:!1}),w=i.Z.post({url:"/CMD_LOST_PASSWORD",params:{action:"code"},schema:{code:i.Z.REQUIRED_STRING,username:i.Z.REQUIRED_STRING},notifySuccess:!1,notifyError:!1}),B=i.Z.get({url:"/CMD_LOGOUT",timeout:1e4}),G=i.Z.post({url:"/CMD_LOGIN",params:{json:!0},blocking:!0,schema:{user:i.Z.REQUIRED_STRING,oldUser:i.Z.REQUIRED_STRING},before:({oldUser:c,user:e})=>({user:null,oldUser:null,username:`${c}|${e}`}),after:c=>c.mapProp("success",c.convert.toAppBoolean),notifySuccess:!1});var C=d("./js/roots/login/components/login-box.vue"),P=d("./js/roots/login/components/state-loader.vue"),A=d("./js/roots/login/inputs/input-text.vue"),t=(0,p.defineComponent)({__name:"send-message",emits:["error","success"],setup(c,{emit:e}){const n=(0,p.ref)("");return{__sfc:!0,username:n,emit:e,sendMail:async()=>{if(n.value.trim()==="")return;const o=await b({username:n.value});o instanceof Error?e("error",o):e("success",{message:o.success,username:n.value})},LoginBox:C.Z,Loader:P.Z,InputText:A.Z}}}),s=t,a=d("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),l=(0,a.Z)(s,S,U,!1,null,null,null),u=l.exports,v=function(){var e=this,n=e._self._c,r=e._self._setupProxy;return n("div",{staticClass:"Box__Form"},[n("div",{staticClass:"Message m:top:22",domProps:{textContent:e._s(r.props.message)}})])},m=[],f=(0,p.defineComponent)({__name:"message-box",props:{message:null},setup(c){return{__sfc:!0,props:c}}}),g=f,_=(0,a.Z)(g,v,m,!1,null,null,null),R=_.exports,E=function(){var e=this,n=e._self._c,r=e._self._setupProxy;return n(r.LoginBox,{on:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:r.submitCode.apply(null,arguments)}}},[n("label",{staticClass:"InputLabel",attrs:{for:"username"},domProps:{textContent:e._s(e.$pgettext("login-page","Username"))}}),e._v(" "),n(r.InputText,{key:"username",attrs:{id:"username",value:r.user,placeholder:e.$pgettext("login-page","Please enter username")},on:{"update:value":function(o){r.user=o}}}),e._v(" "),n("label",{staticClass:"InputLabel",attrs:{for:"username"},domProps:{textContent:e._s(e.$pgettext("login-page","Code from E-mail"))}}),e._v(" "),n(r.InputText,{key:"code",attrs:{value:r.code},on:{"update:value":function(o){r.code=o}}}),e._v(" "),r.codeErrorMessage?n("span",{staticClass:"InputHint --error",domProps:{textContent:e._s(r.codeErrorMessage)}}):n("span",{staticClass:"InputHint",domProps:{textContent:e._s(e.$pgettext("login-page","Log In using your username and code from E-mail"))}}),e._v(" "),n("button",{staticClass:"Button",on:{click:r.submitCode}},[n(r.Loader,[n("span",{domProps:{textContent:e._s(e.$pgettext("login-page","Request New Password"))}})])],1)],1)},h=[],M=(0,p.defineComponent)({__name:"send-code",props:{username:null,receivedCode:null},emits:["success"],setup(c,{emit:e}){const n=c,r=(0,p.ref)(n.receivedCode),o=(0,p.ref)(n.username),y=(0,p.ref)("");return(0,p.watch)(r,()=>{y.value=""}),{__sfc:!0,props:n,emit:e,code:r,user:o,codeErrorMessage:y,submitCode:async()=>{if(!o.value||r.value.trim()==="")return;const{error:L,success:Z}=await w({username:o.value,code:r.value});L?y.value=L:Z&&e("success",{message:Z})},LoginBox:C.Z,Loader:P.Z,InputText:A.Z}}}),T=M,V=(0,a.Z)(T,E,h,!1,null,null,null),H=V.exports,W=d("../node_modules/vue-router/composables.mjs"),Q=d("./js/gettext.js"),z=(0,p.defineComponent)({__name:"lost-password",setup(c){const e=[{component:u},{component:R,customMessage:(0,Q.$gettext)("If the username entered is correct, you will receive a confirmation email shortly.")},{component:H},{component:R,customMessage:(0,Q.$gettext)("The e-mail containing your new password has been sent.")}],n=(0,p.ref)(0),r=(0,p.computed)(()=>e[n.value]),o=(0,p.ref)({username:"",message:"",receivedCode:""}),{username:y,code:k}=(0,W.yj)().query;typeof y=="string"&&typeof k=="string"&&(o.value.username=y,o.value.receivedCode=k,n.value=2);const L=j=>{var O;e.length>n.value+1&&(j.message=(O=r.value.customMessage)!==null&&O!==void 0?O:j.message,Object.assign(o.value,j),n.value++)},Z=(0,p.computed)(()=>r.value.component);return{__sfc:!0,stages:e,stageIndex:n,currentStage:r,payload:o,username:y,code:k,nextStage:L,stageComponent:Z}}}),Y=z,J=(0,a.Z)(Y,x,D,!1,null,null,null),X=J.exports},"../node_modules/vue-router/composables.mjs":function(K,I,d){d.d(I,{tv:function(){return p},yj:function(){return S}});var x=d("../node_modules/vue/dist/vue.common.prod.js");/*!
  * vue-router v3.6.5
  * (c) 2022 Evan You
  * @license MIT
  */function D(t){if(!getCurrentInstance())throw new Error("[vue-router]: Missing current instance. "+t+"() must be called inside <script setup> or setup().")}function p(){return(0,x.getCurrentInstance)().proxy.$root.$router}function S(){var t=(0,x.getCurrentInstance)().proxy.$root;if(!t._$route){var s=(0,x.effectScope)(!0).run(function(){return(0,x.shallowReactive)(Object.assign({},t.$router.currentRoute))});t._$route=s,t.$router.afterEach(function(a){Object.assign(s,a)})}return t._$route}function U(t){return b(t,i)}function i(t,s,a){var l=t.matched,u=s.matched;return l.length>=a&&l.slice(0,a+1).every(function(v,m){return v===u[m]})}function $(t,s,a){var l=t.matched,u=s.matched;return l.length<a||l[a]!==u[a]}function F(t){return b(t,$)}var N=function(){};function b(t,s){for(var a=getCurrentInstance(),l=p(),u=a.proxy;u&&u.$vnode&&u.$vnode.data&&u.$vnode.data.routerViewDepth==null;)u=u.$parent;var v=u&&u.$vnode&&u.$vnode.data?u.$vnode.data.routerViewDepth:null;if(v!=null){var m=l.beforeEach(function(f,g,_){return s(f,g,v)?t(f,g,_):_()});return onUnmounted(m),m}return N}function w(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){var s=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(s))return}return t.preventDefault&&t.preventDefault(),!0}}function B(t,s){var a=function(v){var m=s[v],f=t[v];if(typeof m=="string"){if(m!==f)return{v:!1}}else if(!Array.isArray(f)||f.length!==m.length||m.some(function(g,_){return g!==f[_]}))return{v:!1}};for(var l in s){var u=a(l);if(u)return u.v}return!0}function G(t,s){return Array.isArray(t)?C(t,s):Array.isArray(s)?C(s,t):t===s}function C(t,s){return Array.isArray(s)?t.length===s.length&&t.every(function(a,l){return a===s[l]}):t.length===1&&t[0]===s}function P(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(var a in t)if(!G(t[a],s[a]))return!1;return!0}function A(t){var s=p(),a=S(),l=computed(function(){return s.resolve(unref(t.to),a)}),u=computed(function(){var g=l.value.route,_=g.matched,R=_.length,E=_[R-1],h=a.matched;if(!E||!h.length)return-1;var M=h.indexOf(E);if(M>-1)return M;var T=h[h.length-2];return R>1&&T&&T===E.parent}),v=computed(function(){return u.value>-1&&B(a.params,l.value.route.params)}),m=computed(function(){return u.value>-1&&u.value===a.matched.length-1&&P(a.params,l.value.route.params)}),f=function(g){var _=l.value.route;return w(g)?t.replace?s.replace(_):s.push(_):Promise.resolve()};return{href:computed(function(){return l.value.href}),route:computed(function(){return l.value.route}),isExactActive:m,isActive:v,navigate:f}}}}]);
