"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8367],{"./js/api/commands/reseller/password.js":function(y,p,a){var s=a("./js/api/command/index.js");p.Z=s.Z.post({url:"/CMD_USER_PASSWD",params:{action:"create",referer:"CMD_API_USER_PASSWD"},schema:{username:s.Z.REQUIRED_STRING,passwd:s.Z.REQUIRED_STRING},before:({passwd:c})=>({passwd2:c})})},"./js/api/commands/reseller/suspension-message.js":function(y,p,a){a.d(p,{FC:function(){return m},TB:function(){return i},zE:function(){return _}});var s=a("./js/api/command/index.js");const c="/CMD_SUSPENSION_MESSAGE",m=s.Z.get({url:c,id:"SUSPENSION_MESSAGE",schema:{level:{type:String,required:!1,default:"1"}}}),_=s.Z.post({url:c,params:{save:!0},schema:{level:s.Z.REQUIRED_STRING,subject:s.Z.REQUIRED_STRING,message:s.Z.REQUIRED_STRING,notify:s.Z.OPTIONAL_BOOL}}),i=s.Z.post({url:c,params:{reset:!0},schema:{level:s.Z.REQUIRED_STRING}})},"./js/api/commands/reseller/tickets.js":function(y,p,a){a.d(p,{DU:function(){return t},Fv:function(){return e},J9:function(){return m},Kw:function(){return o},Pp:function(){return l},QC:function(){return u},SP:function(){return i},TF:function(){return A},_U:function(){return v},a5:function(){return x},ax:function(){return n},je:function(){return f},pR:function(){return d},x$:function(){return h}});var s=a("./js/api/command/index.js"),c=a("../node_modules/date-fns/esm/formatDistance/index.js");const m=s.Z.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"message",user:"multiple",priority:"20"},schema:{users:s.Z.ROWS,subject:s.Z.REQUIRED_STRING,message:s.Z.REQUIRED_STRING,emailOnly:{...s.Z.OPTIONAL_BOOL,default:!1},all_email_accounts:s.Z.OPTIONAL_BOOL}}),_={...s.Z.OPTIONAL_BOOL,default:!0},i=s.Z.get({id:"TICKETS",url:"/CMD_TICKET_MANAGE",response:{tickets:[],info:{columns:[],pagination:{},tickets:{}}},pagination:!0,schema:{show_open:_,show_hold:_,show_closed:_},after:r=>r.flow(r.wrap("rows"),r.moveProp({"rows.info.new_all":"filters.all.new","rows.info.num_all":"filters.all.total","rows.info.new_hold":"filters.hold.new","rows.info.num_hold":"filters.hold.total","rows.info.new_open":"filters.open.new","rows.info.num_open":"filters.open.total","rows.info.new_closed":"filters.closed.new","rows.info.num_closed":"filters.closed.total","rows.info.active":"enabled","rows.info.html":"message"}),r.processTableInfo("rows"),r.mapProps({rows:r.flow(r.toArray,r.mapArrayProps({new:r.convert.toAppBoolean,priority:r.convert.toAppNumber,replies:r.convert.toAppNumber,last_message:r.convert.toAppDate,subject:r.convert.toAppString,user:r.convert.toAppString})),filters:r.mapValues(r.mapProps({new:r.convert.toAppNumber,total:r.convert.toAppNumber})),enabled:r.convert.toAppBoolean,message:r.convert.toAppHtml}))}),v=s.Z.get({id:"TICKET_MESSAGES",url:"/CMD_TICKET_MANAGE",response:[],params:{action:"view",type:"ticket"},schema:{number:s.Z.REQUIRED_STRING},after:r=>r.flow(r.deleteProp("info"),r.toArray,E=>E.reverse(),r.mapArrayProps({message:r.convert.toAppHtml,time:E=>(0,c.Z)(Date.now(),r.convert.toAppDate(E))}))}),f=s.Z.select({url:"/CMD_TICKET_MANAGE",params:{close:!0}}),u=s.Z.post({url:"/CMD_TICKET_MANAGE",params:{action:"status",status:"open"},schema:{number:s.Z.REQUIRED_STRING}}),l=s.Z.select({url:"/CMD_TICKET_MANAGE",params:{read:!0}}),n=s.Z.post({url:"/CMD_TICKET_CREATE",params:{action:"create",type:"request"},before:({email_only:r})=>({encoding:r?"utf-8":null}),schema:{user:s.Z.REQUIRED_STRING,priority:{...s.Z.REQUIRED_STRING,validator:r=>["10","20","30"].includes(r)},subject:s.Z.REQUIRED_STRING,message:s.Z.REQUIRED_STRING,email_only:s.Z.OPTIONAL_BOOL}}),e=s.Z.post({url:"/CMD_TICKET_MANAGE",params:{action:"reply",type:"reply",priority:"none"},schema:{number:s.Z.REQUIRED_STRING,user:s.Z.REQUIRED_STRING,subject:s.Z.REQUIRED_STRING,status:{type:String,required:!1,default:"open",validator:r=>["open","closed"].includes(r)},message:s.Z.REQUIRED_STRING}}),t=s.Z.get({id:"TICKET_DEFAULTS",url:"/CMD_TICKET_CREATE",after:r=>r.flow(r.moveProp("EML_ONLY_CHEKCED","email.set"),r.moveProp("SHOW_EML_ONLY","email.show"),r.moveProp("TCKTTO","to"),r.moveProp("TCKTTYPE","type"),E=>({...E,selected:Object.values(E.to).find(g=>!!g.selected)}),r.mapProps({email:r.mapProps({set:r.convert.toAppBoolean,show:r.convert.toAppBoolean}),to:E=>Object.values(E).map(g=>({label:g.text,value:g.value})),selected:E=>({label:E.text,value:E.value})}))}),o=s.Z.get({id:"TICKETS_EMAIL_SETTING",url:"/CMD_TICKET",after:r=>r.flow(r.project({email:"settings.EMAIL",checked:"settings.EMAILCHECKED"}),r.mapProps({featureEnabled:r.feedWith(1,({checked:E})=>typeof E!="undefined"),email:r.setDefault(""),checked:r.flow(r.setDefault("no"),r.convert.toAppBoolean)}))}),d=s.Z.post({url:"/CMD_TICKET_MANAGE",params:{action:"email"},schema:{email:s.Z.REQUIRED_STRING,ON:s.Z.REQUIRED_BOOL}}),x=s.Z.get({id:"TICKETS_ACTIVE_STATUS",url:"/CMD_TICKET_MANAGE",response:{html:"",active:!1},after:r=>E=>({html:E.info.html,active:r.convert.toAppBoolean(E.info.active)})}),A=s.Z.post({url:"/CMD_TICKET_MANAGE",params:{action:"active"},schema:{active:s.Z.REQUIRED_BOOL,html:s.Z.REQUIRED_STRING}}),h=s.Z.get({id:"TICKET_SYSTEM_STATUS",url:"/CMD_TICKET_CREATE",params:{type:"Ticket"},notifyError:!0})},"./js/api/commands/validation/index.js":function(y,p,a){a.d(p,{i9:function(){return d},ty:function(){return t},l7:function(){return n},OE:function(){return o},ub:function(){return r},oH:function(){return f},U5:function(){return u},k_:function(){return v},PR:function(){return e},uo:function(){return h},Jj:function(){return A},rV:function(){return x}});var s=a("./js/api/command/index.js"),c=a("../node_modules/punycode/punycode.es6.js"),m=a("./js/api/commands/converters/index.ts"),_={isValid(g){return typeof g.error=="undefined"},getMessage(g){return(0,m.S8)(g.error||"")}};const i=s.Z.get({url:"/CMD_JSON_VALIDATE",schema:{value:s.Z.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:_.isValid,message:_.getMessage}}),v=i.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}}),f=i.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}}),u=i.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0}),l=i.extend({params:{type:"dns"},domain:!0,schema:{record:s.Z.REQUIRED_STRING}}),n=l.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:s.Z.REQUIRED_STRING}}),e=n.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:({value:g})=>({value:"10",mx_value:g})}),t=l.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:s.Z.REQUIRED_STRING,value:null}}),o=i.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}}),d=i.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}}),x=i.extend({id:"VALIDATE_USERNAME",params:{type:"username"}}),A=i.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}}),h=i.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}}),r=i.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:({value:g})=>({value:c.ZP.toASCII(g)})}),E=i.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}})},"./js/api/commands/converters/customItems.ts":function(y,p,a){a.d(p,{CR:function(){return i}});var s=a("../node_modules/ramda/es/index.js"),c=a("./js/api/commands/converters/index.ts"),m=a("./js/api/commands/utils/transduce.ts"),_=a("./js/api/commands/converters/toSelectData.ts");const i=u=>{const l={name:u.name,type:u.type==="listbox"?"select":u.type,label:u.string,description:u.desc||"",value:u.type==="checkbox"?(0,c.sw)(u.checked||"no"):u.value||""};return l.type==="select"?s.BPw(l,(0,_.M1)(u.select||{})):l},v=u=>(0,m.vr)([(0,m.uD)(l=>/^item\d+val$/.test(l)),(0,m.r5)(l=>{const n=l,e=l.replace("val","txt"),t=u[n],o=u[e];return{[t]:o}})],Object.keys(u)),f=(u,l)=>s.qCK(e=>{const t={name:e.name,type:e.type==="listbox"?"select":e.type,description:e.desc||"",value:e.value||"",label:e.string};return e.type==="listbox"?(t.value=e.default,t.options=v(e)):e.type==="checkbox"&&(t.value=e.checked==="yes"),t},s.BPw({name:u}),(0,m.vr)([(0,m.r5)(e=>{const[t,o]=s.Vl2("=",e);return{[t]:o}})]),s.Vl2("&"))(l);p.ZP={fromObject:i,fromString:f}},"./js/api/commands/converters/index.ts":function(y,p,a){a.d(p,{l$:function(){return n.ZP},t0:function(){return s.t0},S8:function(){return s.S8},ql:function(){return s.ql},sw:function(){return s.sw},Qu:function(){return s.Qu},He:function(){return s.He},M1:function(){return l.M1},sf:function(){return t},cc:function(){return u}});var s=a("./js/api/commands/converters/primitive.ts"),c=a("../node_modules/monet/dist/monet.js"),m=a("./js/api/commands/types.ts");const _=o=>typeof o=="object"?c.Either.Right(o):c.Either.Left(new Error("Passed param is not an object")),i=o=>typeof o.usage=="string"?c.Either.Right(o):c.Either.Left(new Error("usage property is required")),v=o=>({usage:(0,s.He)(o.usage),limit:(0,s.Qu)(o.limit)}),f=({usage:o,limit:d})=>{let x=m.H.Normal;const A=Math.floor(o/d*100);return A>=100?x=m.H.OverUsed:A>80&&(x=m.H.AlmostUsed),{usage:o,limit:d,status:x}},u=o=>{const d=c.Either.Right(o).flatMap(_).flatMap(i).map(v).map(f);if(d.isLeft())throw d.left();return d.right()};var l=a("./js/api/commands/converters/toSelectData.ts"),n=a("./js/api/commands/converters/customItems.ts"),e=a("../node_modules/ramda/es/index.js");const t=o=>d=>{const{info:x}=d,A=e.CEd(["info"],d);return{columns:x.columns,rowsCount:Number(x.rows),rows:e.UID(o,e.VO0(A))}}},"./js/api/commands/converters/toSelectData.ts":function(y,p,a){a.d(p,{M1:function(){return f}});var s=a("../node_modules/monet/dist/monet.js"),c=a.n(s),m=a("./js/api/commands/utils/transduce.ts"),_=a("../node_modules/ramda/es/index.js");const i=u=>s.Maybe.Some(u).flatMap(l=>{const n=l.find(e=>e.selected==="yes");return n?s.Maybe.Some(n):s.Maybe.None()}).flatMap(l=>s.Maybe.fromNull(l.value)).orSome(""),v=(0,m.vr)([(0,m.r5)(u=>({[u.value]:u.text}))]),f=u=>{const l=(0,_.VO0)(u);return{value:i(l),options:v(l)}}},"./js/api/commands/types.ts":function(y,p,a){a.d(p,{H:function(){return s}});var s;(function(c){c.Normal="normal",c.AlmostUsed="almost_used",c.OverUsed="overused"})(s||(s={}))},"./js/api/commands/utils/transduce.ts":function(y,p,a){a.d(p,{Re:function(){return _},r5:function(){return c},uD:function(){return m},vr:function(){return l},zh:function(){return f}});var s=a("../node_modules/ramda/es/index.js");const c=n=>e=>(t,o)=>{const d=n(o);return e(t,d)},m=n=>e=>(t,o)=>n(o)?e(t,o):t,_=(n,e)=>(n.push(e),n),i=(n,e)=>s.BPw(n,e),v=(n,e,t,o)=>{const d=s.qCK(...t);return o.reduce(d(e),n)},f=s.WAo(v),u=f([],_),l=f({},i)},"./js/components/local/change-user-password-dialog.vue":function(y,p,a){a.d(p,{Z:function(){return l}});var s=function(){var e=this,t=e._self._c;return t("ui-dialog",{attrs:{id:"CHANGE_USER_PASSWORD_DIALOG",title:e.$gettext("Change Password")},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Username"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{disabled:""},model:{value:e.username,callback:function(o){e.username=o},expression:"username"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{attrs:{vertical:"",group:"change-user-password",validators:{required:!0,api:e.$commands.validatePassword}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("New Password"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-password",{attrs:{"show-generator":""},model:{value:e.password,callback:function(o){e.password=o},expression:"password"}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{"validate-group":"change-user-password",theme:"safe"},on:{click:e.changePassword}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])})},c=[],m=a("./js/api/commands/reseller/password.js"),_=a("./js/api/commands/validation/index.js"),i={commands:{validatePassword:_.uo},data:()=>({username:"",password:""}),computed:{requestData(){return{username:this.username,passwd:this.password,passwd2:this.password}}},methods:{show(n){Object.assign(this.$data,this.$options.data.apply(this)),this.username=n,this.$dialog("CHANGE_USER_PASSWORD_DIALOG").open()},changePassword(){(0,m.Z)(this.requestData)}}},v=i,f=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),u=(0,f.Z)(v,s,c,!1,null,null,null),l=u.exports},"./js/components/local/create-message-dialog.vue":function(y,p,a){a.d(p,{Z:function(){return u}});var s=function(){var n=this,e=n._self._c;return e("ui-dialog",{attrs:{id:"CREATE_MESSAGE_DIALOG",size:"normal",title:n.$gettext("Send a Message")},on:{"dialog:close":n.resetData},scopedSlots:n._u([{key:"content",fn:function(){return[e("ui-form-element",{scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(n.$gettext("To:"))}})]},proxy:!0},{key:"content",fn:function(){return[e("div",[e("ui-grid",{attrs:{wrap:""}},n._l(n.users,function(t){return e("ui-badge",{key:t,attrs:{theme:"neutral",size:"big",icon:"person"}},[n._v(`
                            `+n._s(t)+`
                        `)])}),1)],1)]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{group:"message",validators:{required:!0}},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(n.$gettext("Subject:"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-text",{model:{value:n.subject,callback:function(t){n.subject=t},expression:"subject"}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{group:"message",validators:{required:!0}},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(n.$gettext("Message:"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-textarea",{attrs:{rows:"10"},model:{value:n.message,callback:function(t){n.message=t},expression:"message"}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{underline:!1},scopedSlots:n._u([{key:"title",fn:function(){return[e("span")]},proxy:!0},{key:"content",fn:function(){return[e("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}]},[e("input-checkbox",{model:{value:n.emailOnly,callback:function(t){n.emailOnly=t},expression:"emailOnly"}},[e("span",{domProps:{textContent:n._s(n.$gettext("E-mail Only"))}})]),n._v(" "),n.emailOnly?e("input-checkbox",{model:{value:n.allEmailAccounts,callback:function(t){n.allEmailAccounts=t},expression:"allEmailAccounts"}},[e("span",{domProps:{textContent:n._s(n.$gettext("All Email Accounts"))}}),n._v(" "),e("ui-tooltip",[e("span",{domProps:{textContent:n._s(n.$gettext("Message will be delivered to all User/Reseller accounts that were selected plus all E-Mail accounts that exist under domains for selected User accounts."))}})])],1):n._e()],1)]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[e("ui-button",{attrs:{theme:"primary","validate-group":"message"},on:{click:n.sendMessage}},[e("span",{domProps:{textContent:n._s(n.$gettext("Send Message"))}})])]},proxy:!0}])})},c=[],m=a("./js/api/commands/reseller/tickets.js"),_={props:{users:{type:Array,required:!1,default:()=>[]}},data:()=>({subject:"",message:"",emailOnly:!1,allEmailAccounts:!1}),methods:{sendMessage(){(0,m.J9)({users:this.users,subject:this.subject,priority:"20",message:this.message,emailOnly:this.emailOnly,email_only:this.emailOnly,all_email_accounts:this.emailOnly&&this.allEmailAccounts})},resetData(){Object.assign(this.$data,this.$options.data.apply(this))}}},i=_,v=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),f=(0,v.Z)(i,s,c,!1,null,null,null),u=f.exports},"./js/components/local/suspend-user-dialog.vue":function(y,p,a){a.d(p,{Z:function(){return n}});var s=function(){var t=this,o=t._self._c;return o("ui-dialog",{attrs:{id:"SUSPEND_USER_DIALOG",size:t.override?"normal":"small",title:t.$gettext("Suspend user")},scopedSlots:t._u([{key:"content",fn:function(){return[o("div",[o("ui-form-element",{attrs:{vertical:""},scopedSlots:t._u([{key:"title",fn:function(){return[o("span",{domProps:{textContent:t._s(t.$gettext("Reason"))}})]},proxy:!0},{key:"content",fn:function(){return[o("input-select",{attrs:{options:t.reasons},model:{value:t.reason,callback:function(d){t.reason=d},expression:"reason"}})]},proxy:!0}])}),t._v(" "),o("ui-form-element",{attrs:{vertical:""},scopedSlots:t._u([{key:"title",fn:function(){return[o("span",{domProps:{textContent:t._s(t.$gettext("Details"))}})]},proxy:!0},{key:"content",fn:function(){return[o("input-textarea",{attrs:{rows:"3"},model:{value:t.details,callback:function(d){t.details=d},expression:"details"}})]},proxy:!0}])}),t._v(" "),o("ui-form-element",{attrs:{vertical:""},scopedSlots:t._u([{key:"content",fn:function(){return[o("input-checkbox",{model:{value:t.override,callback:function(d){t.override=d},expression:"override"}},[o("span",{domProps:{textContent:t._s(t.$gettext("Override Suspension Message"))}})])]},proxy:!0}])}),t._v(" "),t.override?[o("ui-form-element",{attrs:{vertical:""},scopedSlots:t._u([{key:"title",fn:function(){return[o("span",{domProps:{textContent:t._s(t.$gettext("Subject"))}})]},proxy:!0},{key:"content",fn:function(){return[o("input-text",{model:{value:t.subject,callback:function(d){t.subject=d},expression:"subject"}})]},proxy:!0}],null,!1,3157883571)}),t._v(" "),o("ui-form-element",{attrs:{vertical:""},scopedSlots:t._u([{key:"title",fn:function(){return[o("span",{domProps:{textContent:t._s(t.$gettext("Message"))}})]},proxy:!0},{key:"content",fn:function(){return[o("input-textarea",{model:{value:t.message,callback:function(d){t.message=d},expression:"message"}})]},proxy:!0}],null,!1,3154863588)}),t._v(" "),o("ui-form-element",{attrs:{vertical:""},scopedSlots:t._u([{key:"content",fn:function(){return[o("input-checkbox",{model:{value:t.notify,callback:function(d){t.notify=d},expression:"notify"}},[o("span",{domProps:{textContent:t._s(t.$gettext("Notify"))}})])]},proxy:!0}],null,!1,1649867403)})]:t._e()],2)]},proxy:!0},{key:"buttons",fn:function(){return[o("ui-button",{attrs:{theme:"safe"},on:{click:function(d){return t.$emit("suspend",t.suspendData)}}},[o("span",{domProps:{textContent:t._s(t.$gettext("Suspend"))}})])]},proxy:!0}])})},c=[],m=a("./js/api/commands/reseller/suspension-message.js"),_=a("../node_modules/ramda/es/index.js");function i(e={}){const t={none:this.$gettext("None"),abuse:this.$gettext("Abuse"),billing:this.$gettext("Billing Issue"),inactive:this.$gettext("Inactive"),other:this.$gettext("Other"),spam:this.$gettext("Spam"),user_bandwidth:this.$gettext("User Bandwidth"),user_quota:this.$gettext("User Quota")};return _.BPw(e,this.$_useStore("user").mode==="admin"?{...t,reseller_bandwidth:this.$gettext("Reseller Bandwidth"),reseller_quota:this.$gettext("Reseller Quota")}:t)}var v={$exports:{reasons:i},props:{apiReasons:{type:Object,required:!1,default:()=>({})}},data:()=>({reason:"none",details:"",override:!1,subject:"",message:"",notify:!1}),computed:{reasons(){return i.call(this,this.apiReasons)},suspendData(){const e={reason:this.reason,details:this.details};return this.override&&(e.subject=this.subject,e.message=this.message,e.notify=this.notify),e}},watch:{override(e){e&&!this.subject&&this.loadMessage()}},methods:{async loadMessage(){const e=await(0,m.FC)();this.subject=e.subject,this.message=e.message,this.notify=e.settings.notify==="yes"}}},f=v,u=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),l=(0,u.Z)(f,s,c,!1,null,null,null),n=l.exports}}]);
