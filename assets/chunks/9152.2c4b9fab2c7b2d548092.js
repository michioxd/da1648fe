(self.webpackChunk=self.webpackChunk||[]).push([[9152],{"./js/api/commands/user/backups.js":function(d,l,n){"use strict";n.d(l,{P8:function(){return c},_H:function(){return u},id:function(){return r},pi:function(){return p}});var t=n("./js/api/command/index.js");const o={url:"/CMD_SITE_BACKUP",domain:!0},u=t.Z.get({...o,id:"SITE_BACKUPS",domain:!0,response:[]}),r=t.Z.select({...o,params:{action:"backup",form_version:"4"}}),c=t.Z.post({id:"SITE_BACKUP",...o,params:{action:"view"},schema:{file:t.Z.REQUIRED_STRING},response:[],notifySuccess:!1}),p=t.Z.select({...o,params:{action:"restore",form_version:"3"},schema:{file:t.Z.REQUIRED_STRING}})},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/backup/index.vue?vue&type=style&index=0&id=52e1f3f6&prod&lang=scss&":function(){},"./js/pages/user/backup/index.vue":function(d,l,n){"use strict";n.r(l),n.d(l,{default:function(){return f}});var t=function(){var e=this,s=e._self._c;return s("app-page",{staticClass:"backup",attrs:{actions:[{label:e.$gettext("Restore Backup"),name:"user/backup/restore",icon:"#extract",theme:"primary"}]},scopedSlots:e._u([{key:"default",fn:function(){return[s("app-page-section",{staticClass:"backup-create",scopedSlots:e._u([{key:"footer:buttons",fn:function(){return[s("ui-button",{attrs:{theme:"safe"},on:{click:e.createBackup}},[s("span",{domProps:{textContent:e._s(e.$gettext("Create Backup"))}})])]},proxy:!0}])},[s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.$gettext("Include")))]},proxy:!0},{key:"content",fn:function(){return[s("div",[s("input-radio",{attrs:{value:!0},model:{value:e.allDomains,callback:function(i){e.allDomains=i},expression:"allDomains"}},[s("span",{domProps:{textContent:e._s(e.$gettext("All Domains"))}})]),e._v(" "),s("input-radio",{attrs:{value:!1},on:{change:e.openDialog},model:{value:e.allDomains,callback:function(i){e.allDomains=i},expression:"allDomains"}},[s("ui-link",{on:{click:e.openDialog}},[s("span",{domProps:{textContent:e._s(e.$gettext("Selected Domains"))}})]),e._v(" "),e.domains.length!==0?s("ui-tooltip",{attrs:{theme:"primary"}},[s("span",{domProps:{textContent:e._s(e.selectedDomainsString)}})]):e._e()],1)],1)]},proxy:!0}])}),e._v(" "),s("input-select-multiple",{staticClass:"backup-options",attrs:{options:{website:{label:e.$gettext("Website Data"),entries:{domain:e.$gettext("Domains Directory: Backs up all user files for all domains"),subdomain:e.$gettext("Subdomains Lists: Backs up the list of subdomains for each domain")}},email:{label:e.$gettext("E-mail"),entries:{email:e.$gettext("E-mail Accounts List for all domains (names and passwords)"),email_data:e.$gettext("E-mail Data: Includes the messages from the Inbox, IMAP Folders, and webmail data."),emailsettings:e.$gettext("E-mail Settings: Includes the filters and the catchall address."),forwarder:e.$gettext("Forwarders: Includes all forwarding addresses."),autoresponder:e.$gettext("Autoresponders: Includes all autoresponders and messages."),vacation:e.$gettext("Vacation Messages: Includes all vacation messages and times."),list:e.$gettext("Mailing Lists: Includes all mailing lists.")}},ftp:{label:e.$gettext("FTP"),entries:{ftp:e.$gettext("FTP Accounts"),ftpsettings:e.$gettext("FTP Settings")}},database:{label:e.$gettext("Database"),entries:{database:e.$gettext("Database Settings: Backs up all DB Users and DB Settings"),database_data:e.$gettext("Database Data")}},trash:{label:e.$gettext("Trash"),entries:{trash:e.$gettext("Deleted Trash Data")}}},"disabled-entries":e.disabledEntries,"max-items-visible":1/0,"hide-header":"","no-highlight":""},model:{value:e.backupOptions,callback:function(i){e.backupOptions=i},expression:"backupOptions"}})],1),e._v(" "),s("ui-dialog",{attrs:{id:"SELECT_DOMAINS_DIALOG",size:"normal","no-close-btn":"",title:e.$gettext("Select domains to backup")},scopedSlots:e._u([{key:"content",fn:function(){return[s("input-select-multiple",{attrs:{options:e.domainList,"max-items-visible":1/0},model:{value:e.domains,callback:function(i){e.domains=i},expression:"domains"}})]},proxy:!0}])})]},proxy:!0}])})},o=[],u=n("./js/api/commands/user/backups.js"),r={data:()=>({allDomains:!0,backupOptions:["domain","subdomain","email","email_data","emailsettings","forwarder","autoresponder","vacation","list","ftp","ftpsettings","database","database_data","trash"],domains:[]}),computed:{disabledEntries(){const a=(e,s)=>this.backupOptions.includes(e)?!1:s;return[a("email","email_data"),a("database","database_data")].filter(Boolean)},domainList(){return this.$_session.domainsList.reduce((a,e)=>({...a,[e]:this.$p6e.toU(e)}),{})},selectedDomainsString(){if(this.allSelected)return this.$gettext("All domains selected");const a=e=>e.map(this.$p6e.toU).join(",");if(this.domains.length>5){const e=this.domains.length-3;return this.$gettextInterpolate(this.$ngettext("%{domains} and %{n} more domain","%{domains} and %{n} more domains",e),{domains:a(this.domains.slice(0,3)),n:this.domains.length-3})}return a(this.domains)},allSelected(){return this.domains.length===Object.keys(this.domainList).length},requestDomains(){return this.allDomains||this.allSelected?null:this.domains}},watch:{backupOptions(a,e){e.includes("database")&&!a.includes("database")&&(this.backupOptions=a.filter(s=>s!=="database_data")),e.includes("email")&&!a.includes("email")&&(this.backupOptions=a.filter(s=>s!=="email_data"))}},methods:{createBackup(){(0,u.id)({select:this.backupOptions,domains:this.requestDomains})},openDialog(){this.allDomains=!1,this.$dialog("SELECT_DOMAINS_DIALOG").open()}}},c=r,p=n("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/backup/index.vue?vue&type=style&index=0&id=52e1f3f6&prod&lang=scss&"),m=n("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),g=(0,m.Z)(c,t,o,!1,null,null,null),f=g.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/backup/index.vue?vue&type=style&index=0&id=52e1f3f6&prod&lang=scss&":function(d,l,n){var t=n("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/backup/index.vue?vue&type=style&index=0&id=52e1f3f6&prod&lang=scss&");t.__esModule&&(t=t.default),typeof t=="string"&&(t=[[d.id,t,""]]),t.locals&&(d.exports=t.locals);var o=n("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,u=o("b772c7a8",t,!0,{})}}]);
