(self.webpackChunk=self.webpackChunk||[]).push([[8618],{"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/process-monitor.vue?vue&type=style&index=0&id=187a1754&prod&lang=scss&":function(){},"./js/pages/admin/process-monitor.vue":function(r,d,n){"use strict";n.r(d),n.d(d,{default:function(){return y}});var o={};n.r(o),n.d(o,{authenticate:function(){return v},getDefaults:function(){return i},getProcesses:function(){return c},removeAuth:function(){return g},sendSignal:function(){return _}});var u=function(){var e=this,t=e._self._c;return t("app-page",{attrs:{id:"process-monitor",actions:[{handler:e.removeAuth,label:e.$gettext("Remove Authentication"),icon:"#settings",visible:!e.$api.defaults.requireAuth,theme:"danger"},{handler:e.$dialog("AUTHENTICATE_DIALOG").open,label:e.$gettext("Authenticate to send signals"),icon:"#settings",visible:e.$api.defaults.requireAuth}]},scopedSlots:e._u([{key:"default",fn:function(){return[t("app-page-section",[e.$api.info.type==="linux"?t("div",{staticClass:"topInfo"},[t("ul",{staticClass:"label"},[t("li",{domProps:{textContent:e._s(e.$gettext("Top:"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("Tasks:"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("CPU(s):"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("KiB Mem:"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("KiB Swap:"))}})]),e._v(" "),t("ul",{staticClass:"value"},[t("li",{domProps:{textContent:e._s(e.$api.info.top)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.tasks)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.cpus)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.mem)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.swap)}})])]):t("div",{staticClass:"topInfo"},[t("ul",{staticClass:"label"},[t("li",{domProps:{textContent:e._s(e.$gettext("Last PID:"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("Load Average:"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("Processes:"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("Mem:"))}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$gettext("Swap:"))}})]),e._v(" "),t("ul",{staticClass:"value"},[t("li",{domProps:{textContent:e._s(e.$api.info.pid)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.load)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.processes)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.mem)}}),e._v(" "),t("li",{domProps:{textContent:e._s(e.$api.info.swap)}})])]),e._v(" "),t("ui-api-table",{directives:[{name:"margin",rawName:"v-margin",value:[3,,,],expression:"[3, , ,]"}],key:`process-table-${e.$api.defaults.requireAuth?"authenticated":"non-authenticated"}`,ref:"table",attrs:{command:e.$commands.getProcesses,columns:{signal:{hide:e.$api.defaults.requireAuth,label:" "},PID:{label:"PID",editable:!1},USER:"USER",PR:"PR",NI:"NI",VIRT:"VIRT",RES:"RES",SHR:"SHR",S:"S","%CPU":"%CPU","%MEM":"%MEM","TIME+":"TIME+",COMMAND:{label:"COMMAND",grow:!0}},"initial-sort":{key:"%CPU",order:"ASC"},"vertical-layout":e.clientStore.isPhone,"disable-select":""},scopedSlots:e._u([{key:"reload-timer",fn:function(){return[t("ui-refresh-timer",{attrs:{options:{1:e.$gettext("Every second"),2:e.$gettext("2 seconds"),3:e.$gettext("3 seconds"),4:e.$gettext("4 seconds"),5:e.$gettext("5 seconds"),10:e.$gettext("10 seconds"),15:e.$gettext("15 seconds"),30:e.$gettext("30 seconds"),60:e.$gettext("1 minute")},"initial-delay":"15","on-refresh":e.reload}})]},proxy:!0},{key:"col:signal",fn:function({PID:p}){return[t("ui-actions",{attrs:{position:"right"}},e._l(e.$api.defaults.signals,function(f,R){return t("ui-link",{key:f,on:{click:function(C){return e.sendSignal(p,R)}}},[e._v(`
                            `+e._s(f)+`
                        `)])}),1)]}}])})],1),e._v(" "),e.$api.defaults.requireAuth?t("ui-dialog",{attrs:{id:"AUTHENTICATE_DIALOG",title:e.$gettext("Authenticate to send signals")},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-form-element",{attrs:{vertical:"",group:"authenticateRoot",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Root Password"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-password",{model:{value:e.rootpass,callback:function(p){e.rootpass=p},expression:"rootpass"}})]},proxy:!0}],null,!1,2998352607)})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{"validate-group":"authenticateRoot",theme:"safe"},on:{click:e.authRootUser}},[t("span",{domProps:{textContent:e._s(e.$gettext("Authenticate"))}})])]},proxy:!0}],null,!1,3571923285)}):e._e()]},proxy:!0}])})},m=[],x=n("./js/stores/index.ts"),l=n("./js/api/command/index.js");const a="/CMD_PROCESS_MONITOR",c=l.Z.get({id:"PROCESS_MONITOR",url:a,params:{sor1:9,sort1dir:-1},pagination:!0,after:s=>s.flow(s.project({rows:"processes",info:"info"}),s.processTableInfo("rows"),s.mapProp("rows",s.toArray),s.mapProp("info",s.flow(s.convert.toLines,s.filter(s.notEmpty),e=>e[0].startsWith("top")?{type:"linux",top:e[0].slice(6),tasks:e[1].slice(7),cpus:e[2].slice(9),mem:e[3].slice(11),swap:e[4].slice(11)}:(e=[...e[0].split(";"),...e.slice(1)].map(t=>t.trim()).filter(Boolean),{type:"bsd",pid:e[0].slice(10),load:e[1].slice(16),processes:e[2].split(":").pop().trim(),mem:e[3].slice(5),swap:e[4].slice(6)}))))}),i=l.Z.get({id:"PROCESS_MONITOR_DEFAULTS",url:a,after:s=>s.flow(s.project({requireAuth:"require_root_auth",signals:"value",defaultSignal:"value",columns:"processes.info.columns"}),s.mapProps({requireAuth:s.isEqual("yes"),signals:s.transformObject(({value:e,text:t})=>({[e]:t})),defaultSignal:s.flow(s.find(s.getProp("selected")),s.getProp("value"))}))}),v=l.Z.post({url:a,params:{authenticate:!0},schema:{rootpass:l.Z.REQUIRED_STRING}}),g=l.Z.post({url:a,params:{authenticate:!1}}),_=l.Z.post({url:a,params:{signal:!0},schema:{select:l.Z.ROWS,value:l.Z.REQUIRED_STRING}});var j={preload:[c,i],api:[{command:c,bind:{"response.info":"info",isLoading:"loading"}},{command:i,bind:"defaults"}],commands:o,data(){return{rootpass:""}},computed:{...(0,x.Kc)(["client"])},methods:{reload(){return this.$refs.table.reloadTable()},authRootUser(){v({rootpass:this.rootpass}).then(i)},removeAuth(){g().then(i)},sendSignal(s,e){_({select:[s],value:e}).then(this.reload)}}},h=j,$=n("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/process-monitor.vue?vue&type=style&index=0&id=187a1754&prod&lang=scss&"),P=n("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),S=(0,P.Z)(h,u,m,!1,null,null,null),y=S.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/process-monitor.vue?vue&type=style&index=0&id=187a1754&prod&lang=scss&":function(r,d,n){var o=n("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/process-monitor.vue?vue&type=style&index=0&id=187a1754&prod&lang=scss&");o.__esModule&&(o=o.default),typeof o=="string"&&(o=[[r.id,o,""]]),o.locals&&(r.exports=o.locals);var u=n("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,m=u("66052cce",o,!0,{})}}]);
