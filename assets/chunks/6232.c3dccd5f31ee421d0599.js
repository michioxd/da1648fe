(self.webpackChunk=self.webpackChunk||[]).push([[6232],{"./js/api/commands/user/ftp.js":function(m,l,s){"use strict";s.d(l,{$j:function(){return g},D0:function(){return u},Gw:function(){return y},T8:function(){return i},Ti:function(){return h},UH:function(){return x},VP:function(){return o},o1:function(){return a},sG:function(){return c}});var e=s("./js/api/command/index.js");const u=e.Z.get({id:"FTP_ACCOUNT",url:"/CMD_FTP_SHOW",domain:!0,schema:{user:e.Z.REQUIRED_STRING}}),i=e.Z.get({id:"FTP_ACCOUNTS",url:"/CMD_FTP",response:[],params:{full_json:!0},domain:!0,after:n=>n.flow(n.project({accounts:"users",anonLogin:"ANONLOGIN"}),n.mapProp("accounts",n.flow(n.mapValues((p,_)=>({login:_,...p})),n.toArray,n.mapArrayProps({suspended:n.convert.toAppBoolean}))))}),a=e.Z.post({url:"/CMD_FTP",params:{action:"create"},domain:!0,schema:{user:e.Z.REQUIRED_STRING,passwd:e.Z.REQUIRED_STRING,passwd2:e.Z.REQUIRED_STRING,type:e.Z.REQUIRED_STRING,custom_val:e.Z.OPTIONAL_STRING},notifySuccess:!1}),c=a.extend({params:{action:"modify"},schema:{passwd:e.Z.OPTIONAL_STRING,passwd2:e.Z.OPTIONAL_STRING}}),v=e.Z.select({url:"/CMD_FTP",domain:!0,params:{action:"delete"},notifySuccess:!1,notifyError:!1}),h=v.extend({params:{suspend:!0}}),x=v.extend({params:{unsuspend:!0}}),g=v.extend({params:{delete:!0}}),y=e.Z.get({id:"FTP_SETTINGS",url:"/CMD_FTP_SETTINGS",domain:!0,after:n=>p=>({access:n.convert.toAppBoolean(p.Anonymous),upload:n.convert.toAppBoolean(p.AnonymousUpload),message:n.flow(n.convert.toAppString,n.convert.toAppText)(p.message)})}),o=e.Z.post({url:"/CMD_FTP_SETTINGS",params:{action:"modify"},domain:!0,schema:{anon:e.Z.REQUIRED_BOOL,anonup:e.Z.REQUIRED_BOOL,message:e.Z.REQUIRED_STRING}}),d=e.Z.post({url:"/CMD_CHANGE_FTP_PASSWORD",schema:{ftp:e.Z.REQUIRED_STRING,password1:e.Z.REQUIRED_STRING,password2:e.Z.REQUIRED_STRING}})},"./js/vue-globals/mixins/local/inputValidation.js":function(m,l,s){"use strict";s.r(l),s.d(l,{$inputValidation:function(){return i}});var e=s("./js/vue-globals/helpers.js"),u=s("./js/stores/index.ts");const i={inject:{groupID:{default:null},inputID:{default:null},validators:{default:()=>({})}},props:{id:{type:String,required:!1,default(){return this.inputID}},group:{type:String,required:!1,default(){return this.groupID}},novalidate:{type:Boolean,required:!1,default(){return!Object.keys(this.validators).length}}},computed:{validationStore(){return(0,u.oR)(PiniaStores.VALIDATION)},valid(){return this.validationStore.isValid(this.group,this.id)},errorState(){return!this.novalidate&&this.isUpdated&&!this.valid},isUpdated(){var a;const c=(a=this.validationStore.groups[this.group])==null?void 0:a[this.id];return typeof c=="undefined"?!1:c.updated}},methods:{$validate(a){this.id&&!this.novalidate&&this.validationStore.validate(this.groupID,this.id,a,this.validators)}},created(){if(!this.novalidate){const{validate:a}=this.$options;a&&this.$watch(a,(0,e.Ds)(this.$validate,{trailing:!0,leading:!1,delay:200}),{immediate:!0})}},destroyed(){this.novalidate||this.validationStore.deleteInput(this.group,this.id)}}},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&":function(){},"./js/components/local/inputs/input-text-editor.vue":function(m,l,s){"use strict";s.d(l,{Z:function(){return D}});var e=function(){var t=this,r=t._self._c;return r("div",{staticClass:"input-text-editor"},[t.$slots.header||t.$scopedSlots.header?r("div",{staticClass:"input-text-editor-header"},[t._t("header")],2):t._e(),t._v(" "),r("codemirror",{ref:"editor",attrs:{value:t.value,options:{lineNumbers:!0,readOnly:t.readOnly,mode:t.cmMode,theme:t.theme}},on:{input:function(j){return t.$emit("input",j)}}}),t._v(" "),!t.disableModes||!t.disableThemes?r("div",{staticClass:"input-text-editor-bottom-bar"},[t._t("bottom"),t._v(" "),r("span",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}]}),t._v(" "),t.disableModes?t._e():r("input-select",{staticClass:"input-text-editor-bottom-bar-select",attrs:{options:t.modes},scopedSlots:t._u([{key:"additions:left",fn:function(){return[r("ui-button",{attrs:{disabled:""}},[r("span",{domProps:{textContent:t._s(t.$gettext("Mode:"))}})])]},proxy:!0}],null,!1,42350692),model:{value:t.editorMode,callback:function(j){t.editorMode=j},expression:"editorMode"}}),t._v(" "),t.disableThemes?t._e():r("input-select",{staticClass:"input-text-editor-bottom-bar-select --wide",attrs:{options:t.themes},scopedSlots:t._u([{key:"additions:left",fn:function(){return[r("ui-button",{attrs:{disabled:""}},[r("span",{domProps:{textContent:t._s(t.$gettext("Theme:"))}})])]},proxy:!0}],null,!1,3964340662),model:{value:t.theme,callback:function(j){t.theme=j},expression:"theme"}})],2):t._e()],1)},u=[],i=s("../node_modules/vue-codemirror/dist/vue-codemirror.js"),a=s("../node_modules/codemirror/mode/javascript/javascript.js"),c=s("../node_modules/codemirror/mode/htmlmixed/htmlmixed.js"),v=s("../node_modules/codemirror/mode/css/css.js"),h=s("../node_modules/codemirror/mode/php/php.js"),x=s("../node_modules/codemirror/mode/perl/perl.js"),g=s("../node_modules/codemirror/mode/properties/properties.js"),y=s("../node_modules/codemirror/mode/xml/xml.js"),o=s("../node_modules/codemirror/mode/sql/sql.js"),d=s("./js/modules/utils/index.js"),n=s("../node_modules/vue/dist/vue.common.prod.js"),p=s("./js/vue-globals/mixins/local/inputValidation.js"),_=s("./js/context/index.ts"),R=s("./js/modules/dark-mode.ts");const T=["default","base16-light","base16-dark","monokai","solarized"],S=["text","html","javascript","css","php","perl","ini","xml","sql","mysql","json"],b=f=>t=>f.includes(t);i.codemirror.beforeDestroy=void 0;var I={components:{codemirror:i.codemirror},mixins:[p.$inputValidation],validate:"value",props:{value:{type:String,required:!0,default:""},readOnly:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"text",validator:b(S)},disableModes:{type:Boolean,required:!1,default:!1},disableThemes:{type:Boolean,required:!1,default:!1}},data(){return{editorMode:this.mode,theme:"default"}},staticData:{modes:S,themes:T},computed:{cmMode(){switch(this.editorMode){case"json":return{name:"javascript",json:!0};case"mysql":return"sql";case"ini":return"properties";default:return this.editorMode}}},mounted(){(0,n.watch)(()=>_.T.options["code-editor/theme"],f=>{this.theme=f},{immediate:!0}),(0,R.Uu)(f=>{this.theme=f==="dark"?"base16-dark":_.T.options["code-editor/theme"]})}},E=I,A=s("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&"),P=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),N=(0,P.Z)(E,e,u,!1,null,null,null),D=N.exports},"./js/pages/user/ftp-settings.vue":function(m,l,s){"use strict";s.r(l),s.d(l,{default:function(){return g}});var e=function(){var o=this,d=o._self._c;return d("app-page",{scopedSlots:o._u([{key:"default",fn:function(){return[d("app-page-section",[d("ui-form-element",{attrs:{group:"ftpSettings",validators:{required:!0},underline:!1},scopedSlots:o._u([{key:"content",fn:function(){return[d("input-text-editor",{attrs:{mode:"text",theme:"chrome","disable-modes":"","disable-themes":""},scopedSlots:o._u([{key:"header",fn:function(){return[d("span",{domProps:{textContent:o._s(o.$gettext("Welcome Message"))}})]},proxy:!0}]),model:{value:o.message,callback:function(n){o.message=n},expression:"message"}})]},proxy:!0}])}),o._v(" "),d("ui-form-element",{attrs:{underline:!1},scopedSlots:o._u([{key:"title",fn:function(){return[d("span",{domProps:{textContent:o._s(o.$gettext("Allow:"))}})]},proxy:!0},{key:"content",fn:function(){return[d("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},[d("input-checkbox",{on:{change:function(n){o.upload=o.access&&o.upload}},model:{value:o.access,callback:function(n){o.access=n},expression:"access"}},[d("span",{domProps:{textContent:o._s(o.$gettext("Access"))}})]),o._v(" "),d("input-checkbox",{attrs:{disabled:!o.access},model:{value:o.upload,callback:function(n){o.upload=n},expression:"upload"}},[d("span",{domProps:{textContent:o._s(o.$gettext("Upload"))}})])],1)]},proxy:!0}])})],1)]},proxy:!0},{key:"footer:buttons",fn:function(){return[d("ui-button",{attrs:{theme:"safe"},on:{click:o.updateSettings}},[d("span",{domProps:{textContent:o._s(o.$gettext("Save"))}})])]},proxy:!0}])})},u=[],i=s("./js/api/commands/user/ftp.js"),a=s("./js/components/local/inputs/input-text-editor.vue"),c={preload:i.Gw,api:[{command:i.Gw,bind:"settings"}],components:{InputTextEditor:a.Z},data(){return{message:"",access:"",upload:"",allow:[]}},watch:{$domain:{async handler(){await(0,i.Gw)(),Object.assign(this,this.$api.settings)}}},created(){Object.assign(this,this.$api.settings)},methods:{updateSettings(){(0,i.VP)({anon:this.access,anonup:this.upload,message:this.message.replace(/\n/g,`\r
`)})}}},v=c,h=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),x=(0,h.Z)(v,e,u,!1,null,null,null),g=x.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&":function(m,l,s){var e=s("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&");e.__esModule&&(e=e.default),typeof e=="string"&&(e=[[m.id,e,""]]),e.locals&&(m.exports=e.locals);var u=s("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,i=u("bb557a88",e,!0,{})}}]);
