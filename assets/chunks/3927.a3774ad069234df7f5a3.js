(self.webpackChunk=self.webpackChunk||[]).push([[3927],{"./js/api/commands/dns/index.js":function(D,g,a){"use strict";a.d(g,{xK:function(){return y},kl:function(){return R},Vs:function(){return c},gd:function(){return u},Q6:function(){return s},ip:function(){return i},gW:function(){return h},s_:function(){return $},v2:function(){return l}});var r=a("./js/api/command/index.js"),v=a("./js/modules/constants.js"),f=a("./js/api/commands/converters/index.ts");const _=p=>({records:p.records.map(b=>({...b,id:b.combined})),internal:p.internal==="yes",full_mx_records:p.full_mx_records!=="0",dns_ttl:p.dns_ttl==="1",template:p.mx_templates?(0,f.M1)(p.mx_templates.mx_templates_select):!1,affect_pointers:p.DNS_AFFECT_POINTERS_DEFAULT!=="no"});var x=a("./js/composables/index.ts");const k=p=>p.replaceAll(/(^\"*)|(\"*$)/g,""),i=p=>p.map(b=>({...b,id:b.combined,value:b.type==="TXT"?k(b.value):b.value})),s=r.Z.get({id:"DNS_RECORDS",url:"/CMD_DNS_CONTROL",response:[],domain:!0,params:{full_mx_records:!0,ttl:!0},schema:{ptr:r.Z.OPTIONAL_STRING},after:p=>p.flow(p.wrap("options"),p.moveProp({"options.records":"records","options.allow_ttl_override":"ttl.allow","options.ttl_is_overridden":"ttl.overridden","options.ttl":"ttl.value","options.default_ttl":"ttl.default","options.dnssec":"dnssec","options.DNS_AFFECT_POINTERS_DEFAULT":"affectPointersDefault","options.dns_ns":"dns_ns","options.dns_ptr":"dns_ptr"}),p.mapProps({records:i,options:p.mapValues(p.isEqual("1")),dns_ds:p.feedWith(1,({dnssec:b})=>b==="1"),dnssec:b=>b==="1"||b==="2",ttl:p.mapProps({allow:p.isEqual("1"),overridden:p.isEqual("1")}),affectPointersDefault:p.isEqual("yes")}),p.moveProp({dnssec:"options.dnssec",dns_ds:"options.dns_ds",dns_ptr:"options.dns_ptr",dns_ns:"options.dns_ns"}))}),l=r.Z.post({url:"/CMD_DNS_CONTROL",params:{action:"ttl"},schema:{domain:r.Z.DOMAIN,ttl_select:r.Z.REQUIRED_STRING,ttl:r.Z.REQUIRED_STRING}}),u=r.Z.get({id:"MX_RECORDS",url:"/CMD_DNS_MX",schema:{domain:r.Z.DOMAIN},mapResponse:_}),d=()=>{const p=(0,x.yj)();return p.path.includes("mx-records")?"/CMD_DNS_MX":p.path.includes(`${v.ft.ADMIN}/`)?"/CMD_DNS_ADMIN":p.path.includes(`${v.ft.RESELLER}/`)?"/CMD_DNS_RESELLER":"/CMD_DNS_CONTROL"},R=r.Z.post({url:d,params:{action:"select",delete:!0},schema:{domain:r.Z.DOMAIN,records:r.Z.DNS_RECORDS,ptr:r.Z.OPTIONAL_STRING},before:({records:p})=>p.reduce((b,T)=>({...b,[`${T.type.toLowerCase()}recs`]:[...b[`${T.type.toLowerCase()}recs`]||[],T.id]}),{records:null})}),y=r.Z.post({url:d,params:{action:"add"},schema:{domain:r.Z.DOMAIN,type:r.Z.REQUIRED_STRING,name:r.Z.REQUIRED_STRING,value:r.Z.REQUIRED_STRING,mx_value:r.Z.OPTIONAL_STRING,ttl:r.Z.OPTIONAL_STRING,ptr_val:r.Z.OPTIONAL_STRING,affect_pointers:r.Z.OPTIONAL_BOOL},before:({type:p,value:b,name:T})=>p==="NS"?{name:b,value:T,mx_value:null}:p!=="MX"?{mx_value:null}:{}}),c=r.Z.post({url:d,params:{action:"edit"},schema:{domain:r.Z.DOMAIN,type:r.Z.REQUIRED_STRING,name:r.Z.REQUIRED_STRING,value:r.Z.REQUIRED_STRING,mx_value:r.Z.OPTIONAL_STRING,ttl:r.Z.OPTIONAL_STRING,ptr:r.Z.OPTIONAL_STRING,affect_pointers:r.Z.OPTIONAL_BOOL},before:({type:p,name:b,value:T,id:j})=>{const P={id:null,combined:null,mx_value:null};return p==="MX"&&([P.value,P.mx_value]=T.split(/\s+/)),p==="NS"&&(P.name=T,P.value=b),P[`${p.toLowerCase()}recs0`]=j,P},notifySuccess:!1,notifyError:!0}),h=r.Z.post({url:"/CMD_DNS_MX",domain:!0,params:{action:"internal"},schema:{internal:r.Z.REQUIRED_BOOL}}),$=r.Z.post({url:"/CMD_DNS_MX",domain:!0,params:{action:"mx_template"},schema:{mx_template:r.Z.REQUIRED_STRING,affect_pointers:r.Z.OPTIONAL_BOOL}})},"./js/api/commands/validation/index.js":function(D,g,a){"use strict";a.d(g,{i9:function(){return c},ty:function(){return R},l7:function(){return u},OE:function(){return y},ub:function(){return b},oH:function(){return i},U5:function(){return s},k_:function(){return k},PR:function(){return d},uo:function(){return p},Jj:function(){return $},rV:function(){return h}});var r=a("./js/api/command/index.js"),v=a("../node_modules/punycode/punycode.es6.js"),f=a("./js/api/commands/converters/index.ts"),_={isValid(j){return typeof j.error=="undefined"},getMessage(j){return(0,f.S8)(j.error||"")}};const x=r.Z.get({url:"/CMD_JSON_VALIDATE",schema:{value:r.Z.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:_.isValid,message:_.getMessage}}),k=x.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}}),i=x.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}}),s=x.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0}),l=x.extend({params:{type:"dns"},domain:!0,schema:{record:r.Z.REQUIRED_STRING}}),u=l.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:r.Z.REQUIRED_STRING}}),d=u.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:({value:j})=>({value:"10",mx_value:j})}),R=l.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:r.Z.REQUIRED_STRING,value:null}}),y=x.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}}),c=x.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}}),h=x.extend({id:"VALIDATE_USERNAME",params:{type:"username"}}),$=x.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}}),p=x.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}}),b=x.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:({value:j})=>({value:v.ZP.toASCII(j)})}),T=x.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}})},"./js/vue-globals/mixins/local/inputValidation.js":function(D,g,a){"use strict";a.r(g),a.d(g,{$inputValidation:function(){return f}});var r=a("./js/vue-globals/helpers.js"),v=a("./js/stores/index.ts");const f={inject:{groupID:{default:null},inputID:{default:null},validators:{default:()=>({})}},props:{id:{type:String,required:!1,default(){return this.inputID}},group:{type:String,required:!1,default(){return this.groupID}},novalidate:{type:Boolean,required:!1,default(){return!Object.keys(this.validators).length}}},computed:{validationStore(){return(0,v.oR)(PiniaStores.VALIDATION)},valid(){return this.validationStore.isValid(this.group,this.id)},errorState(){return!this.novalidate&&this.isUpdated&&!this.valid},isUpdated(){var _;const x=(_=this.validationStore.groups[this.group])==null?void 0:_[this.id];return typeof x=="undefined"?!1:x.updated}},methods:{$validate(_){this.id&&!this.novalidate&&this.validationStore.validate(this.groupID,this.id,_,this.validators)}},created(){if(!this.novalidate){const{validate:_}=this.$options;_&&this.$watch(_,(0,r.Ds)(this.$validate,{trailing:!0,leading:!1,delay:200}),{immediate:!0})}},destroyed(){this.novalidate||this.validationStore.deleteInput(this.group,this.id)}}},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/input-inline.vue?vue&type=style&index=0&id=fe4c4aa6&prod&lang=scss&":function(){},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/records-table.vue?vue&type=style&index=0&id=83fb5a84&prod&lang=scss&":function(){},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/input-ip.vue?vue&type=style&index=0&id=7be90e6c&prod&lang=scss&":function(){},"./js/api/commands/converters/customItems.ts":function(D,g,a){"use strict";a.d(g,{CR:function(){return x}});var r=a("../node_modules/ramda/es/index.js"),v=a("./js/api/commands/converters/index.ts"),f=a("./js/api/commands/utils/transduce.ts"),_=a("./js/api/commands/converters/toSelectData.ts");const x=s=>{const l={name:s.name,type:s.type==="listbox"?"select":s.type,label:s.string,description:s.desc||"",value:s.type==="checkbox"?(0,v.sw)(s.checked||"no"):s.value||""};return l.type==="select"?r.BPw(l,(0,_.M1)(s.select||{})):l},k=s=>(0,f.vr)([(0,f.uD)(l=>/^item\d+val$/.test(l)),(0,f.r5)(l=>{const u=l,d=l.replace("val","txt"),R=s[u],y=s[d];return{[R]:y}})],Object.keys(s)),i=(s,l)=>r.qCK(d=>{const R={name:d.name,type:d.type==="listbox"?"select":d.type,description:d.desc||"",value:d.value||"",label:d.string};return d.type==="listbox"?(R.value=d.default,R.options=k(d)):d.type==="checkbox"&&(R.value=d.checked==="yes"),R},r.BPw({name:s}),(0,f.vr)([(0,f.r5)(d=>{const[R,y]=r.Vl2("=",d);return{[R]:y}})]),r.Vl2("&"))(l);g.ZP={fromObject:x,fromString:i}},"./js/api/commands/converters/index.ts":function(D,g,a){"use strict";a.d(g,{l$:function(){return u.ZP},t0:function(){return r.t0},S8:function(){return r.S8},ql:function(){return r.ql},sw:function(){return r.sw},Qu:function(){return r.Qu},He:function(){return r.He},M1:function(){return l.M1},sf:function(){return R},cc:function(){return s}});var r=a("./js/api/commands/converters/primitive.ts"),v=a("../node_modules/monet/dist/monet.js"),f=a("./js/api/commands/types.ts");const _=y=>typeof y=="object"?v.Either.Right(y):v.Either.Left(new Error("Passed param is not an object")),x=y=>typeof y.usage=="string"?v.Either.Right(y):v.Either.Left(new Error("usage property is required")),k=y=>({usage:(0,r.He)(y.usage),limit:(0,r.Qu)(y.limit)}),i=({usage:y,limit:c})=>{let h=f.H.Normal;const $=Math.floor(y/c*100);return $>=100?h=f.H.OverUsed:$>80&&(h=f.H.AlmostUsed),{usage:y,limit:c,status:h}},s=y=>{const c=v.Either.Right(y).flatMap(_).flatMap(x).map(k).map(i);if(c.isLeft())throw c.left();return c.right()};var l=a("./js/api/commands/converters/toSelectData.ts"),u=a("./js/api/commands/converters/customItems.ts"),d=a("../node_modules/ramda/es/index.js");const R=y=>c=>{const{info:h}=c,$=d.CEd(["info"],c);return{columns:h.columns,rowsCount:Number(h.rows),rows:d.UID(y,d.VO0($))}}},"./js/api/commands/converters/toSelectData.ts":function(D,g,a){"use strict";a.d(g,{M1:function(){return i}});var r=a("../node_modules/monet/dist/monet.js"),v=a.n(r),f=a("./js/api/commands/utils/transduce.ts"),_=a("../node_modules/ramda/es/index.js");const x=s=>r.Maybe.Some(s).flatMap(l=>{const u=l.find(d=>d.selected==="yes");return u?r.Maybe.Some(u):r.Maybe.None()}).flatMap(l=>r.Maybe.fromNull(l.value)).orSome(""),k=(0,f.vr)([(0,f.r5)(s=>({[s.value]:s.text}))]),i=s=>{const l=(0,_.VO0)(s);return{value:x(l),options:k(l)}}},"./js/api/commands/types.ts":function(D,g,a){"use strict";a.d(g,{H:function(){return r}});var r;(function(v){v.Normal="normal",v.AlmostUsed="almost_used",v.OverUsed="overused"})(r||(r={}))},"./js/api/commands/utils/transduce.ts":function(D,g,a){"use strict";a.d(g,{Re:function(){return _},r5:function(){return v},uD:function(){return f},vr:function(){return l},zh:function(){return i}});var r=a("../node_modules/ramda/es/index.js");const v=u=>d=>(R,y)=>{const c=u(y);return d(R,c)},f=u=>d=>(R,y)=>u(y)?d(R,y):R,_=(u,d)=>(u.push(d),u),x=(u,d)=>r.BPw(u,d),k=(u,d,R,y)=>{const c=r.qCK(...R);return y.reduce(c(d),u)},i=r.WAo(k),s=i([],_),l=i({},x)},"./js/components/local/utils/cidr.ts":function(D,g,a){"use strict";a.d(g,{T:function(){return r},x:function(){return v}});const r=f=>{if(!f)return"";const _=[];let x=Number(f);for(let k=0;k<4;k++){const i=Math.min(x,8);_.push(256-2**(8-i)),x-=i}return _.join(".")},v=f=>{if(!f)return"";const _=(i,s)=>i.split(s).length-1,x=i=>(i>>>0).toString(2);return _((i=>i.split(".").map(Number))(f).map(i=>x(i)).join(""),"1")}},"./js/components/local/utils/mask-definition.ts":function(D,g,a){"use strict";a.d(g,{Xm:function(){return k}});const r={addressDefinition:(i,{buffer:s},l)=>{const u=/^([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$/;return l-1>-1&&s[l-1]!=="."&&(s[l-2]&&s[l-2]!=="."?i=s[l-2]+s[l-1]+i:i=s[l-1]+i),u.test(i)},netmaskDefinition:(i,{buffer:s},l)=>{const u=/^3[0-2]$|^[0-2][0-9]$|^[0-9]$/;return s[l-1]!=="/"&&(i=s[l-1]+i),u.test(i)},netmaskDelimiterDefinition:i=>i==="/"},v={addressDefinition:(i,{buffer:s},l)=>{const u=/[A-Fa-f0-9]/;return l===1&&s[0]===":"?!1:u.test(i)},addressDelimiterDefinition:(i,{buffer:s},l)=>i===":"?s[l-1]===":"?!s.join("").includes("::"):!0:/[A-Fa-f0-9]/.test(i)?{insert:[{pos:l,c:":"},{pos:l+1,c:i}],caret:l+2}:!1,netmaskDefinition:(i,{buffer:s},l)=>{const u=s;u.length===l?u.push(i):u[l]=i;const d=Number(u.join("").split("/").at(-1));return d>=0&&d<=128},netmaskDelimiterDefinition:(i,{buffer:s},l)=>{if(!l)return!1;if(s[l-1]===":"&&i==="/")return l>=3&&s[l-2]===":";const[u]=s.join("").split("/"),d=u.split(":").map(R=>R.replace(/_/g,"")).join(":");return i==="/"&&d.includes(":")}},f={ipv4Definition:(i,{buffer:s},l)=>{const u=/25[0-5]|2[0-4][0-9]|[01][0-9][0-9]/;return s[l-1]!=="-"?(i=s[l-1]+i,s[l-2]!=="-"?i=s[l-2]+i:i=`0${i}`):i=`00${i}`,u.test(i)},ipv6Definition:i=>/[A-Fa-f0-9]/.test(i),delimiterDefinition:i=>i==="-"},_={ipv4:{i:{validator:r.addressDefinition,cardinality:1},n:{validator:r.netmaskDefinition,cardinality:1},"=":{validator:r.netmaskDelimiterDefinition,cardinality:1,placeholder:"/"}},ipv6:{I:{validator:v.addressDefinition,cardinality:1,casing:"lower"},N:{validator:v.netmaskDefinition},":":{validator:v.addressDelimiterDefinition,cardinality:1,placeholder:":"},"-":{validator:v.netmaskDelimiterDefinition,cardinality:1,placeholder:"/"}}},x={"!":{validator:f.delimiterDefinition,cardinality:1,placeholder:""},r:{validator:f.ipv4Definition,cardinality:1,placeholder:""},R:{validator:f.ipv6Definition,cardinality:1,placeholder:""}},k=(i,s=!1)=>{let l={};return i.forEach(u=>{l={...l,..._[u]}}),s&&(l={...l,...x}),l}},"./js/components/local/dns/records-table.vue":function(D,g,a){"use strict";a.d(g,{Z:function(){return Ze}});var r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"records-table"}},[t("ui-r-table",{attrs:{rows:e.records,columns:[{id:"name",label:e.$gettext("Name"),grow:!0,editable:!1},e.enableTTL?{id:"ttl",label:e.$gettext("TTL"),width:"min-content"}:{},{id:"type",label:e.$gettext("Type"),editable:!1},{id:"value",label:e.$gettext("Value"),grow:!0,editable:!1}],"is-sortable":"","is-checkable":!e.disabled,"disable-pagination":"","checked-rows":e.checkedRecords,"rows-count":e.records.length,"vertical-layout":e.clientStore.isPhone,"not-checkable":e.notCheckableRows},on:{"update:checkedRows":function(o){e.checkedRecords=o}},scopedSlots:e._u([{key:"buttons:before",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}]},[e.disabled?e._e():t("ui-button",{staticStyle:{"min-width":"12rem"},attrs:{theme:"safe",size:"big"},on:{click:function(o){e.$dialog("ADD_DNS_RECORD_DIALOG").open()}}},[t("span",{staticClass:"wrap:nowrap",domProps:{textContent:e._s(e.$gettext("Add Record"))}})]),e._v(" "),e.pointers.length?[t("span",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],domProps:{textContent:e._s(e.$gettext("Pointer:"))}}),e._v(" "),t("input-select",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{options:e.pointersList},model:{value:e.pointerParam,callback:function(o){e.pointerParam=o},expression:"pointerParam"}})]:e._e(),e._v(" "),e.dnsControlDisabled?t("ui-tooltip",{directives:[{name:"margin",rawName:"v-margin:left",value:1,expression:"1",arg:"left"}],attrs:{theme:"danger"},scopedSlots:e._u([{key:"trigger",fn:function(){return[t("ui-badge",{attrs:{theme:"danger",size:"big"}},[t("span",{domProps:{textContent:e._s(e.$gettext("DNS Control Disabled"))}})])]},proxy:!0},{key:"default",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("DNS Control is disabled for this User. You can edit the zone because your master account has DNS Control."))}})]},proxy:!0}],null,!1,883674688)}):e._e()],2)]},proxy:!0},{key:"table:actions",fn:function(){return[e.checkedRecords.length===1?t("ui-table-action",{key:"copy-action",on:{click:e.copyRow}},[t("span",{domProps:{textContent:e._s(e.$gettext("Copy"))}})]):e._e(),e._v(" "),t("ui-table-action",{key:"del-action",on:{click:function(o){e.$dialog("DELETE_ITEMS_DIALOG").open()}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Delete"))}})])]},proxy:!0},{key:"row:actions",fn:function({item:o}){return[!e.disabled&&!e.notCheckableRows.includes(o)?t("ui-button-icon",{attrs:{icon:"pencil",title:e.$gettext("Edit"),disabled:e.disabled},on:{click:function(m){return e.editRecord(o)}}}):e._e()]}},{key:"col:name",fn:function({name:o,item:m}){return[t("inline-input",{key:`name-${o}-${m.value}`,attrs:{id:"name",value:o,type:m.type},on:{update:function(S){return e.updateRecordInline(m,S)}}},[t("span",{staticClass:"wrap:nowrap"},[e._v(e._s(o))])])]}},{key:"col:ttl",fn:function({ttl:o,item:m}){return[t("inline-input",{key:`ttl-${m.name}-${m.value}`,attrs:{id:"ttl",value:o,type:m.type},on:{update:function(S){return e.updateRecordInline(m,S)}}},[t("span",{staticClass:"wrap:nowrap"},[e._v(e._s(o))])])]}},{key:"col:value",fn:function({value:o,item:m}){return[t("inline-input",{key:`value-${m.name}-${o}`,attrs:{id:"value",value:o.replace(/\s+/," "),type:m.type},on:{update:function(S){return e.updateRecordInline(m,S)}}},[t("div",{domProps:{innerHTML:e._s(e.getValueString(m))},on:{copy:function(S){return e.getCopyString(m,S)}}})])]}}])}),e._v(" "),t("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("DNS record","DNS Records",e.checkedRecords.length)},on:{"click:confirm":e.deleteRecords}},[t("ui-form-element",{attrs:{vertical:""},scopedSlots:e._u([{key:"content",fn:function(){return[e.hasAffectPointers?t("input-checkbox",{model:{value:e.ap,callback:function(o){e.ap=o},expression:"ap"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Remove from pointers"))}})]):e._e()]},proxy:!0}])})],1),e._v(" "),t("dns-add-record-dialog",e._b({ref:"addRecordDialog",attrs:{only:e.only,domain:e.domain,pointer:e.pointer,"show-t-t-l":e.showTTLColumn,"disable-t-t-l":e.disableTTLInput,"affect-pointers":e.affectPointers},on:{submit:function(o){return e.addRecord(o)}}},"dns-add-record-dialog",e.$attrs,!1)),e._v(" "),t("dns-edit-record-dialog",e._b({ref:"editRecordDialog",attrs:{record:e.editableRecord,"show-t-t-l":e.showTTLColumn,"disable-t-t-l":e.disableTTLInput,domain:e.domain,pointer:e.pointer,"affect-pointers":e.affectPointers},on:{update:e.updateRecord}},"dns-edit-record-dialog",e.$attrs,!1))],1)},v=[],f=a("./js/stores/index.ts"),_=a("./js/api/commands/dns/index.js"),x=function(){var e=this,t=e._self._c;return t("ui-dialog",{attrs:{id:"ADD_DNS_RECORD_DIALOG",size:"normal",cancel:"",title:e.$gettext("Add Record")},on:{"dialog:open":e.setVars},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Record Type"))}})]},proxy:!0},{key:"content",fn:function(){return[e.only?t("input-text",{attrs:{value:e.type,disabled:""}}):t("input-select",{attrs:{options:e.allowedRecordTypes},model:{value:e.type,callback:function(o){e.type=o},expression:"type"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{attrs:{group:"addRecord",validators:{required:!0,validateDnsRecordName:e.validateDnsRecordName}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Name"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{ref:"inputName",attrs:{placeholder:e.type==="DS"?`subdomain.${e.domain}.`:""},model:{value:e.name,callback:function(o){e.name=o},expression:"name"}})]},proxy:!0},{key:"popup",fn:function(){return[e.fqdnName&&e.$api.dnsName.valid?t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column",cross:"center"},expression:"{ dir: 'column', cross: 'center' }"}]},[t("span",{staticClass:"txt:bold txt:big",domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Result: %{ name }"),{name:e.fqdnName}))}}),e._v(" "),t("span",{staticClass:"txt:small txt:center",domProps:{textContent:e._s(e.$gettext("Please add a period symbol at the end of the domain name if domain should not be auto-appended."))}})]):e._e()]},proxy:!0},{key:"error:validateDnsRecordName",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$api.dnsName.message)}})]},proxy:!0}])}),e._v(" "),e.showTTL?t("ui-form-element",{attrs:{group:"addRecord"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("TTL"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{ref:"inputTTL",attrs:{disabled:e.disableTTL,number:""},model:{value:e.ttl,callback:function(o){e.ttl=o},expression:"ttl"}})]},proxy:!0},e.disableTTL?{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("TTL is overriden globally. Changing this setting will have no effect."))}})]},proxy:!0}:null],null,!0)}):e._e(),e._v(" "),e.type==="TXT"?t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("TXT Record Type"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:{plain:e.$gettext("Plain"),dmarc:"DMARC",spf:"SPF"}},model:{value:e.txtType,callback:function(o){e.txtType=o},expression:"txtType"}})]},proxy:!0}],null,!1,1141429263)}):e._e(),e._v(" "),e.generatorComponent&&(!e.expertMode||e.type==="TXT")?t(e.generatorComponent,{tag:"component",attrs:{domain:e.pointer||e.domain},model:{value:e.value,callback:function(o){e.value=o},expression:"value"}}):e._e(),e._v(" "),e.type==="SRV"?t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span")]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{model:{value:e.expertMode,callback:function(o){e.expertMode=o},expression:"expertMode"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Edit Manually"))}})])]},proxy:!0}],null,!1,3333338712)}):e._e(),e._v(" "),t("ui-form-element",{attrs:{group:"addRecord",validators:{validateDnsRecordValue:e.validateDnsRecordValue,validateMxRecordValue:e.validateMxRecordValue},underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Value"))}})]},proxy:!0},{key:"content",fn:function(){return[e.type==="MX"?t("input-autocomplete",{attrs:{values:["0","10","20","30","40","50","60","70","80","90"],"suggest-after":0,mode:"input",inputmode:"numeric"},scopedSlots:e._u([{key:"additions:right",fn:function(){return[e.full_mx_records?t("input-text",{ref:"inputMXValue",model:{value:e.mxValue,callback:function(o){e.mxValue=o},expression:"mxValue"}}):e._e()]},proxy:!0}],null,!1,1751031279),model:{value:e.value,callback:function(o){e.value=o},expression:"value"}}):t(e.type==="TXT"?"input-textarea":"input-text",{ref:"inputValue",tag:"component",attrs:{rows:"5",disabled:e.generatorComponent&&e.type==="SRV"&&!e.expertMode},model:{value:e.value,callback:function(o){e.value=o},expression:"value"}})]},proxy:!0},{key:"popup",fn:function(){return[e.fqdnValue&&e.$api.dnsValue.valid&&e.$api.mxValue.valid?t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column",cross:"center"},expression:"{ dir: 'column', cross: 'center' }"}]},[t("span",{staticClass:"txt:bold txt:big",domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Result: %{ name }"),{name:e.fqdnValue}))}}),e._v(" "),t("span",{staticClass:"txt:small txt:center",domProps:{textContent:e._s(e.$gettext("Please add a period symbol at the end of the domain name if domain should not be auto-appended."))}})]):e._e()]},proxy:!0},{key:"error:validateDnsRecordValue",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$api.dnsValue.message)}})]},proxy:!0},{key:"error:validateMxRecordValue",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$api.mxValue.message)}})]},proxy:!0}])}),e._v(" "),e.affectPointers.show?t("ui-form-element",{attrs:{underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span")]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{model:{value:e.ap,callback:function(o){e.ap=o},expression:"ap"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Duplicate to pointers"))}})])]},proxy:!0}],null,!1,493075187)}):e._e()]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe","validate-group":"addRecord",disabled:!e.spfValid},on:{click:e.submit}},[t("span",{domProps:{textContent:e._s(e.$gettext("Add"))}})])]},proxy:!0}])})},k=[],i=a("./js/api/commands/validation/index.js"),s=a("../node_modules/ramda/es/index.js"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dmarc-editor"},[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Domain policy type"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:{none:e.$gettext("None"),reject:e.$gettext("Reject"),quarantine:e.$gettext("Quarantine")}},model:{value:e.p,callback:function(o){e.p=o},expression:"p"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Subdomain policy type"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:{"":e.$gettext("Same as domain"),none:e.$gettext("None"),reject:e.$gettext("Reject"),quarantine:e.$gettext("Quarantine")}},model:{value:e.sp,callback:function(o){e.sp=o},expression:"sp"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Aggregate Email (RUA)"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.rua,callback:function(o){e.rua=o},expression:"rua"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Forensic Email (RUF)"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.ruf,callback:function(o){e.ruf=o},expression:"ruf"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Report Format"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:{afrf:e.$gettext("Authentication Failure Reporting Format"),iodef:e.$gettext("Incident Object Description Exchange Format")}},model:{value:e.rf,callback:function(o){e.rf=o},expression:"rf"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Reporting Interval"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{number:"",double:""},model:{value:e.ri,callback:function(o){e.ri=o},expression:"ri"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Percentage"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{number:"",suffix:"%"},model:{value:e.pct,callback:function(o){e.pct=o},expression:"pct"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Alignment mode for DKIM"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:{relaxed:e.$gettext("Relaxed"),strict:e.$gettext("Strict")}},model:{value:e.adkim,callback:function(o){e.adkim=o},expression:"adkim"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Alignment mode for SPF"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:{relaxed:e.$gettext("Relaxed"),strict:e.$gettext("Strict")}},model:{value:e.aspf,callback:function(o){e.aspf=o},expression:"aspf"}})]},proxy:!0}])})],1)},u=[],d=a("./js/api/commands/utils/transduce.ts");const R=s.zGw(s.hXT(s.CyQ(s.xbD)),s.Zpf,s.UID(s.v_p("=")),s.v_p("; "),n=>`v=DMARC1;${n}`),y=s.zGw(s.yAE(""),s.gxs("mailto:","")),c=s.qhW(s.xbD,n=>`mailto:${n}`),h=n=>s.gxm(s.fS0(n),s.Bxt("")),$=n=>n==="strict"?"s":"",p=n=>n,b=n=>{const e=s.Vl2(";",n);return(0,d.vr)([(0,d.r5)(s.fyY),(0,d.uD)(s.Bul(/^(p|sp|rua|ruf|ri|rf|pct|adkim|aspf)=.+$/)),(0,d.r5)(t=>{const[o,m]=t.split("=");return{[o]:m}})],e)},T=n=>(e,t,o=m=>m)=>n[e]?o(n.prop):t,j=s.CyQ(s.Nyw("v=DMARC1")),P=s.zGw(s.rO9({p:n=>n,sp:n=>n,rua:c,ruf:c,rf:h("afrf"),ri:h("86400"),pct:h("100"),adkim:$,aspf:$})),Z=s.zGw(P,R),F=n=>{const e=s.KJl(j,s.Bxt({}),b)(n);return e.adkim=e.adkim==="s"?"strict":"relaxed",e.aspf=e.aspf==="s"?"strict":"relaxed",e.rua=y(e.rua),e.ruf=y(e.ruf),e};var X={model:{prop:"value",event:"change"},props:{value:{type:String,required:!0}},data:()=>({rua:"",ruf:"",p:"none",sp:"",rf:"afrf",ri:"86400",pct:"100",adkim:"relaxed",aspf:"relaxed"}),computed:{innerValue(){return Z({p:this.p,sp:this.sp,rua:this.rua,ruf:this.ruf,rf:this.rf,ri:this.ri,pct:this.pct,adkim:this.adkim,aspf:this.aspf})}},watch:{innerValue(n){n!==this.value&&this.$emit("change",this.innerValue)},value:{handler:"updateInnerValue",immediate:!0}},methods:{updateInnerValue(n){if(n=n.replace(/^"|"$/g,""),j(n)){this.$emit("change",this.innerValue);return}n!==this.innerValue&&Object.assign(this,F(n))}}},B=X,C=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),G=(0,C.Z)(B,l,u,!1,null,null,null),Q=G.exports,z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"spf-editor"},[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Redirect Domain"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("The SPF record for this domain replaces the current record."))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.redirect,callback:function(o){e.redirect=o},expression:"redirect"}})]},proxy:!0}])}),e._v(" "),e.redirect?e._e():[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span")]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{attrs:{value:"mx"},model:{value:e.options,callback:function(o){e.options=o},expression:"options"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Allow servers listed as MX to send email for this domain"))}})])]},proxy:!0}],null,!1,3801855475)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span")]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{attrs:{value:"a"},model:{value:e.options,callback:function(o){e.options=o},expression:"options"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Allow current IP address of the domain to send email for this domain"))}})])]},proxy:!0}],null,!1,3270115075)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span")]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{attrs:{value:"ptr"},model:{value:e.options,callback:function(o){e.options=o},expression:"options"}},[t("span",{domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Allow any hostname ending in %{ domain } to send email for this domain"),{domain:e.domain}))}})])]},proxy:!0}],null,!1,2910456989)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("IP Addresses"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("IP Addresses in CIDR format that deliver or relay mail for this domain"))}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},e._l(e.ips,function(o,m){return t("input-ip",{directives:[{name:"margin",rawName:"v-margin",value:["5px",0],expression:"['5px', 0]"}],key:m,attrs:{netmask:o.netmask,version:o.version},on:{"update:netmask":function(S){o.netmask=S},"update:version":function(S){o.version=S}},scopedSlots:e._u([{key:"additions:right",fn:function(){return[m?t("ui-button",{attrs:{theme:"light",size:"normal",icon:"delete"},on:{click:function(S){return e.removeIp(m)}}}):t("ui-button",{attrs:{theme:"light",size:"normal",icon:"plus-fill"},on:{click:e.addIp}})]},proxy:!0}],null,!0),model:{value:o.value,callback:function(S){e.$set(o,"value",S)},expression:"ip.value"}})}),1)]},proxy:!0}],null,!1,2290251935)}),e._v(" "),t("ui-form-element",{attrs:{group:"spf-record"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Server Hostname"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Add any other server hostname that may deliver or relay mail for this domain"))}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],ref:"domains"},e._l(e.a,function(o,m){return t("input-text",{directives:[{name:"margin",rawName:"v-margin",value:["5px",0],expression:"['5px', 0]"}],key:m,ref:`aInput${m}`,refInFor:!0,attrs:{prefix:"a:"},scopedSlots:e._u([{key:"additions:right",fn:function(){return[m?t("ui-button",{attrs:{theme:"light",size:"normal",icon:"delete"},on:{click:function(S){return e.a.splice(m,1)}}}):t("ui-button",{attrs:{theme:"light",size:"normal",icon:"plus-fill",disabled:e.lookupLimit},on:{click:e.addDomain}})]},proxy:!0}],null,!0),model:{value:e.a[m],callback:function(S){e.$set(e.a,m,S)},expression:"a[index]"}})}),1)]},proxy:!0}],null,!1,2195462012)}),e._v(" "),e.lookupLimit&&e.$refs.domains?t("ui-tooltip-popup",{attrs:{anchor:e.$refs.domains,theme:"danger",placement:e.clientStore.isMobile?"top":"right",visible:""}},[t("span",{domProps:{textContent:e._s(e.$gettext("Limit of 10 domain lookups reached"))}})]):e._e(),e._v(" "),t("ui-form-element",{attrs:{group:"spf-record"},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Include Domain"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Any domain that will be searched for a match"))}})]},proxy:!0},{key:"content",fn:function(){return[t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}]},e._l(e.include,function(o,m){return t("input-text",{directives:[{name:"margin",rawName:"v-margin",value:["5px",0],expression:"['5px', 0]"}],key:m,ref:`includeInput${m}`,refInFor:!0,attrs:{prefix:"include:"},scopedSlots:e._u([{key:"additions:right",fn:function(){return[m?t("ui-button",{attrs:{theme:"light",size:"normal",icon:"delete"},on:{click:function(S){return e.include.splice(m,1)}}}):t("ui-button",{attrs:{theme:"light",size:"normal",icon:"plus-fill",disabled:e.lookupLimit},on:{click:e.addInclude}})]},proxy:!0},m&&!e.validDomain(e.include[m])&&!e.clientStore.isPhone?{key:"error",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Invalid Domain"))}})]},proxy:!0}:null],null,!0),model:{value:e.include[m],callback:function(S){e.$set(e.include,m,S)},expression:"include[index]"}})}),1)]},proxy:!0}],null,!1,2457809630)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Mode"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("div",[t("div",[t("strong",{domProps:{textContent:e._s(e.$gettext("Fail"))}}),e._v(" "),t("span",[e._v(":")]),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("The SPF record has designated the host as NOT being allowed to send (reject)"))}})]),e._v(" "),t("div",[t("strong",{domProps:{textContent:e._s(e.$gettext("SoftFail"))}}),e._v(" "),t("span",[e._v(":")]),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("The SPF record has designated the host as NOT being allowed to send but is in transition (accept but mark)"))}})]),e._v(" "),t("div",[t("strong",{domProps:{textContent:e._s(e.$gettext("Neutral"))}}),e._v(" "),t("span",[e._v(":")]),e._v(" "),t("span",{domProps:{textContent:e._s(e.$gettext("The SPF record specifies explicitly that nothing can be said about validity (accept)"))}})])])]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:{"-all":e.$gettext("Fail"),"~all":e.$gettext("SoftFail"),"?all":e.$gettext("Neutral")}},model:{value:e.strict,callback:function(o){e.strict=o},expression:"strict"}})]},proxy:!0}],null,!1,180343845)})]],2)},q=[],K=a("./js/components/local/input-ip.vue"),M=a("./js/components/local/utils/cidr.ts"),E=a("./js/modules/constants.js");const W=(0,s.WAo)((n,e)=>(0,s.UID)(t=>t(e),n));var A=a("../node_modules/monet/dist/monet.js");const H=n=>n.filter(s.zGw(s.vgT("value"),s.CyQ(s.xbD))).map(({version:e,value:t,netmask:o})=>[e.replace("v","ip"),":",t,o&&!s.q9t("/",t)?`/${o}`:""].join("")).join(" "),J=s.zGw(s.UID(s.zoF("include:")),s.v_p(" ")),Y=s.zGw(s.UID(s.zoF("a:")),s.v_p(" ")),ee=n=>{if(n.redirect)return`v=spf1 redirect=${n.redirect}`;const e=s.v_p(" ",n.options),t=H(n.ips),o=J(n.include),m=Y(n.a);return["v=spf1",e,t,m,o,n.strict].filter(Boolean).join(" ")},V=s.CyQ(s.Nyw("v=spf1")),te=n=>n.includes("?all")?"?all":n.includes("~all")?"~all":"-all",ne=n=>{const e=[];return["a","mx","ptr"].filter(t=>n.includes(` ${t} `))},se=n=>A.Maybe.Some(n).flatMap(e=>e.includes("redirect=")?A.Maybe.Some(s.EQD(/.*redirect=([^ ]+).*/,e)):A.Maybe.None()).map(s.hL$(1)).orSome(""),oe=n=>{const e=s.Nyw("ip4",n)?"v4":"v6",[t,o]=n.replace(/^ip.:/,"").split("/");return{version:e,value:o?`${t}/${o}`:t,netmask:o}},re=n=>n.split(" ").filter(s.Nyw("ip")).map(oe),ie=s.zGw(s.Vl2(" "),s.hXT(s.Nyw("include:")),s.UID(s.gxs("include:","")),s.gxm(s.xbD,s.Bxt([""]))),ae=s.zGw(s.Vl2(" "),s.hXT(s.Nyw("a:")),s.UID(s.gxs("a:","")),s.gxm(s.xbD,s.Bxt([""]))),le=s.KJl(V,s.Bxt({options:["mx","a"],ips:[{version:"v4",value:"",netmask:""}],include:[""],strict:"-all",redirect:"",a:[""]}),W({options:ne,strict:te,redirect:se,ips:re,include:ie,a:ae})),L=s.hXT(s.Bul(E.gk.domain)),O=s.CyQ(s.zGw(s.vgT("value"),s.q9t("_")));var de={components:{InputIp:K.Z},model:{prop:"value",event:"change"},props:{value:{type:String,required:!0},domain:{type:String,required:!1,default:()=>(void 0).$domainUnicode}},data:()=>({ips:[{version:"v4",netmask:"",value:""}],include:[""],options:["mx","a"],strict:"-all",redirect:"",a:[""]}),computed:{processedIps(){const n=s.gxm(s.OH4("version","v4"),s.rO9({netmask:M.x}));return s.zGw(s.hXT(O),s.UID(n))(this.ips)},processedDomains(){return L(this.a)},processedIncludes(){return L(this.include)},spfRecord(){return{options:this.options,values:this.values,strict:this.strict,redirect:this.redirect,ips:this.processedIps,include:this.processedIncludes,a:this.processedDomains}},innerValue(){return ee(this.spfRecord)},lookupLimit(){return this.processedDomains.length+this.processedIncludes.length>=10},...(0,f.Kc)(["client"])},watch:{innerValue(n){this.$emit("change",n)},value:{handler:"updateInnerValue",immediate:!0}},methods:{isIpValid:O,validDomain:s.Bul(E.gk.domain),updateInnerValue(n){if(n=n.replace(/^"|"$/g,""),V(n)){this.$emit("change",this.innerValue);return}if(n!==this.innerValue){const t=s.zGw(le,s.rO9({ips:s.UID(o=>({...o,netmask:o.version==="v4"?(0,M.T)(o.netmask):o.netmask}))}))(n);Object.assign(this,t)}},addIp(){this.ips.push({netmask:"",value:"",version:"v4"})},removeIp(n){this.ips.splice(n,1)},validateDomain(n){return n?!n.includes(" ")&&E.gk.domain.test(n):!0},addInclude(){this.include.push(""),this.$nextTick(()=>{const n=this.$refs[`includeInput${this.include.length-1}`];n&&n[0]&&n[0].$refs.input.focus()})},addDomain(){this.a.push(""),this.$nextTick(()=>{const n=this.$refs[`aInput${this.a.length-1}`];n&&n[0]&&n[0].$refs.input.focus()})}}},ue=de,ce=(0,C.Z)(ue,z,q,!1,null,null,null),pe=ce.exports,me=function(){var e=this,t=e._self._c;return t("div",{staticClass:"srv-editor"},[t("ui-form-element",e._b({scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Priority"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{number:""},model:{value:e.priority,callback:function(o){e.priority=o},expression:"priority"}})]},proxy:!0}])},"ui-form-element",{group:e.group,validators:{required:!0}},!1)),e._v(" "),t("ui-form-element",e._b({scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Weight"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{number:""},model:{value:e.weight,callback:function(o){e.weight=o},expression:"weight"}})]},proxy:!0}])},"ui-form-element",{group:e.group,validators:{required:!0}},!1)),e._v(" "),t("ui-form-element",e._b({scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Port"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{number:""},model:{value:e.port,callback:function(o){e.port=o},expression:"port"}})]},proxy:!0}])},"ui-form-element",{group:e.group,validators:{required:!0}},!1)),e._v(" "),t("ui-form-element",e._b({scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Target"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.target,callback:function(o){e.target=o},expression:"target"}})]},proxy:!0}])},"ui-form-element",{group:e.group,validators:{required:!0,domain:!0}},!1))],1)},fe=[],ve={model:{prop:"value",event:"change"},props:{value:{type:String,required:!0},group:{type:String,required:!1,default:"addRecord"}},data:()=>({priority:"",weight:"",port:"",target:""}),computed:{computedValue(){return[this.priority,this.weight,this.port,this.target].join(" ")}},watch:{value:{handler(n){n!==this.computedValue&&([this.priority="",this.weight="",this.port="",this.target=""]=n.replace(/  +/g," ").split(" "))},immediate:!0},computedValue(n){n!==this.value&&this.$emit("change",n.replace(/  +/g," "))}}},_e=ve,xe=(0,C.Z)(_e,me,fe,!1,null,null,null),ye=xe.exports;const he=n=>{const e=s.Zpf({spf:"spf1",dmarc:"DMARC1"}),[t="plain"]=s.sEJ(([,o])=>s.Nyw(`v=${o}`,n),e)||[];return t},I={dmarc:Q,spf:pe,srv:ye},ge="14400",N={type:Boolean,required:!1,default:!1};var Re={props:{only:{type:String,default:""},domain:{type:String,required:!0},dns_spf:N,dns_ds:N,dns_tlsa:N,dns_caa:N,full_mx_records:N,dns_ns:N,dns_ptr:N,pointer:{type:[String,Object],required:!1,default:null},showTTL:{type:Boolean,required:!1,default:!1},disableTTL:{type:Boolean,required:!1,default:!1},affectPointers:{type:Object,required:!1,default:()=>({show:!1,default:!1})}},data(){return{type:this.only||"A",name:"",value:"",mxValue:"",ttl:"",txtType:"plain",ap:this.affectPointers.default,expertMode:!1}},api:[{command:i.ty,bind:"dnsName"},{command:i.l7,bind:"dnsValue"},{command:i.PR,bind:"mxValue"}],commands:{validate:{dnsName:i.ty,dnsValue:i.l7,mxValue:i.PR}},computed:{requestData(){return{type:this.type,name:this.$p6e.toA(this.name),domain:this.domain,value:this.type==="TXT"?this.value:this.$p6e.toA(this.value),mx_value:this.$p6e.toA(this.mxValue),ttl:this.ttl||null,affect_pointers:this.affectPointers?this.ap:null}},allowedRecordTypes(){return["A",this.dns_ns?"NS":!1,"MX","CNAME",this.dns_ptr?"PTR":!1,"TXT","SRV","AAAA",this.dns_spf?"SPF":!1,this.dns_ds?"DS":!1,this.dns_tlsa?"TLSA":!1,this.dns_caa?"CAA":!1].filter(Boolean)},defaultName(){return this.$p6e.toU(`${this.pointer||this.domain}.`)},defaultTTL(){try{const n=_.Q6.data.response;return n.ttl.value||n.ttl.default}catch(n){return ge}},mxRecordsPage(){return this.type==="MX"},fqdnName(){return this.makeFQDN(this.name)},fqdnValue(){return["CNAME","MX","NS","PTR"].includes(this.type)?this.makeFQDN(this.type==="MX"?this.mxValue:this.value):!1},spfValid(){return(0,f.oR)(PiniaStores.VALIDATION).isValid("spf-record")},generatorComponent(){return this.type==="TXT"&&this.txtType!=="plain"?I[this.txtType]:this.type==="SRV"?I.srv:!1}},watch:{type(){this.setVars()},txtType(n){n==="dmarc"&&(this.name="_dmarc")}},created(){this.setVars()},methods:{makeFQDN(n){return!n||n[n.length-1]==="."?!1:`${n}.${this.$p6e.toU(this.domain)}`},async setVars(){if(this.initialData)Object.assign(this,this.initialData),this.initialData=null;else{switch(this.ap=this.affectPointers.default,this.showTTL&&(this.ttl=this.defaultTTL),this.type){case"MX":this.name=this.defaultName,this.value="10";break;case"NS":case"TXT":this.value="",this.name=this.defaultName,this.txtType==="dmarc"&&(this.name="_dmarc");break;case"CNAME":this.name="",this.value=this.defaultName;break;default:this.name="",this.value="",this.mxValue=""}(0,f.oR)(PiniaStores.VALIDATION).touchGroupInputs("addRecord")}},async submit(){this.$emit("submit",Object.assign({},this.requestData)),this.setVars()},prefill(n){this.initialData=n},validateDnsRecordName:async function(n){if(!n)return!0;const{valid:e}=await(0,i.ty)({record:this.type,domain:this.domain,pointer:this.pointer||null,name:this.$p6e.toA(n)});return e},validateDnsRecordValue:async function(n){if(!n||this.type==="MX")return!0;const{valid:e}=await(0,i.l7)({record:this.type,domain:this.domain,pointer:this.pointer||null,value:n});return e},validateMxRecordValue:async function(n){if(!n||this.type!=="MX"||!this.full_mx_records)return!0;const{valid:e}=await(0,i.PR)({domain:this.domain,pointer:this.pointer,value:n});return e}}},be=Re,ke=(0,C.Z)(be,x,k,!1,null,null,null),De=ke.exports,Se=function(){var e=this,t=e._self._c;return t("ui-dialog",{attrs:{id:"EDIT_DNS_RECORD_DIALOG",size:"normal",cancel:"",title:e.$gettext("Edit Record")},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Record Type"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{value:e.editableRecord.type,disabled:""}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{attrs:{group:"editRecord",validators:{required:!0,validateDnsRecordName:e.validateDnsRecordName}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Name"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{placeholder:e.editableRecord.type==="DS"?`subdomain.${e.domain}.`:""},model:{value:e.editableRecord.name,callback:function(o){e.$set(e.editableRecord,"name",o)},expression:"editableRecord.name"}})]},proxy:!0},{key:"popup",fn:function(){return[e.isMounted&&e.fqdnName&&e.$api.dnsName.valid?t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column",cross:"center"},expression:"{ dir: 'column', cross: 'center' }"}]},[t("span",{staticClass:"txt:bold txt:big",domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Result: %{ name }"),{name:e.fqdnName}))}}),e._v(" "),t("span",{staticClass:"txt:small txt:center",domProps:{textContent:e._s(e.$gettext("Please add a period symbol at the end of the domain name if domain should not be auto-appended."))}})]):e._e()]},proxy:!0},{key:"error:validateDnsRecordName",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$api.dnsName.message)}})]},proxy:!0}])}),e._v(" "),e.showTTL?t("ui-form-element",{attrs:{group:"editRecord",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("TTL"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{disabled:e.disableTTL,number:""},model:{value:e.editableRecord.ttl,callback:function(o){e.$set(e.editableRecord,"ttl",o)},expression:"editableRecord.ttl"}})]},proxy:!0},e.disableTTL?{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("TTL is overriden globally. Changing this setting will have no effect."))}})]},proxy:!0}:null],null,!0)}):e._e(),e._v(" "),e.generatorComponent&&!e.expertMode?t(e.generatorComponent,{tag:"component",attrs:{domain:e.pointer||e.domain,group:"editRecord"},model:{value:e.editableRecord.value,callback:function(o){e.$set(e.editableRecord,"value",o)},expression:"editableRecord.value"}}):e._e(),e._v(" "),e.generatorComponent?t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span")]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{attrs:{disabled:e.forceExpertMode},model:{value:e.expertMode,callback:function(o){e.expertMode=o},expression:"expertMode"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Edit Manually"))}})])]},proxy:!0},e.forceExpertMode&&e.record.type==="TXT"?{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Due to advanced SPF record syntax, text-mode is used for SPF changes."))}})]},proxy:!0}:null],null,!0)}):e._e(),e._v(" "),t("ui-form-element",{attrs:{group:"editRecord",validators:{required:!0,validateDnsRecordValue:e.validateDnsRecordValue,validateMxRecordValue:e.validateMxRecordValue},underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Value"))}})]},proxy:!0},{key:"content",fn:function(){return[e.editableRecord.type==="MX"?t("input-autocomplete",{attrs:{values:["0","10","20","30","40","50","60","70","80","90"],"suggest-after":0,mode:"input",inputmode:"numeric"},scopedSlots:e._u([{key:"additions:right",fn:function(){return[e.full_mx_records?t("input-text",{model:{value:e.editableRecord.mx_value,callback:function(o){e.$set(e.editableRecord,"mx_value",o)},expression:"editableRecord.mx_value"}}):e._e()]},proxy:!0}],null,!1,2548998878),model:{value:e.editableRecord.value,callback:function(o){e.$set(e.editableRecord,"value",o)},expression:"editableRecord.value"}}):t(e.record.type==="TXT"?"input-textarea":"input-text",{tag:"component",attrs:{rows:"3",disabled:e.generatorComponent&&!e.expertMode},model:{value:e.editableRecord.value,callback:function(o){e.$set(e.editableRecord,"value",o)},expression:"editableRecord.value"}})]},proxy:!0},{key:"popup",fn:function(){return[e.isMounted&&e.fqdnValue&&e.$api.dnsValue.valid&&e.$api.mxValue.valid?t("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column",cross:"center"},expression:"{ dir: 'column', cross: 'center' }"}]},[t("span",{staticClass:"txt:bold txt:big",domProps:{textContent:e._s(e.$gettextInterpolate(e.$gettext("Result: %{ name }"),{name:e.fqdnValue}))}}),e._v(" "),t("span",{staticClass:"txt:center txt:small",domProps:{textContent:e._s(e.$gettext("Please add a period symbol at the end of the domain name if domain should not be auto-appended."))}})]):e._e()]},proxy:!0},{key:"error:validateDnsRecordValue",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$api.dnsValue.message)}})]},proxy:!0},{key:"error:validateMxRecordValue",fn:function(){return[t("span",{domProps:{innerHTML:e._s(e.$api.mxValue.message)}})]},proxy:!0}])}),e._v(" "),e.affectPointers.show?t("ui-form-element",{attrs:{underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[t("span")]},proxy:!0},{key:"content",fn:function(){return[t("input-checkbox",{model:{value:e.ap,callback:function(o){e.ap=o},expression:"ap"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Duplicate to pointers"))}})])]},proxy:!0}],null,!1,493075187)}):e._e()]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe","validate-group":"editRecord",disabled:!e.spfValid},on:{click:function(o){return e.$emit("update",e.recordData)}}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])})},$e=[],je=a("./js/modules/utils/index.js");const w="14400";var Te={props:{record:{type:Object,required:!0},full_mx_records:{type:Boolean,required:!1,default:!0},showTTL:{type:Boolean,required:!0,default:!1},domain:{type:String,required:!0},disableTTL:{type:Boolean,required:!1,default:!1},pointer:{type:String,required:!1,default:""},affectPointers:{type:Object,required:!1,default:()=>({show:!1,default:!1})}},data(){return{editableRecord:{type:"A",name:"",value:"",mx_value:"",ttl:w},txtType:"plain",expertMode:!1,forceExpertMode:!1,ap:this.affectPointers.default}},api:[{command:i.ty,bind:"dnsName"},{command:i.l7,bind:"dnsValue"},{command:i.PR,bind:"mxValue"}],computed:{recordData(){let{value:n,name:e}=this.editableRecord;const{ttl:t}=this.editableRecord,{type:o,id:m}=this.record;return e=this.$p6e.toA(e),o==="MX"&&(n=`${n} ${this.$p6e.toA(this.editableRecord.mx_value)}`),(o==="NS"||o==="CNAME")&&(n=this.$p6e.toA(n)),{id:m,type:o,value:n,name:e,ttl:t,affect_pointers:this.affectPointers.show?this.ap:null}},mxRecordsPage(){return this.record.type==="MX"},fqdnName(){return this.makeFQDN(this.editableRecord.name)},fqdnValue(){return["CNAME","MX","NS","PTR"].includes(this.editableRecord.type)?this.makeFQDN(this.editableRecord.type==="MX"?this.editableRecord.mx_value:this.editableRecord.value):!1},defaultTTL(){try{return _.Q6.data.response.ttl.default}catch(n){return w}},generatorComponent(){return this.record.type==="TXT"&&this.txtType!=="plain"?I[this.txtType]:this.record.type==="SRV"?I.srv:!1},spfValid(){return(0,f.oR)(PiniaStores.VALIDATION).isValid("spf-record")}},created(){this.$watch("record",this.loadDataFromRecord,{immediate:!0})},methods:{makeFQDN(n){return!n||n[n.length-1]==="."?!1:`${n}.${this.$p6e.toU(this.pointner||this.domain)}`},loadDataFromRecord(){if(this.txtType="plain",Object.assign(this.editableRecord,je._.cloneDeep(this.record)),this.editableRecord.type=this.record.type,this.editableRecord.name=this.$p6e.toU(this.editableRecord.name),this.editableRecord.ttl=this.editableRecord.ttl||this.defaultTTL,this.editableRecord.value=this.record.value,this.record.type==="MX"){const n=this.record.value.split(/\s+/);this.editableRecord.value=n[0],this.editableRecord.mx_value=this.$p6e.toU(n[1]||"")}if(["NS","CNAME"].includes(this.editableRecord.type)&&(this.editableRecord.value=this.$p6e.toU(this.editableRecord.value)),this.record.type==="TXT"){const n=he(this.editableRecord.value);n==="spf"&&(this.forceExpertMode=/(\+|-|~|\?)(a |a:|mx|ip|ip4|ip6|include|ptr)/.test(this.editableRecord.value),this.expertMode=this.forceExpertMode),this.txtType=n}},async validateDnsRecordName(n){if(!n)return!0;const{valid:e}=await(0,i.ty)({record:this.record.type,domain:this.domain,pointer:this.pointer||null,name:this.$p6e.toA(n)});return e},async validateDnsRecordValue(n){if(!n||this.editableRecord.type==="MX")return!0;const{valid:e}=await(0,i.l7)({record:this.record.type,domain:this.domain,pointer:this.pointer||null,value:n});return e},async validateMxRecordValue(n){if(!n||this.editableRecord.type!=="MX"||!this.full_mx_records)return!0;const{valid:e}=await(0,i.PR)({domain:this.pointer||this.domain,value:this.$p6e.toA(n)});return e}}},Pe=Te,Ce=(0,C.Z)(Pe,Se,$e,!1,null,null,null),Ne=Ce.exports,Ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"input-inline"},[e.isVisible?[t("div",{staticClass:"input-inline-box"},[e.type==="TXT"&&e.id==="value"?t("div",{staticClass:"textarea"},[t("input-textarea",{ref:"textarea",staticClass:"width:100%",attrs:{rows:"3"},on:{keyup:function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")||!o.ctrlKey?null:e.update.apply(null,arguments)}},model:{value:e.valueEditable,callback:function(o){e.valueEditable=o},expression:"valueEditable"}}),e._v(" "),t("div",{staticClass:"bottom-toolbar"},[t("span",{domProps:{textContent:e._s(e.$gettext("Press Ctrl+Enter to save"))}}),e._v(" "),t("ui-button",{attrs:{theme:"light",size:"small"},on:{click:e.update}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])],1)],1):t("input-text",{ref:"text",staticClass:"width:100%",on:{keyup:[function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"enter",13,o.key,"Enter")?null:e.update.apply(null,arguments)},function(o){return!o.type.indexOf("key")&&e._k(o.keyCode,"esc",27,o.key,["Esc","Escape"])?null:e.close.apply(null,arguments)}]},scopedSlots:e._u([{key:"additions:right",fn:function(){return[t("ui-button",{attrs:{theme:"light"},on:{click:e.update}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}]),model:{value:e.valueEditable,callback:function(o){e.valueEditable=o},expression:"valueEditable"}})],1)]:t("span",{ref:"trigger",staticClass:"trigger",on:{click:e.open}},[e.$slots.default||e.$scopedSlots.default?[e._t("default")]:[e._v(`
            `+e._s(e.value)+`
        `)]],2)],2)},Ee=[],Ae={props:{value:{type:String,required:!0,default:""},id:{type:String,required:!0,default:""},type:{type:String,required:!0,default:""}},data(){return{isVisible:!1,valueEditable:this.value}},methods:{update(){this.$emit("update",{[this.id]:this.valueEditable}),this.close()},close(){this.isVisible=!1},open(){this.isVisible=!0,this.$nextTick(()=>{this.$refs.text&&this.$refs.text.focus(),this.$refs.textarea&&this.$refs.textarea.$el.focus()})}}},Me=Ae,Fe=a("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/input-inline.vue?vue&type=style&index=0&id=fe4c4aa6&prod&lang=scss&"),Ve=(0,C.Z)(Me,Ie,Ee,!1,null,null,null),Le=Ve.exports,U=a("./js/composables/index.ts"),Oe={components:{DnsAddRecordDialog:De,DnsEditRecordDialog:Ne,InlineInput:Le},props:{only:{type:String,required:!1,default:""},domain:{type:String,required:!0},records:{type:Array,requried:!0,default:()=>[]},pointer:{type:[String,Object],required:!1,default:null},disableTTLInput:{type:Boolean,default:!1,required:!1},enableTTL:{type:Boolean,default:!1,required:!1},hasAffectPointers:{type:Boolean,default:!1},affectPointersDefault:{type:Boolean},disabled:{type:Boolean,required:!1,default:!1},pointers:{type:Array,required:!1,default:()=>[]}},data(){return{checkedRecords:[],editableRecord:{},ap:this.affectPointersDefault}},computed:{dnsControlDisabled(){return this.$_flags.user.dnsControl===!1},showTTLColumn(){return this.enableTTL},affectPointers(){return{show:this.hasAffectPointers,default:this.affectPointersDefault}},notCheckableRows(){return this.only==="MX"?this.records.filter(n=>n.type!==this.only):[]},pointersList(){return[this.$domainUnicode,...this.pointers].reduce((n,e)=>({...n,[e]:e===this.$domainUnicode?this.$gettext("No pointer"):this.$p6e.toU(e)}),{})},pointerParam:{get(){return this.pointer||this.$domainUnicode},set(n){this.$router.replace({name:this.$route.name,params:this.$route.params,query:{...this.$route.query,pointer:n===this.$domainUnicode?null:n}})}},...(0,f.Kc)(["client"])},watch:{domain(n){n&&this.loadRecords()}},methods:{strToChunks(n,e){let t=n;const o=[];for(;t;)o.push(t.slice(0,e)),t=t.slice(e);return o.join("&#x200b;")},getValueString({value:n,type:e},t=!0){return["NS","CNAME"].includes(e)&&(n=this.$p6e.toU(n)),e==="MX"&&(n=n.split(" ").map(this.$p6e.toU).join(" ")),e==="TXT"&&(n=`"${n}"`),n.length>50&&t?this.strToChunks(n,10):n},getCopyString(n,e){e.clipboardData.setData("text/plain",this.getValueString(n,!1)),e.preventDefault()},async loadRecords(){this.$emit("rows:update"),this.checkedRecords=[]},async updateRecord(n){const e=await(0,_.Vs)({...Object.assign({},n),ptr:this.pointer,domain:this.domain});e.success?((0,U.d$)().success({title:e.success,content:e.result}),this.loadRecords()):(0,U.d$)().error({title:e.error,content:e.result})},updateRecordInline(n,e){this.updateRecord({...n,...e})},async addRecord(n){await(0,_.xK)({...n,domain:this.domain,ptr_val:this.pointer})&&this.loadRecords()},async deleteRecords(){await(0,_.kl)({records:this.checkedRecords,ptr:this.pointer,domain:this.domain,affect_pointers:this.hasAffectPointers?this.ap:null})&&(this.checkedRecords=[],this.loadRecords())},editRecord(n){this.editableRecord=n,this.$dialog("EDIT_DNS_RECORD_DIALOG").open()},copyRow(){this.$refs.addRecordDialog.prefill(this.checkedRecords[0]),this.$dialog("ADD_DNS_RECORD_DIALOG").open()}}},we=Oe,Xe=a("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/records-table.vue?vue&type=style&index=0&id=83fb5a84&prod&lang=scss&"),Ue=(0,C.Z)(we,r,v,!1,null,null,null),Ze=Ue.exports},"./js/components/local/input-ip.vue":function(D,g,a){"use strict";a.d(g,{Z:function(){return y}});var r=function(){var h=this,$=h._self._c;return $("ui-input-group",{staticClass:"width:100%",scopedSlots:h._u([{key:"additions:left",fn:function(){return[h.showVersionsSelect?$("input-select",{staticClass:"input-ip-version-select",attrs:{novalidate:"",options:{v4:"IPv4",v6:"IPv6"}},on:{change:function(p){return h.$emit("update:version",p)}},model:{value:h.dataVersion,callback:function(p){h.dataVersion=p},expression:"dataVersion"}}):h._e()]},proxy:!0},{key:"input",fn:function(){return[$("input",{ref:"input",staticClass:"input-ip-mask",attrs:{type:"text"},domProps:{value:h.innerValue},on:{input:h.emit,focus:h.moveCursor}})]},proxy:!0},{key:"additions:right",fn:function(){return[h._t("additions:right",null,null,{})]},proxy:!0}],null,!0)})},v=[],f=a("../node_modules/inputmask/dist/inputmask.js"),_=a.n(f),x=a("./js/vue-globals/mixins/local/inputValidation.js"),k=a("./js/components/local/utils/cidr.ts"),i=a("./js/components/local/utils/mask-definition.ts"),s={mixins:[x.$inputValidation],validate:"value",props:{value:{type:String,required:!0},netmask:{type:String,required:!1,default:""},version:{type:String,required:!1,default:"v4"},disableVersionSelect:{type:Boolean,required:!1,default:!1},allowRange:{type:Boolean,required:!1,default:!1}},data:()=>({focused:!1,dataVersion:"v4",innerCidr:null}),computed:{showVersionsSelect(){return!this.disableVersionSelect&&this.$_flags.server.ipv6},cidr(){return this.netmask?this.dataVersion==="v4"?(0,k.x)(this.netmask):this.netmask:this.netmask},innerValue(){return this.value&&this.innerCidr!==null?`${this.value}/${this.cidr}`:this.value},mask(){let c={v4:Array(4).fill("i[i[i]]").join("."),v6:`[I[I[I[I]]]]${Array(7).fill("[:[I[I[I[I]]]]]").join("")}`}[this.dataVersion];const h={v4:"[!r[r[r]]]",v6:"[!R[R[R[R]]]]"}[this.dataVersion],$={v4:"[=[n[n]]]",v6:"[-[N[N[N]]]]"}[this.dataVersion];return this.allowRange&&(c=`${c}${h}`),typeof this.netmask!="undefined"&&(c=`${c}${$}`),c}},watch:{version(c){this.dataVersion!==c&&(this.dataVersion=c)},dataVersion(c){c!==this.version&&(this.$emit("input",""),this.$emit("update:netmask","")),this.applyMask()},innerCidr(c,h){c!==null&&(h===null&&c===""&&(this.innerCidr=this.cidr),this.emitNetmask(c))}},mounted(){this.dataVersion=this.version,this.applyMask()},methods:{emit({target:{value:c}}){const[h,$]=c.split("/");this.innerCidr=c.includes("/")?$:null,this.$emit("input",h),c||this.emitNetmask("")},emitNetmask(c){return this.$emit("update:netmask",this.dataVersion==="v4"?(0,k.T)(c):c)},moveCursor(){this.value||this.$refs.input.setSelectionRange(0,0)},applyMask(){new(_())({mask:this.mask,keepStatic:!0,definitions:(0,i.Xm)(["ipv4","ipv6"],!0),onUnMask:h=>h,skipOptionalPartCharacter:"",placeholder:"_"}).mask(this.$refs.input)}}},l=s,u=a("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/input-ip.vue?vue&type=style&index=0&id=7be90e6c&prod&lang=scss&"),d=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),R=(0,d.Z)(l,r,v,!1,null,null,null),y=R.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/input-inline.vue?vue&type=style&index=0&id=fe4c4aa6&prod&lang=scss&":function(D,g,a){var r=a("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/input-inline.vue?vue&type=style&index=0&id=fe4c4aa6&prod&lang=scss&");r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[D.id,r,""]]),r.locals&&(D.exports=r.locals);var v=a("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,f=v("2457af32",r,!0,{})},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/records-table.vue?vue&type=style&index=0&id=83fb5a84&prod&lang=scss&":function(D,g,a){var r=a("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/dns/records-table.vue?vue&type=style&index=0&id=83fb5a84&prod&lang=scss&");r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[D.id,r,""]]),r.locals&&(D.exports=r.locals);var v=a("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,f=v("679e1aec",r,!0,{})},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/input-ip.vue?vue&type=style&index=0&id=7be90e6c&prod&lang=scss&":function(D,g,a){var r=a("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/input-ip.vue?vue&type=style&index=0&id=7be90e6c&prod&lang=scss&");r.__esModule&&(r=r.default),typeof r=="string"&&(r=[[D.id,r,""]]),r.locals&&(D.exports=r.locals);var v=a("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,f=v("61c82612",r,!0,{})}}]);
