"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4808],{"./js/api/commands/bandwidth.js":function(v,m,s){var l=s("./js/api/command/index.js");m.Z=l.Z.get({id:"BANDWIDTH_BREAKDOWN",url:"/CMD_BANDWIDTH_BREAKDOWN",response:[],schema:{month:l.Z.OPTIONAL_STRING,year:l.Z.OPTIONAL_STRING,user:l.Z.OPTIONAL_STRING},before:a=>{const p=new Date,f=(p.getMonth()+1).toString(),g=p.getFullYear().toString();return typeof a.month=="undefined"||a.month===f&&a.year===g?{user:a.user,month:null,year:null}:a},after:a=>a.flow(a.wrap("rows"),a.moveProp("rows.total","total"),a.mapProp("rows",a.flow(a.deleteProps(["simpletotal","month","year"]),a.toArray,a.mapArray(a.mapValues(a.convert.toAppNumber)))),a.mapProp("total",a.mapValues(a.convert.toAppNumber)))})},"./js/components/local/history/base-charts.js":function(v,m,s){s.d(m,{o3:function(){return g},x1:function(){return d}});var l=s("../node_modules/chart.js/dist/chart.mjs");function a(u,c){return{render(h){return h("div",{style:this.styles,class:this.cssClasses},[h("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:u,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default(){return[]}}},data(){return{_chart:null}},created(){l.kL.register(...l.zX)},methods:{renderChart(h,x){this.$data._chart&&this.$data._chart.destroy();const _=x;if(this.plugins.length>0)for(const i of this.plugins)_.plugins={..._.plugins,...i};this.$data._chart=new l.kL(this.$refs.canvas.getContext("2d"),{type:c,data:h,options:_})}},beforeDestroy(){this.$data._chart&&this.$data._chart.destroy()}}}function p(u,c){if(c){let h=this.$data._chart,x=u.datasets.map(e=>e.label),_=c.datasets.map(e=>e.label);const i=JSON.stringify(_);JSON.stringify(x)===i&&c.datasets.length===u.datasets.length?(u.datasets.forEach((e,o)=>{const y=Object.keys(c.datasets[o]),O=Object.keys(e);y.filter(r=>r!=="_meta"&&O.indexOf(r)===-1).forEach(r=>{delete h.data.datasets[o][r]});for(const r in e)e.hasOwnProperty(r)&&(h.data.datasets[o][r]=e[r])}),u.hasOwnProperty("labels")&&(h.data.labels=u.labels,this.$emit("labels:update")),h.update(),this.$emit("chart:update")):(h&&(h.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render"))}else this.$data._chart&&(this.$data._chart.destroy(),this.$emit("chart:destroy")),this.renderChart(this.chartData,this.options),this.$emit("chart:render")}const f={data(){return{chartData:null}},watch:{chartData:p}},g={props:{chartData:{type:Object,required:!0,default:()=>{}}},watch:{chartData:p}},d=a("line-chart","line")},"./js/composables/dateFilter.ts":function(v,m,s){s.d(m,{W:function(){return g},f:function(){return p.f}});var l=s("../node_modules/ramda/es/index.js"),a=s("../node_modules/date-fns/esm/format/index.js"),p=s("./js/modules/date-formats.ts"),f=s("./js/modules/customizations/date-formats/default.ts");const g=l.WAo((d,u)=>{if(u)try{return(0,a.Z)(u,p.f.value[d])}catch(c){return console.warn(`Given ${d} format is incorrect:
${c.message}`),(0,a.Z)(u,f.d[d])}return""})},"./js/composables/filters.ts":function(v,m,s){s.d(m,{Q0:function(){return e},aS:function(){return y},d5:function(){return o},eB:function(){return _},hT:function(){return h},kC:function(){return c},n9:function(){return t},zM:function(){return x}});var l=s("../node_modules/date-fns/esm/formatDistance/index.js"),a=s("../node_modules/punycode/punycode.es6.js"),p=s("./js/composables/dateFilter.ts"),f=s("./js/composables/gettext.ts");const{$gettext:g,$ngettext:d,$gettextInterpolate:u}=(0,f.Z)(),c=n=>{var r;return n?((r=n.at(0))===null||r===void 0?void 0:r.toUpperCase())+n.slice(1):""},h=(n,r="datetime")=>(0,p.W)(r,n),x=n=>(0,l.Z)(n,new Date),_=(n,r=1024)=>{const b=Number(n);if(!b)return"0 B";const $=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],P=Math.floor(Math.log(b)/Math.log(r));return`${parseFloat((b/r**P).toFixed(2))} ${$[P]}`},i=n=>{try{return(0,a.xX)(n)}catch(r){return n}},t=n=>(0,a.xX)(n),e=n=>{if(!n||!n.includes("@"))return n;const[r,b]=n.split("@");return[r,i(b)].join("@")},o=n=>{if(n<60)return g("less than a minute");const r=Math.floor(n/60)%60,b=Math.floor(n/3600)%24,$=Math.floor(n/(3600*24)),P=[$?d("%{days} day","%{days} days",$):null,b?d("%{hours} hour","%{hours} hours",b):null,r?d("%{minutes} minute","%{minutes} minutes",r):null].filter(Boolean).join(", ");return u(P,{days:$,hours:b,minutes:r})},y=(n,r)=>n.length<=r?n:`${n.substring(0,r)}...`,O=()=>({capitalize:c,date:h,distanceFromNow:x,humanReadableSize:_,p6eUnicode:t,p6eUnicodeEmail:e,formatUptime:o,truncateString:y})},"./js/components/local/line-chart.vue":function(v,m,s){s.d(m,{Z:function(){return c}});var l=s("./js/components/local/history/base-charts.js"),a={extends:l.x1,mixins:[l.o3],props:["chart","options"],mounted(){this.renderChart(this.chartData,this.options)}},p=a,f=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),g,d,u=(0,f.Z)(p,g,d,!1,null,null,null),c=u.exports},"./js/pages/reseller/users/bandwidth.vue":function(v,m,s){s.r(m),s.d(m,{default:function(){return _}});var l=function(){var t=this,e=t._self._c;return e("app-page",{scopedSlots:t._u([{key:"page:title",fn:function(){return[e("span",{domProps:{textContent:t._s(t.$gettextInterpolate(t.$gettext("Bandwidth Breakdown for %{user}: %{year} %{month}"),{month:t.getMonthName(t.month),year:t.year,user:t.user}))}})]},proxy:!0},{key:"default",fn:function(){return[e("app-page-section",{directives:[{name:"flex",rawName:"v-flex",value:{main:"between"},expression:"{ main: 'between' }"}],staticClass:"filters"},[e("div",{directives:[{name:"gutter",rawName:"v-gutter",value:[1,null],expression:"[1, null]"}]},[e("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"},{name:"gutter",rawName:"v-gutter",value:[null,1],expression:"[null, 1]"}]},[e("strong",{domProps:{textContent:t._s(t.$gettext("Show As:"))}}),t._v(" "),e("input-radio",{attrs:{value:"table"},model:{value:t.showAs,callback:function(o){t.showAs=o},expression:"showAs"}},[e("span",{domProps:{textContent:t._s(t.$gettext("Table"))}})]),t._v(" "),e("input-radio",{attrs:{value:"chart"},model:{value:t.showAs,callback:function(o){t.showAs=o},expression:"showAs"}},[e("span",{domProps:{textContent:t._s(t.$gettext("Chart"))}})])],1)])]),t._v(" "),e("transition",{attrs:{name:"fadeBounce"}},[t.showAs==="table"?e("app-page-section",[e("ui-r-table",t._b({scopedSlots:t._u([{key:"col:http",fn:function({http:o}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                    `)]}},{key:"col:email",fn:function({email:o,email_count_incoming:y,email_count_outgoing:O}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                        (`+t._s(y)+` /
                        `+t._s(O)+`)
                    `)]}},{key:"col:ftp",fn:function({ftp:o}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                    `)]}},{key:"col:pop",fn:function({pop:o}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                    `)]}},{key:"col:imap",fn:function({imap:o}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                    `)]}},{key:"col:da",fn:function({da:o}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                    `)]}},{key:"col:other",fn:function({other:o}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                    `)]}},{key:"col:total",fn:function({total:o}){return[t._v(`
                        `+t._s(t.humanReadableSize(o))+`
                    `)]}},{key:"col:after:day",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.$gettext("Total"))}})]},proxy:!0},{key:"col:after:http",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.humanReadableSize(t.total.http))}})]},proxy:!0},{key:"col:after:email",fn:function(){return[e("div",{staticClass:"txt:bold"},[e("span",{domProps:{textContent:t._s(t.humanReadableSize(t.total.email))}}),t._v(`
                            (
                            `),e("span",{domProps:{textContent:t._s(t.total.email_count_incoming)}}),t._v(`
                            /
                            `),e("span",{domProps:{textContent:t._s(t.total.email_count_outgoing)}}),t._v(`
                            )
                        `)])]},proxy:!0},{key:"col:after:ftp",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.humanReadableSize(t.total.ftp))}})]},proxy:!0},{key:"col:after:pop",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.humanReadableSize(t.total.pop))}})]},proxy:!0},{key:"col:after:imap",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.humanReadableSize(t.total.imap))}})]},proxy:!0},{key:"col:after:da",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.humanReadableSize(t.total.da))}})]},proxy:!0},{key:"col:after:other",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.humanReadableSize(t.total.other))}})]},proxy:!0},{key:"col:after:total",fn:function(){return[e("span",{staticClass:"txt:bold",domProps:{textContent:t._s(t.humanReadableSize(t.total.total))}})]},proxy:!0}],null,!1,864604703)},"ui-r-table",{rows:t.entries,columns:t.columns,isCheckable:!1,isSortable:!0,disablePagination:!0,verticalLayout:t.clientStore.isPhone},!1))],1):e("app-page-section",[e("line-chart",t._b({},"line-chart",{chartData:t.chartData,options:t.chartOptions},!1))],1)],1)]},proxy:!0}])})},a=[],p=s("./js/stores/index.ts"),f=s("./js/api/commands/bandwidth.js"),g=s("./js/components/local/line-chart.vue"),d=s("./js/composables/filters.ts"),u={preload:f.Z,api:[{command:f.Z,bind:"breakdown"}],components:{LineChart:g.Z},props:{year:{type:String,required:!0},month:{type:String,required:!1,default:String(new Date().getMonth()+1)},user:{type:String,required:!1,default:""}},data(){return{showAs:"table"}},computed:{entries(){return this.$api.breakdown.rows},total(){return this.$api.breakdown.total},tickStepSize(){return this.total.total===0?1:void 0},columns(){return[{id:"day",label:this.$gettext("Day")},{id:"http",label:this.$gettext("Apache")},{id:"email",label:this.$gettext("E-mails (Incoming / Outgoing)")},{id:"ftp",label:this.$gettext("FTP")},{id:"pop",label:this.$gettext("POP")},{id:"imap",label:this.$gettext("IMAP")},{id:"da",label:this.$gettext("Direct Admin")},{id:"other",label:this.$gettext("Other")},{id:"total",label:this.$gettext("Total")}]},chartData(){return{labels:this.entries.map(i=>i.day),datasets:[{label:this.$gettext("Total"),...this.datasetOptions("rgba(255, 99, 132, 1)"),...this.datasetData("total")},{label:this.$gettext("Apache"),...this.datasetOptions("rgba(1, 147, 202, 1)"),...this.datasetData("http")},{label:this.$gettext("E-mails"),...this.datasetOptions("rgba(228, 91, 0, 1)"),...this.datasetData("email")},{label:this.$gettext("FTP"),...this.datasetOptions("rgba(93, 195, 127, 1)"),...this.datasetData("ftp")},{label:this.$gettext("POP"),...this.datasetOptions("rgba(52, 56, 60, 1)"),...this.datasetData("pop")},{label:this.$gettext("IMAP"),...this.datasetOptions("rgba(0, 131, 180, 1)"),...this.datasetData("imap")},{label:this.$gettext("Direct Admin"),...this.datasetOptions("rgba(198, 208, 218, 1)"),...this.datasetData("da")},{label:this.$gettext("Other"),...this.datasetOptions("rgba(95, 111, 129, 1)"),...this.datasetData("Other")}]}},chartOptions(){return{scales:{y:{ticks:{stepSize:this.tickStepSize,callback:i=>!Number.isFinite(i)||i<0?"":(0,d.eB)(i)}}},plugins:{tooltip:{enabled:!0,mode:"nearest",intersect:!1,padding:10,titleFont:{family:"Open Sans"},bodyFont:{family:"Open Sans"},footerFont:{family:"Open Sans",size:10},callbacks:{title:i=>`${i[0].label} ${this.getMonthName(this.month)} ${this.year}`,label:({datasetIndex:i,raw:t})=>{const e=[this.$gettext("Total"),this.$gettext("Apache"),this.$gettext("E-mails"),this.$gettext("FTP"),this.$gettext("POP"),this.$gettext("IMAP"),this.$gettext("Direct Admin"),this.$gettext("Other")][i];return t!==0?`${e}: ${(0,d.eB)(t)}`:""}}}}}},...(0,p.Kc)(["client"])},methods:{humanReadableSize:d.eB,datasetOptions(i){return{backgroundColor:i.replace("1)","0.2)"),borderColor:i,pointBackgroundColor:i,borderWidth:2,pointRadius:2,pointHitRadius:20,fill:!1,tension:.4}},datasetData(i){return{data:this.entries.map(t=>t[i])}},getMonthName(i){return[this.$gettext("January"),this.$gettext("February"),this.$gettext("March"),this.$gettext("April"),this.$gettext("May"),this.$gettext("June"),this.$gettext("July"),this.$gettext("August"),this.$gettext("September"),this.$gettext("October"),this.$gettext("November"),this.$gettext("December")][parseInt(i,10)-1]}}},c=u,h=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),x=(0,h.Z)(c,l,a,!1,null,null,null),_=x.exports}}]);
