"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9772,4471],{"./js/api/commands/reseller/password.js":function(h,c,e){var t=e("./js/api/command/index.js");c.Z=t.Z.post({url:"/CMD_USER_PASSWD",params:{action:"create",referer:"CMD_API_USER_PASSWD"},schema:{username:t.Z.REQUIRED_STRING,passwd:t.Z.REQUIRED_STRING},before:({passwd:d})=>({passwd2:d})})},"./js/api/commands/search.js":function(h,c,e){e.d(c,{p:function(){return m},y:function(){return D}});var t=e("./js/api/command/index.js");const d="/CMD_AJAX_SEARCH",m=t.Z.get({id:"USERS_LIST",url:d,response:[],params:{search_default:"0",search_users:"1",search_admins:"1",search_resellers:"1"},schema:{search:t.Z.REQUIRED_STRING},after:()=>({users:o,resellers:f,admins:v})=>Object.values({...o,...f,...v})}),D=t.Z.get({id:"SEARCH",url:d,schema:{search:t.Z.REQUIRED_STRING},before:o=>Object.keys(o).reduce((f,v,n)=>n==="search"?Object.assign(f,{search:v}):Object.assign(f,{[`search_${n}`]:v?"1":"0"}),{})})},"./js/api/commands/validation/index.js":function(h,c,e){e.d(c,{i9:function(){return l},ty:function(){return p},l7:function(){return i},OE:function(){return a},ub:function(){return x},oH:function(){return v},U5:function(){return n},k_:function(){return f},PR:function(){return s},uo:function(){return y},Jj:function(){return E},rV:function(){return r}});var t=e("./js/api/command/index.js"),d=e("../node_modules/punycode/punycode.es6.js"),m=e("./js/api/commands/converters/index.ts"),D={isValid(A){return typeof A.error=="undefined"},getMessage(A){return(0,m.S8)(A.error||"")}};const o=t.Z.get({url:"/CMD_JSON_VALIDATE",schema:{value:t.Z.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:D.isValid,message:D.getMessage}}),f=o.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}}),v=o.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}}),n=o.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0}),u=o.extend({params:{type:"dns"},domain:!0,schema:{record:t.Z.REQUIRED_STRING}}),i=u.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:t.Z.REQUIRED_STRING}}),s=i.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:({value:A})=>({value:"10",mx_value:A})}),p=u.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:t.Z.REQUIRED_STRING,value:null}}),a=o.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}}),l=o.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}}),r=o.extend({id:"VALIDATE_USERNAME",params:{type:"username"}}),E=o.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}}),y=o.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}}),x=o.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:({value:A})=>({value:d.ZP.toASCII(A)})}),_=o.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}})},"./js/api/commands/converters/customItems.ts":function(h,c,e){e.d(c,{CR:function(){return o}});var t=e("../node_modules/ramda/es/index.js"),d=e("./js/api/commands/converters/index.ts"),m=e("./js/api/commands/utils/transduce.ts"),D=e("./js/api/commands/converters/toSelectData.ts");const o=n=>{const u={name:n.name,type:n.type==="listbox"?"select":n.type,label:n.string,description:n.desc||"",value:n.type==="checkbox"?(0,d.sw)(n.checked||"no"):n.value||""};return u.type==="select"?t.BPw(u,(0,D.M1)(n.select||{})):u},f=n=>(0,m.vr)([(0,m.uD)(u=>/^item\d+val$/.test(u)),(0,m.r5)(u=>{const i=u,s=u.replace("val","txt"),p=n[i],a=n[s];return{[p]:a}})],Object.keys(n)),v=(n,u)=>t.qCK(s=>{const p={name:s.name,type:s.type==="listbox"?"select":s.type,description:s.desc||"",value:s.value||"",label:s.string};return s.type==="listbox"?(p.value=s.default,p.options=f(s)):s.type==="checkbox"&&(p.value=s.checked==="yes"),p},t.BPw({name:n}),(0,m.vr)([(0,m.r5)(s=>{const[p,a]=t.Vl2("=",s);return{[p]:a}})]),t.Vl2("&"))(u);c.ZP={fromObject:o,fromString:v}},"./js/api/commands/converters/index.ts":function(h,c,e){e.d(c,{l$:function(){return i.ZP},t0:function(){return t.t0},S8:function(){return t.S8},ql:function(){return t.ql},sw:function(){return t.sw},Qu:function(){return t.Qu},He:function(){return t.He},M1:function(){return u.M1},sf:function(){return p},cc:function(){return n}});var t=e("./js/api/commands/converters/primitive.ts"),d=e("../node_modules/monet/dist/monet.js"),m=e("./js/api/commands/types.ts");const D=a=>typeof a=="object"?d.Either.Right(a):d.Either.Left(new Error("Passed param is not an object")),o=a=>typeof a.usage=="string"?d.Either.Right(a):d.Either.Left(new Error("usage property is required")),f=a=>({usage:(0,t.He)(a.usage),limit:(0,t.Qu)(a.limit)}),v=({usage:a,limit:l})=>{let r=m.H.Normal;const E=Math.floor(a/l*100);return E>=100?r=m.H.OverUsed:E>80&&(r=m.H.AlmostUsed),{usage:a,limit:l,status:r}},n=a=>{const l=d.Either.Right(a).flatMap(D).flatMap(o).map(f).map(v);if(l.isLeft())throw l.left();return l.right()};var u=e("./js/api/commands/converters/toSelectData.ts"),i=e("./js/api/commands/converters/customItems.ts"),s=e("../node_modules/ramda/es/index.js");const p=a=>l=>{const{info:r}=l,E=s.CEd(["info"],l);return{columns:r.columns,rowsCount:Number(r.rows),rows:s.UID(a,s.VO0(E))}}},"./js/api/commands/converters/toSelectData.ts":function(h,c,e){e.d(c,{M1:function(){return v}});var t=e("../node_modules/monet/dist/monet.js"),d=e.n(t),m=e("./js/api/commands/utils/transduce.ts"),D=e("../node_modules/ramda/es/index.js");const o=n=>t.Maybe.Some(n).flatMap(u=>{const i=u.find(s=>s.selected==="yes");return i?t.Maybe.Some(i):t.Maybe.None()}).flatMap(u=>t.Maybe.fromNull(u.value)).orSome(""),f=(0,m.vr)([(0,m.r5)(n=>({[n.value]:n.text}))]),v=n=>{const u=(0,D.VO0)(n);return{value:o(u),options:f(u)}}},"./js/api/commands/types.ts":function(h,c,e){e.d(c,{H:function(){return t}});var t;(function(d){d.Normal="normal",d.AlmostUsed="almost_used",d.OverUsed="overused"})(t||(t={}))},"./js/api/commands/utils/transduce.ts":function(h,c,e){e.d(c,{Re:function(){return D},r5:function(){return d},uD:function(){return m},vr:function(){return u},zh:function(){return v}});var t=e("../node_modules/ramda/es/index.js");const d=i=>s=>(p,a)=>{const l=i(a);return s(p,l)},m=i=>s=>(p,a)=>i(a)?s(p,a):p,D=(i,s)=>(i.push(s),i),o=(i,s)=>t.BPw(i,s),f=(i,s,p,a)=>{const l=t.qCK(...p);return a.reduce(l(s),i)},v=t.WAo(f),n=v([],D),u=v({},o)},"./js/pages/admin/passwords.vue":function(h,c,e){e.r(c),e.d(c,{default:function(){return u}});var t=e("./js/pages/reseller/passwords.vue"),d=e("../node_modules/vue/dist/vue.common.prod.js"),m=(0,d.defineComponent)({extends:t.default}),D=m,o=e("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),f,v,n=(0,o.Z)(D,f,v,!1,null,null,null),u=n.exports},"./js/pages/reseller/passwords.vue":function(h,c,e){e.r(c),e.d(c,{default:function(){return a}});var t=function(){var r=this,E=r._self._c;return E("app-page",{scopedSlots:r._u([{key:"default",fn:function(){return[E("app-page-section",[E("ui-form-element",{attrs:{group:"user",validators:{required:!0,exists:r.isUserExist}},scopedSlots:r._u([{key:"title",fn:function(){return[E("span",{domProps:{textContent:r._s(r.$gettext("Username:"))}})]},proxy:!0},{key:"content",fn:function(){return[E("input-autocomplete",{attrs:{values:r.$api.users},on:{input:r.getUsers},model:{value:r.username,callback:function(y){r.username=y},expression:"username"}})]},proxy:!0},{key:"error:exists",fn:function(){return[E("span",{domProps:{textContent:r._s(r.$gettext("User does not exist"))}})]},proxy:!0}])}),r._v(" "),E("ui-form-element",{attrs:{group:"user",validators:{required:!0,api:r.$commands.validatePassword},underline:!1},scopedSlots:r._u([{key:"title",fn:function(){return[E("span",{domProps:{textContent:r._s(r.$gettext("Enter Password:"))}})]},proxy:!0},{key:"content",fn:function(){return[E("input-password",{attrs:{"show-generator":""},model:{value:r.passwd,callback:function(y){r.passwd=y},expression:"passwd"}})]},proxy:!0}])})],1)]},proxy:!0},{key:"footer:buttons",fn:function(){return[E("ui-button",{attrs:{theme:"safe","validate-group":"user",disabled:r.requestInProgress},on:{click:r.submit}},[E("span",{domProps:{textContent:r._s(r.$gettext("Submit"))}})])]},proxy:!0}])})},d=[],m=e("./js/api/commands/reseller/password.js"),D=e("./js/api/commands/validation/index.js"),o=e("./js/api/commands/search.js"),f=e("./js/stores/index.ts"),v=e("./js/modules/utils/index.js"),n=e("./js/modules/constants.js"),u={commands:{validatePassword:D.uo},api:[{command:o.p,bind:"users"}],props:{user:{type:String,required:!1,default:""}},data(){return{username:"",passwd:"",requestInProgress:!1}},computed:{requestData(){return{username:this.username,passwd:this.passwd,passwd2:this.passwd}}},mounted(){this.user&&(this.username=this.user)},methods:{getUsers:v._.debounce(async function(){this.username&&(0,o.p)({search:this.username})},n.xE),async submit(){const l=(0,f.oR)(PiniaStores.VALIDATION);this.requestInProgress=!0,await(0,m.Z)(this.requestData),l.touchGroupInputs("user"),Object.assign(this.$data,this.$options.data.apply(this)),setTimeout(()=>{l.touchGroupInputs("user")},300)},async isUserExist(l){return this.user||this.$api.users.length&&this.$api.users.includes(l)}}},i=u,s=e("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),p=(0,s.Z)(i,t,d,!1,null,null,null),a=p.exports}}]);
