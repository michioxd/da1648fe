"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[300],{"./js/composables/dateFilter.ts":function(P,v,e){e.d(v,{W:function(){return n},f:function(){return d.f}});var u=e("../node_modules/ramda/es/index.js"),c=e("../node_modules/date-fns/esm/format/index.js"),d=e("./js/modules/date-formats.ts"),_=e("./js/modules/customizations/date-formats/default.ts");const n=u.WAo((o,g)=>{if(g)try{return(0,c.Z)(g,d.f.value[o])}catch(D){return console.warn(`Given ${o} format is incorrect:
${D.message}`),(0,c.Z)(g,_.d[o])}return""})},"./js/composables/useDataStore.ts":function(P,v,e){e.d(v,{a:function(){return _}});var u=e("./js/api/openapi/decorators/data-store-decorator.ts"),c=e("../node_modules/vue/dist/vue.common.prod.js"),d=e.n(c);const _=n=>{const o=(0,c.ref)(null);return{data:o,request:(0,u.i)(o,n)}}},"./js/openapi/vacations.ts":function(P,v,e){e.d(v,{CP:function(){return D},Mw:function(){return g},VO:function(){return E},de:function(){return o}});var u=e("./js/api/openapi/index.ts"),c=e("../node_modules/runtypes/lib/index.js"),d=e.n(c),_=e("./js/openapi/web.types.ts");const n=(0,u.$d)(),o=u.an.Default(async(m,p)=>{const{data:i}=await n.get(`/api/emailvacation/${m}`,p);return i.status==="success"&&c.Dictionary(_.fi).guard(i.data)===!1?n.failure({type:"INVALID_RESPONSE",response:i.data}):i}),g=u.an.Default(async(m,p,i)=>{const{data:r}=await n.get(`/api/emailvacation/${m}/${p}`,i);return r.status==="success"&&_.mN.guard(r.data)===!1?n.failure({type:"INVALID_RESPONSE",response:r.data}):r}),D=u.an.Default(async(m,p,i,r)=>{const{data:M}=await n.put(`/api/emailvacation/${m}/${p}`,i,r);return M}),E=u.an.Default(async(m,p,i)=>{const{data:r}=await n.delete(`/api/emailvacation/${m}/${p}`,i);return r})},"./js/pages/user/email/vacations/index.vue":function(P,v,e){e.r(v),e.d(v,{default:function(){return A}});var u=function(){var t=this,s=t._self._c,l=t._self._setupProxy;return s("app-page",{attrs:{actions:[{label:t.$gettext("Set Vacation Message"),name:"user/email/vacations/create",icon:"#plus-fill"}]},scopedSlots:t._u([{key:"default",fn:function(){return[s("app-page-section",[s("ui-table",{attrs:{items:l.vacationMessages,"no-items-text":t.$gettext("No vacation messages to show")}},[s("ui-column",{attrs:{id:"user",label:t.$gettext("Vacation Account")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(`
                        `+t._s(a.name)+"@"+t._s(l.domainUnicode)+`
                    `)]}}])}),t._v(" "),s("ui-column",{attrs:{id:"startTime",label:t.$gettext("Start Time")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(`
                        `+t._s(a.startTime)+`
                    `)]}}])}),t._v(" "),s("ui-column",{attrs:{id:"endTime",label:t.$gettext("End Time")},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(`
                        `+t._s(a.endTime)+`
                    `)]}}])}),t._v(" "),s("ui-column",{attrs:{id:"actions",label:t.$gettext("Actions")},scopedSlots:t._u([{key:"default",fn:function(a){return[s("ui-button-link",{attrs:{theme:"light",size:"small",name:"user/email/vacations/modify",params:{user:a.name}}},[s("ui-icon",{directives:[{name:"margin",rawName:"v-margin",value:[0,"4px",0,0],expression:"[0, '4px', 0, 0]"}],attrs:{id:"pencil"}}),t._v(" "),l.client.isPhone?t._e():s("span",{domProps:{textContent:t._s(t.$gettext("Modify"))}})],1),t._v(" "),s("ui-button",{attrs:{theme:"light",size:"small"},on:{click:function(j){return l.showDeleteMessage(a.name)}}},[s("ui-icon",{directives:[{name:"margin",rawName:"v-margin",value:[0,"4px",0,0],expression:"[0, '4px', 0, 0]"}],attrs:{id:"delete"}}),t._v(" "),l.client.isPhone?t._e():s("span",{domProps:{textContent:t._s(t.$gettext("Delete"))}})],1)]}}])})],1)],1),t._v(" "),s("ui-dialog-delete-items",{attrs:{subject:t.$gettext("vacation message")},on:{"click:confirm":l.deleteVacations}})]},proxy:!0}])})},c=[],d=e("../node_modules/vue/dist/vue.common.prod.js"),_=e("./js/composables/dialog.ts"),n=e("./js/composables/domain.ts"),o=e("./js/stores/index.ts"),g=e("./js/openapi/vacations.ts"),D=e("./js/composables/gettext.ts"),E=e("./js/composables/dateFilter.ts"),m=e("./js/composables/notify.ts"),p=e("./js/composables/useDataStore.ts");const{data:i,request:r}=(0,p.a)(g.de),M=(0,d.computed)(()=>Object.entries(i.value||{}).map(([f,t])=>({name:f,startTime:(0,E.W)("datetime",new Date(t.startTime)),endTime:(0,E.W)("datetime",new Date(t.endTime))}))),{$gettext:y}=(0,D.Z)(),x=(0,m.d$)(),O=async()=>{const f=await r((0,o.oR)("session").domain);return f.status==="error"&&x.error({title:y("Vacation Messages"),content:y("Failed to load vacation messages!")}),f},R=async f=>{const t=(0,o.oR)("session").domain;(await(0,g.VO)(t,f)).status==="success"&&x.success({title:y("Vacation Messages"),content:y("Vacation message successfully deleted!")}),r(t)},T=(0,d.defineComponent)({name:"VacationMessages",async beforeRouteEnter(f,t,s){const{error:l}=await O();if(l)return s(!1);s()}});var $=(0,d.defineComponent)({...T,props:[],emits:[],setup(f){const{domainUnicode:t,watchDomain:s}=(0,n.a)(),l=(0,o.oR)("client"),a=(0,d.ref)(null),j=h=>{a.value=h,(0,_.R)("DELETE_ITEMS_DIALOG").open()},S=async()=>{a.value!==null&&R(a.value)};return s(()=>{O()}),{__sfc:!0,domainUnicode:t,watchDomain:s,client:l,deleteID:a,showDeleteMessage:j,deleteVacations:S,vacationMessages:M}}}),C=$,I=e("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),V=(0,I.Z)(C,u,c,!1,null,null,null),A=V.exports}}]);
