"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1759],{"./js/api/commands/user/mimetypes.js":function(y,d,s){s.r(d),s.d(d,{createMimetype:function(){return m},deleteMimetypeExtension:function(){return p},deleteMimetypes:function(){return l},getMimetypes:function(){return u},getSystemMimetypes:function(){return i}});var o=s("./js/api/command/index.js");const u=o.Z.get({id:"MIMETYPES",url:"/CMD_MIME_TYPES",domain:!0,pagination:!0,after:a=>a.flow(c=>({rows:c}),a.processTableInfo("rows"),a.mapProps({rows:a.toArray}))}),i=u.extend({id:"SYSTEM_MIMETYPES",params:{action:"system"}}),m=o.Z.post({url:"/CMD_MIME_TYPES",params:{action:"add"},domain:!0,schema:{name:o.Z.REQUIRED_STRING,extension:o.Z.REQUIRED_STRING}}),l=o.Z.select({url:"/CMD_MIME_TYPES",params:{action:"multiple",button:"type"},domain:!0}),p=l.extend({params:{button:"extension"},schema:{extension:o.Z.REQUIRED_STRING}})},"./js/pages/user/mimetypes/index.vue":function(y,d,s){s.r(d),s.d(d,{default:function(){return x}});var o=function(){var e=this,t=e._self._c;return t("app-page",{attrs:{actions:[{label:e.$gettext("Add Mime Type"),handler:e.$dialog("ADD_MIMETYPE_DIALOG").open,icon:"#plus-fill",visible:!e.isRefreshedLayout}]},scopedSlots:e._u([{key:"details",fn:function(){return[t("ui-infobar-item",{attrs:{title:e.$gettext("Add Mime Type")}},[t("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0},vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Name"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.add.name,callback:function(n){e.$set(e.add,"name",n)},expression:"add.name"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0},vertical:""},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Extension"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.add.extension,callback:function(n){e.$set(e.add,"extension",n)},expression:"add.extension"}})]},proxy:!0}])}),e._v(" "),t("ui-button",{directives:[{name:"margin",rawName:"v-margin:top",value:2,expression:"2",arg:"top"}],staticClass:"width:100%",attrs:{theme:"safe","validate-group":"addMimeType"},on:{click:e.addMimeType}},[t("span",{domProps:{textContent:e._s(e.$gettext("Add"))}})])],1)]},proxy:!0},{key:"default",fn:function(){return[t("app-page-section",[t("ui-api-table",e._b({ref:"table",attrs:{"equal-width-layout":""},on:{"action:deleteMimetype":function(n){e.$dialog("DELETE_MIMETYPES_DIALOG").open()},"action:deleteExtension":function(n){e.$dialog("DELETE_EXTENSION_DIALOG").open()}},model:{value:e.select,callback:function(n){e.select=n},expression:"select"}},"ui-api-table",{command:e.$commands.getMimetypes,rowID:"mimetype",columns:{mimetype:e.$gettext("Mime Type"),extensions:e.$gettext("Extensions")},actions:{deleteMimetype:e.$gettext("Delete Mime Type"),deleteExtension:e.$gettext("Delete Extension")}},!1))],1),e._v(" "),t("ui-dialog",{attrs:{id:"ADD_MIMETYPE_DIALOG",theme:"safe",title:e.$gettext("Add New Mime Type")},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Add New Mime Type"))}})]},proxy:!0},{key:"content",fn:function(){return[t("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Name"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.add.name,callback:function(n){e.$set(e.add,"name",n)},expression:"add.name"}})]},proxy:!0}])}),e._v(" "),t("ui-form-element",{attrs:{group:"addMimeType",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Extension"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.add.extension,callback:function(n){e.$set(e.add,"extension",n)},expression:"add.extension"}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe","validate-group":"addMimeType"},on:{click:e.addMimeType}},[t("span",{domProps:{textContent:e._s(e.$gettext("Add"))}})])]},proxy:!0}])}),e._v(" "),t("ui-dialog-delete-items",{attrs:{id:"DELETE_MIMETYPES_DIALOG",subject:e.$ngettext("Mime Type","Mime Types",e.select.length)},on:{"click:confirm":e.deleteMimeTypes}}),e._v(" "),t("ui-dialog",{attrs:{id:"DELETE_EXTENSION_DIALOG",theme:"danger",title:e.$gettext("Delete Extension")},on:{"dialog:open":e.initDel},scopedSlots:e._u([{key:"content",fn:function(){return[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Extension:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:e.checkedExtensions},model:{value:e.del.extension,callback:function(n){e.$set(e.del,"extension",n)},expression:"del.extension"}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"danger"},on:{click:e.deleteExtension}},[t("span",{domProps:{textContent:e._s(e.$gettext("Delete"))}})])]},proxy:!0}])})]},proxy:!0},{key:"bottom:links",fn:function(){return[t("ui-link",{attrs:{name:"user/mimetypes/system"}},[t("span",{domProps:{textContent:e._s(e.$gettext("System Mime Types"))}})])]},proxy:!0}])})},u=[],i=s("./js/api/commands/user/mimetypes.js"),m=s("./js/composables/index.ts"),l={preload:i.getMimetypes,api:[{command:i.getMimetypes,bind:"mimetypes"}],commands:i,data:()=>({select:[],add:{name:"",extension:""},del:{extension:""}}),computed:{checkedExtensions(){return this.$api.mimetypes.rows.filter(({mimetype:r})=>this.select.includes(r)).map(r=>r.extensions.split(" ")).reduce((r,e)=>r.concat(e),[])},isRefreshedLayout(){return(0,m.oR)(PiniaStores.OPTIONS)["skin/layout"]==="standard2021"}},watch:{$domain(){this.reloadTable()}},methods:{reloadTable(){this.$reloadApiTable(),Object.assign(this.$data,this.$options.data.apply(this))},addMimeType(){i.createMimetype({name:this.add.name,extension:this.add.extension}).then(this.reloadTable)},deleteMimeTypes(){i.deleteMimetypes({select:this.select}).then(this.reloadTable)},deleteExtension(){i.deleteMimetypeExtension({select:this.select,extension:this.del.extension}).then(this.reloadTable)},initDel(){[this.del.extension]=this.checkedExtensions}}},p=l,a=s("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),c=(0,a.Z)(p,o,u,!1,null,null,null),x=c.exports}}]);
