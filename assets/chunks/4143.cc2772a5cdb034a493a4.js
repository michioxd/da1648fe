"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4143],{"./js/api/commands/search.js":function(C,b,r){r.d(b,{p:function(){return j},y:function(){return m}});var e=r("./js/api/command/index.js");const x="/CMD_AJAX_SEARCH",j=e.Z.get({id:"USERS_LIST",url:x,response:[],params:{search_default:"0",search_users:"1",search_admins:"1",search_resellers:"1"},schema:{search:e.Z.REQUIRED_STRING},after:()=>({users:c,resellers:p,admins:h})=>Object.values({...c,...p,...h})}),m=e.Z.get({id:"SEARCH",url:x,schema:{search:e.Z.REQUIRED_STRING},before:c=>Object.keys(c).reduce((p,h,v)=>v==="search"?Object.assign(p,{search:h}):Object.assign(p,{[`search_${v}`]:h?"1":"0"}),{})})},"./js/modules/dom/index.js":function(C,b,r){r.d(b,{J:function(){return c}});const e=["click"],x=p=>h=>{e.forEach(v=>{window.document.body[p].bind(window.document.body)(v,h)})},j=x("addEventListener"),m=x("removeEventListener"),c=(p,h,v=!1)=>{const w=({target:u})=>p.filter($=>$).some($=>$.contains(u))?!1:(h(),!0),a=u=>{w(u)&&v===!1&&m(a)};j(a)}},"./js/modules/search/index.js":function(C,b,r){r.d(b,{Z:function(){return J}});var e=r("../node_modules/ramda/es/index.js"),x=r("../node_modules/punycode/punycode.es6.js"),j=r("./js/api/commands/search.js"),m=r("./js/composables/index.ts"),c=r("./js/api/commands/utils/transduce.ts"),p=r("./js/modules/fuzzyseach/index.ts"),h=r("./js/modules/navigation/conditionals.ts");const v=["/user/wordpress/info"];var w=r("./js/routes.ts"),a=r("./js/gettext.js"),u=r("./js/modules/navigation/menu/index.ts");const f=t=>{const[,n="user"]=t.match(/^\/(user|admin|reseller)/)||[];return n},$=e.zGw(f,t=>(0,m.oR)("user").hasRole(t)),D=({path:t,route:n})=>{if(f(t)==="user"&&!(0,h.c)(n)){const{session:g}=(0,m.kP)();return g.domainsList.length!==0}return!0},I=t=>{const n=u.r[t];return n&&n.label||""},O=t=>v.includes(t)===!1,L=e.zGw(e.vgT("path"),e.gxs(/:[^/]*\?/g,""),e.gxs(/\/$/,""),e.sv4([e.CyQ(e.q9t(":")),t=>e.Bul(/^\/(user|admin|reseller)/,t)||t==="/phpmyadmin",$,h.R,O])),P=t=>{t=t.toLowerCase().replace("email","e-mail");const n=(0,c.zh)([],c.Re,[(0,c.uD)(L),(0,c.r5)(i=>({name:i.meta.label||i.name,path:e.gxs(/\/:[^/]*\?/g,"",i.path),route:i.name})),(0,c.r5)(i=>({...i,name:I(i.path)||i.name})),(0,c.uD)(D),(0,c.r5)(e.rO9({name:a.$gettext}))],w._),d=(0,m.oR)("navigation"),g=(0,c.zh)({},e.BPw,[(0,c.r5)(e.rO9({name:i=>(0,p.st)(i,t)})),(0,c.uD)(e.vgT("name")),(0,c.r5)(i=>{const E=f(i.path),_=d.getCategoryName(E,i.path)||(0,a.$gettext)("Other pages");return{[`${E}:${_}`]:{label:_,icon:"search-commands",level:E,entries:{[i.path]:i}}}})],n);return(0,c.zh)([],c.Re,[(0,c.r5)(i=>e.BPw(i,{entries:e.VO0(i.entries)}))],e.VO0(g))};var y=r("./js/api/commands/plugins.js");const o={user:y.wz.extend({notifyError:!1}),reseller:y.s6.extend({notifyError:!1}),admin:y.$M.extend({notifyError:!1})},s=t=>e.vgT(t,{user:(0,a.$gettext)("User Plugins"),reseller:(0,a.$gettext)("Reseller Plugins"),admin:(0,a.$gettext)("Admin Plugins")}),l=t=>e.zGw(()=>o[t].data.response,e.UID(e.zGw(e.eiS(["name","href","route","params"]),e.rO9({name:a.$gettext}))),e.jj$)(),R=()=>e.u4g((t,n)=>[...t,{level:n,label:s(n),entries:l(n),icon:"search"}],[],(0,m.oR)("user").roles),k=async()=>e.zGw(e.D95((t,n)=>(0,m.oR)("user").hasRole(n)),e.d1t(t=>t.data.isDone||t.data.isError),e.VO0,e.UID(e.REe),t=>Promise.all(t))(o),z=async t=>(await k(),e.zGw(R,e.UID(e.rO9({entries:e.zGw(e.UID(e.rO9({name:n=>(0,p.st)(n,t)})),e.hXT(e.vgT("name")))})),e.hXT(({entries:n})=>n.length))());var A=r("./js/context/index.ts");const{session:T,cmd:Z}=(0,m.kP)(),U=e.zGw(e.Vl2("?"),e.Z$Q,e.Vl2("&"),e.UID(e.Vl2("=")),e.Pen),B=(t,n)=>`<span class="fx:main:between"><span>${n}</span> <span class="opacity:dimmed">${t}<span></span>`,M=t=>T.domainsList.includes(t),N=e.zGw(e.Zpf,e.UID(([t,n])=>{const{user:d}=U(t),g=(0,m.oR)("user"),i=B(M(n)&&g.mode==="user"?"":d,n);return M(n)&&g.level==="user"?{name:i,handler:()=>A.T.session.setDomain(n)}:{name:i,path:`/reseller/users/${d}/view`}})),V=(t,n)=>{if((0,m.oR)("user").hasRole("reseller")){const i=N(t);return i.length?[{label:"Domains",icon:"search-domains",entries:i}]:[]}const g=T.domainsList.filter(i=>x.ZP.toUnicode(i).includes(n.toLowerCase()));return g.length?[{label:(0,a.$gettext)("Domains"),icon:"search-domains",entries:g.map(i=>({handler:()=>A.T.session.setDomain(i),name:x.ZP.toUnicode(i)}))}]:[]},G=t=>{const n=Object.keys(t).map(d=>{const g=d.replace(/CMD_FTP\?domain=([^&]*)&.*/,"$1");if(!t[d].includes("@"))return{path:`/user/ftp-accounts/account/${t[d]}`,name:`${t[d]}@${g}`};const[i]=t[d].split("@");return{path:`/user/ftp-accounts/account/${i}`,name:t[d]}});return n.length?[{label:"FTP Accounts",icon:"search-ftp-accounts",entries:n}]:[]},H=t=>{const n=(_,S)=>S?`<span class="fx:main:between"><span>${_}</span><span class="opacity:dimmed">${S}</span></span>`:_,g=e.zGw(e.XPQ,e.UID(e.zGw(U,({user:_,creator:S=!1})=>({path:`/reseller/users/${_}/view`,name:n(_,S)}))))(t),i=(0,a.$gettext)("Users"),E=(0,a.$gettext)("Creator");return g.length?[{label:g[0].name.includes('span class="')?`<span class="fx:main:between"><span>${i}</span><span class="opacity:dimmed">${E}</span></span>`:i,icon:"person",entries:g}]:[]},F=t=>{const n=Object.keys(t).map(d=>({path:d.replace(/CMD_SHOW_RESELLER\?user=(.*)/,"/admin/users/resellers/$1/view"),name:t[d]}));return n.length?[{label:"Resellers",icon:"search-resellers",entries:n}]:[]},Q=t=>{const n=Object.keys(t).map(d=>({path:d.replace(/CMD_SHOW_RESELLER\?user=(.*)/,"/admin/users/resellers/$1/view"),name:t[d]}));return n.length?[{label:"Admins",icon:"search-admins",entries:n}]:[]},X=t=>{const n=Object.values(t).map(d=>({path:`/user/email/accounts/${d}`,name:d}));return n.length?[{label:"E-mails",icon:"search-emails",entries:n}]:[]},W=t=>{const n=Object.values(t).map(d=>({path:`/user/database/db/${d}`,name:d}));return n.length?[{label:"DB Entries",icon:"search-db-entries",entries:n}]:[]};async function J(t,n={}){if(Z("/CMD_AJAX_SEARCH")===!1)return e.zoF(P(t),await z(t));const{domains:d,ftps:g,users:i,resellers:E,admins:_,emails:S,dbs:Y}=await(0,j.y)({search:t,...n});return[...P(t),...await z(t),...V(d||{},t),...G(g||{}),...H(i||{}),...F(E||{}),...Q(_||{}),...X(S||{}),...W(Y||{})]}},"./js/api/commands/utils/transduce.ts":function(C,b,r){r.d(b,{Re:function(){return m},r5:function(){return x},uD:function(){return j},vr:function(){return w},zh:function(){return h}});var e=r("../node_modules/ramda/es/index.js");const x=a=>u=>(f,$)=>{const D=a($);return u(f,D)},j=a=>u=>(f,$)=>a($)?u(f,$):f,m=(a,u)=>(a.push(u),a),c=(a,u)=>e.BPw(a,u),p=(a,u,f,$)=>{const D=e.qCK(...f);return $.reduce(D(u),a)},h=e.WAo(p),v=h([],m),w=h({},c)},"./js/components/local/layouts/standard-2021/icons/caret.vue":function(C,b,r){r.d(b,{Z:function(){return v}});var e=function(){var a=this,u=a._self._c,f=a._self._setupProxy;return a.up?u("svg",{attrs:{width:"9",height:"6",viewBox:"0 0 9 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[u("path",{attrs:{d:"M1 5L5 1L9 5",stroke:"var(--refreshed)","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})]):u("svg",{attrs:{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[u("path",{attrs:{d:"M1 1L5 5L9 1",stroke:"var(--refreshed)","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},x=[],j=r("../node_modules/vue/dist/vue.common.prod.js"),m=(0,j.defineComponent)({__name:"caret",props:{up:{type:Boolean}},setup(w){return{__sfc:!0}}}),c=m,p=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),h=(0,p.Z)(c,e,x,!1,null,null,null),v=h.exports},"./js/components/local/layouts/standard-2021/icons/search.vue":function(C,b,r){r.d(b,{Z:function(){return v}});var e=function(){var a=this,u=a._self._c,f=a._self._setupProxy;return u("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[u("circle",{attrs:{cx:"10.0395",cy:"10.409",r:"6.61427",transform:"rotate(-45 10.0395 10.409)",stroke:f.stroke,"stroke-width":"1.5","stroke-linejoin":"round"}}),a._v(" "),u("path",{attrs:{d:"M14.7166 15.086L17.8986 18.268",stroke:f.stroke,"stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},x=[],j=r("../node_modules/vue/dist/vue.common.prod.js"),m=(0,j.defineComponent)({__name:"search",props:{color:null},setup(w){const a=w,u=(0,j.computed)(()=>a.color||"var(--refreshed)");return{__sfc:!0,props:a,stroke:u}}}),c=m,p=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),h=(0,p.Z)(c,e,x,!1,null,null,null),v=h.exports},"./js/components/local/layouts/standard-2021/search.vue":function(C,b,r){r.d(b,{Z:function(){return y}});var e=function(){var s=this,l=s._self._c;return l("section",{staticClass:"refreshed-search",class:{focused:s.focused,"--has-dropdown":s.value.length>1,"--has-options":s.options}},[l("input-autocomplete",{ref:"autocomplete",staticClass:"width:100% SearchInput",class:{"-is-open-settings":s.options},attrs:{values:s.computedResults,placeholder:s.$gettext("Please enter your search criteria"),"force-all-values":"","max-height":"500px",dropdown:s.focused&&s.value.length>1||s.options,pinnable:!1,"item-size":50,"class-name":"refreshed-search-dropdown","run-option-handler":!1},on:{input:s.handleInput,focus:s.handleFocus,autocomplete:s.handleAutocomplete},scopedSlots:s._u([{key:"empty",fn:function(){return[s.value?l("div",{staticClass:"empty-notification"},[s.loading?[l("ui-center",{attrs:{height:"50px"}},[l("ui-loader-icon",{attrs:{size:24}})],1)]:s.computedResults.length===0?[l("ui-center",{attrs:{height:"50px"}},[l("span",{domProps:{textContent:s._s(s.$gettext("No Results"))}})])]:s._e()],2):s._e()]},proxy:!0}]),model:{value:s.value,callback:function(R){s.value=R},expression:"value"}}),s._v(" "),l("ui-link",{staticClass:"search-icon",on:{click:function(R){return s.$refs.autocomplete.$refs.input.focus()}}},[l("search-icon")],1),s._v(" "),l("ui-link",{ref:"trigger",staticClass:"options-icon",on:{click:s.openSettings}},[l("settings-icon")],1),s._v(" "),s.$refs.autocomplete&&s.$refs.autocomplete.$refs.input?l("ui-dropdown",{ref:"options-dropdown",attrs:{"exact-width":"","use-real-focus":!1,"is-open":s.options,placement:"bottom","trigger-elem":s.$refs.trigger.$el,"placement-elem":s.$refs.autocomplete.$el,"class-name":"refreshed-search-options"},on:{"update:isOpen":function(R){s.options=R}}},s._l(s.settingsMeta,function(R,k){return l("input-checkbox",{key:k,staticClass:"input-check-item-ml",attrs:{value:k,disabled:s.settings.length<2&&s.settings.includes(k)},model:{value:s.settings,callback:function(z){s.settings=z},expression:"settings"}},[l("ui-grid",[l("ui-icon",{attrs:{id:R.icon,theme:s.settings.includes(k)?"refreshed":"gray",size:"medium4"}}),s._v(" "),l("span",{staticClass:"input-check-label-c",domProps:{textContent:s._s(s.$gettext(R.label))}})],1)],1)}),1):s._e()],1)},x=[],j=r("../node_modules/ramda/es/index.js"),m=r("./js/modules/dom/index.js"),c=r("./js/modules/search/index.js"),p=r("./js/modules/utils/index.js"),h=r("./js/vue-globals/helpers.js"),v=r("./js/modules/constants.js"),w=r("./js/components/local/layouts/standard-2021/icons/search.vue"),a=function(){var s=this,l=s._self._c;return l("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[l("path",{attrs:{d:"M3.47461 5.36843H20.5272",stroke:"#848DA0","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),s._v(" "),l("circle",{attrs:{cx:"8.38405",cy:"5.36842",r:"2.36842",fill:"white",stroke:"#848DA0","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),s._v(" "),l("path",{attrs:{d:"M3.47461 12H20.5272",stroke:"#848DA0","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),s._v(" "),l("circle",{attrs:{cx:"15.6204",cy:"12",r:"2.36842",fill:"white",stroke:"#848DA0","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),s._v(" "),l("path",{attrs:{d:"M3.47461 18.6316H20.5272",stroke:"#848DA0","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}}),s._v(" "),l("circle",{attrs:{cx:"8.38405",cy:"18.6316",r:"2.36842",fill:"white",stroke:"#848DA0","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}})])},u=[],f=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),$={},D=(0,f.Z)($,a,u,!1,null,null,null),I=D.exports,O={components:{SearchIcon:w.Z,SettingsIcon:I},data(){return{value:"",lastSearchId:"",results:[],loading:!1,focused:!1,options:!1}},computed:{settingsMeta(){const o=this.$_useStore("user"),s=this.layout==="grid"&&this.merged?o.type:o.mode;return j.hXT(l=>!l.disabled,{users:{icon:"person",label:this.$gettext("Users"),disabled:s==="user"},admins:{icon:"search-admins",label:this.$gettext("Admins"),disabled:s!=="admin"},resellers:{icon:"search-resellers",label:this.$gettext("Resellers"),disabled:s!=="admin"},domains:{icon:"search-domains",label:this.$gettext("Domains")},email:{icon:"search-emails",label:this.$gettext("E-mails")},ftp:{icon:"search-ftp-accounts",label:this.$gettext("FTP Accounts")},db:{icon:"search-db-entries",label:this.$gettext("DB Entries")}})},trimmedValue(){const o=this.value.trim().toLowerCase();return v.FC[o]||o},userLevels(){return{admin:this.$gettext("Admin"),reseller:this.$gettext("Reseller"),user:this.$gettext("User")}},computedResults(){return this.results.map((o,s)=>({id:s.toString(),label:o.level?`${this.userLevels[o.level]}: ${o.label}`:o.label,icon:o.icon,items:o.entries.map(l=>({value:l.name,handler:()=>this.handleEntryClick(l)}))}))},settings:(0,h.YM)("search/settings"),searchId(){return[this.trimmedValue,...this.settings].join(":")},requestSeachSettings(){return["users","admins","resellers","domains","email","ftp","db"].reduce((o,s)=>({...o,[s]:this.settings.includes(s)}),{})}},mounted(){h.uY.on("app:login",()=>{Object.assign(this.$data,this.$options.data.apply(this))})},methods:{openSettings(){this.focused=!1,this.options=!this.options},reset(){this.results=[],this.value=""},beforeSearch(){this.results=[],this.loading=!0,this.focused=!0,this.options=!1},handleInput(){this.beforeSearch(),this.debouncedSearch()},handleFocus(){this.focused=!0,this.search(),(0,m.J)([this.$el],()=>{this.focused=!1})},async handleEntryClick(o){Object.assign(this.$data,this.$options.data.apply(this));try{o.path?await this.$router.push(o.path):o.handler?o.handler():o.href?o.newTab?(0,h.YQ)(o.href):window.location.href=o.href:o.route&&await this.$router.push({name:o.route,params:o.params||{}})}catch(s){if(s&&v.Vi.DEV)throw s}},handleAutocomplete(o){this.focused=!1,o&&typeof o.handler=="function"&&o.handler()},createSearchId(){return[this.trimmedValue,...this.settings].join(":")},async search(){!this.trimmedValue||this.results.length&&this.lastSearchId===this.searchId||(this.beforeSearch(),this.lastSearchId=this.searchId,this.results=await(0,c.Z)(this.trimmedValue,this.requestSeachSettings),this.loading=!1)},debouncedSearch:p._.debounce(function(){this.search()},v.xE)}},L=O,P=(0,f.Z)(L,e,x,!1,null,null,null),y=P.exports}}]);
