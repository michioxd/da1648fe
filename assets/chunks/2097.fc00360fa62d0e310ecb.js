(self.webpackChunk=self.webpackChunk||[]).push([[2097],{"./js/api/commands/subdomains.js":function(v,u,t){"use strict";t.d(u,{AL:function(){return f},DG:function(){return c},HB:function(){return a},UZ:function(){return r},mz:function(){return g},xs:function(){return h}});var s=t("./js/api/command/index.js");const c=s.Z.get({id:"GET_SUBDOMAINS",url:"/CMD_SUBDOMAIN",schema:{domain:s.Z.DOMAIN,...s.Z.PAGINATION},after:n=>n.flow(n.moveProp("subdomains","rows"),n.moveProp("allow_subdomain_docroot_override","docroot"),n.processTableInfo("rows"),n.mapProps({awstats:l=>l!=="0",webalizer:n.isEqual("1"),docroot:n.isEqual("1"),has_php_selector:n.isEqual("yes"),rows:n.flow(n.toArray,n.mapArray(n.moveProp("subdomain_docroot_override","docroot")),n.mapArrayProps({bandwidth:n.convert.toAppNumber,stats:n.mapProps({webalizer_only:n.convert.toAppBoolean}),docroot:l=>{if(l&&Object.keys(l).length){if(typeof l.php1_select!="undefined"){const{options:m,value:e}=n.toSelect(l.php1_select);return{public_html:l.public_html,private_html:l.private_html,php_labels:m,php1_select:e}}return l}return!1}}))}))}),r=s.Z.post({url:"/CMD_SUBDOMAIN",params:{action:"create"},schema:{domain:s.Z.DOMAIN,subdomain:s.Z.REQUIRED_STRING,public_html:s.Z.OPTIONAL_STRING}}),a=s.Z.select({url:"/CMD_SUBDOMAIN",params:{action:"delete"},domain:!0,body:{contents:s.Z.REQUIRED_BOOL}}),h=s.Z.get({id:"GET_SUBDOMAIN_LOG",url:"/CMD_SHOW_LOG",params:{json:null},accept:"text/plain",schema:{domain:s.Z.DOMAIN,type:s.Z.REQUIRED_STRING,subdomain:s.Z.REQUIRED_STRING,lines:s.Z.OPTIONAL_STRING},after:n=>n.flow(n.convert.toLines,l=>l.slice(0,-1))}),g=s.Z.post({url:"/CMD_SUBDOMAIN",params:{action:"document_root_override"},domain:!0,schema:{subdomain:s.Z.REQUIRED_STRING,public_html:s.Z.OPTIONAL_STRING}}),f=s.Z.post({url:"/CMD_SUBDOMAIN",domain:!0,params:{action:"php_selector"},schema:{subdomain:s.Z.REQUIRED_STRING,php1_select:s.Z.REQUIRED_STRING}}),x=s.Z.get({url:"/CMD_SUBDOMAIN",id:"SUBDOMAIN_DATA",domain:!0,params:{action:"show_docroot_override"},schema:{subdomain:s.Z.REQUIRED_STRING},after:n=>n.flow(n.project({has_php_selector:"has_php_selector",http:"public_html",https:"private_html",php:"php1_select"}),n.mapProps({php:n.toSelect,has_php_selector:n.isEqual("yes")}))})},"./js/vue-globals/mixins/local/inputValidation.js":function(v,u,t){"use strict";t.r(u),t.d(u,{$inputValidation:function(){return r}});var s=t("./js/vue-globals/helpers.js"),c=t("./js/stores/index.ts");const r={inject:{groupID:{default:null},inputID:{default:null},validators:{default:()=>({})}},props:{id:{type:String,required:!1,default(){return this.inputID}},group:{type:String,required:!1,default(){return this.groupID}},novalidate:{type:Boolean,required:!1,default(){return!Object.keys(this.validators).length}}},computed:{validationStore(){return(0,c.oR)(PiniaStores.VALIDATION)},valid(){return this.validationStore.isValid(this.group,this.id)},errorState(){return!this.novalidate&&this.isUpdated&&!this.valid},isUpdated(){var a;const h=(a=this.validationStore.groups[this.group])==null?void 0:a[this.id];return typeof h=="undefined"?!1:h.updated}},methods:{$validate(a){this.id&&!this.novalidate&&this.validationStore.validate(this.groupID,this.id,a,this.validators)}},created(){if(!this.novalidate){const{validate:a}=this.$options;a&&this.$watch(a,(0,s.Ds)(this.$validate,{trailing:!0,leading:!1,delay:200}),{immediate:!0})}},destroyed(){this.novalidate||this.validationStore.deleteInput(this.group,this.id)}}},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&":function(){},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/stats/subdomain-log.vue?vue&type=style&index=0&id=3fc657e7&prod&lang=scss&scoped=true&":function(){},"./js/components/local/inputs/input-text-editor.vue":function(v,u,t){"use strict";t.d(u,{Z:function(){return P}});var s=function(){var o=this,p=o._self._c;return p("div",{staticClass:"input-text-editor"},[o.$slots.header||o.$scopedSlots.header?p("div",{staticClass:"input-text-editor-header"},[o._t("header")],2):o._e(),o._v(" "),p("codemirror",{ref:"editor",attrs:{value:o.value,options:{lineNumbers:!0,readOnly:o.readOnly,mode:o.cmMode,theme:o.theme}},on:{input:function(j){return o.$emit("input",j)}}}),o._v(" "),!o.disableModes||!o.disableThemes?p("div",{staticClass:"input-text-editor-bottom-bar"},[o._t("bottom"),o._v(" "),p("span",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}]}),o._v(" "),o.disableModes?o._e():p("input-select",{staticClass:"input-text-editor-bottom-bar-select",attrs:{options:o.modes},scopedSlots:o._u([{key:"additions:left",fn:function(){return[p("ui-button",{attrs:{disabled:""}},[p("span",{domProps:{textContent:o._s(o.$gettext("Mode:"))}})])]},proxy:!0}],null,!1,42350692),model:{value:o.editorMode,callback:function(j){o.editorMode=j},expression:"editorMode"}}),o._v(" "),o.disableThemes?o._e():p("input-select",{staticClass:"input-text-editor-bottom-bar-select --wide",attrs:{options:o.themes},scopedSlots:o._u([{key:"additions:left",fn:function(){return[p("ui-button",{attrs:{disabled:""}},[p("span",{domProps:{textContent:o._s(o.$gettext("Theme:"))}})])]},proxy:!0}],null,!1,3964340662),model:{value:o.theme,callback:function(j){o.theme=j},expression:"theme"}})],2):o._e()],1)},c=[],r=t("../node_modules/vue-codemirror/dist/vue-codemirror.js"),a=t("../node_modules/codemirror/mode/javascript/javascript.js"),h=t("../node_modules/codemirror/mode/htmlmixed/htmlmixed.js"),g=t("../node_modules/codemirror/mode/css/css.js"),f=t("../node_modules/codemirror/mode/php/php.js"),x=t("../node_modules/codemirror/mode/perl/perl.js"),n=t("../node_modules/codemirror/mode/properties/properties.js"),l=t("../node_modules/codemirror/mode/xml/xml.js"),m=t("../node_modules/codemirror/mode/sql/sql.js"),e=t("./js/modules/utils/index.js"),d=t("../node_modules/vue/dist/vue.common.prod.js"),i=t("./js/vue-globals/mixins/local/inputValidation.js"),b=t("./js/context/index.ts"),S=t("./js/modules/dark-mode.ts");const R=["default","base16-light","base16-dark","monokai","solarized"],y=["text","html","javascript","css","php","perl","ini","xml","sql","mysql","json"],N=_=>o=>_.includes(o);r.codemirror.beforeDestroy=void 0;var I={components:{codemirror:r.codemirror},mixins:[i.$inputValidation],validate:"value",props:{value:{type:String,required:!0,default:""},readOnly:{type:Boolean,required:!1,default:!1},mode:{type:String,required:!1,default:"text",validator:N(y)},disableModes:{type:Boolean,required:!1,default:!1},disableThemes:{type:Boolean,required:!1,default:!1}},data(){return{editorMode:this.mode,theme:"default"}},staticData:{modes:y,themes:R},computed:{cmMode(){switch(this.editorMode){case"json":return{name:"javascript",json:!0};case"mysql":return"sql";case"ini":return"properties";default:return this.editorMode}}},mounted(){(0,d.watch)(()=>b.T.options["code-editor/theme"],_=>{this.theme=_},{immediate:!0}),(0,S.Uu)(_=>{this.theme=_==="dark"?"base16-dark":b.T.options["code-editor/theme"]})}},D=I,E=t("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&"),O=t("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),M=(0,O.Z)(D,s,c,!1,null,null,null),P=M.exports},"./js/pages/user/stats/subdomain-log.vue":function(v,u,t){"use strict";t.r(u),t.d(u,{default:function(){return l}});var s=function(){var e=this,d=e._self._c;return d("app-page",{attrs:{id:"domain-log"},scopedSlots:e._u([{key:"page:title",fn:function(){return[d("span",{domProps:{textContent:e._s(e.pageTitle)}})]},proxy:!0},{key:"default",fn:function(){return[d("app-page-section",[d("div",{directives:[{name:"gutter",rawName:"v-gutter",value:1,expression:"1"}],staticClass:"filters"},[d("ui-form-element",{attrs:{underline:e.show==="lines"},scopedSlots:e._u([{key:"title",fn:function(){return[d("span",{domProps:{textContent:e._s(e.$gettext("Show"))}})]},proxy:!0},{key:"content",fn:function(){return[d("div",{directives:[{name:"gutter",rawName:"v-gutter",value:[0,2],expression:"[0, 2]"}]},[d("input-radio",{attrs:{value:"full"},on:{change:e.loadLog},model:{value:e.show,callback:function(i){e.show=i},expression:"show"}},[d("span",{domProps:{textContent:e._s(e.$gettext("Full Log"))}})]),e._v(" "),d("input-radio",{attrs:{value:"lines"},on:{change:e.loadLog},model:{value:e.show,callback:function(i){e.show=i},expression:"show"}},[d("span",{domProps:{textContent:e._s(e.$gettext("Tail"))}})])],1)]},proxy:!0}])}),e._v(" "),d("transition",{attrs:{name:"fade"}},[e.show==="lines"?d("ui-form-element",{attrs:{underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[d("span",{domProps:{textContent:e._s(e.$gettext("Number of lines to show"))}})]},proxy:!0},{key:"content",fn:function(){return[d("div",[d("input-text",{attrs:{number:""},on:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.loadLog.apply(null,arguments)}},model:{value:e.lines,callback:function(i){e.lines=i},expression:"lines"}}),e._v(" "),d("ui-button",{attrs:{theme:"safe",size:"normal",disabled:!Number(e.lines)},on:{click:e.loadLog}},[d("span",{domProps:{textContent:e._s(e.$gettext("Reload Log"))}})])],1)]},proxy:!0}],null,!1,4012153659)}):e._e()],1)],1),e._v(" "),d("input-text-editor",{attrs:{value:e.log,"read-only":"","disable-modes":""},scopedSlots:e._u([{key:"header",fn:function(){return[d("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center",main:"between"},expression:`{
                            cross: 'center',
                            main: 'between',
                        }`}]},[e._v(`
                        `+e._s(e.subdomain)+`
                        `),d("ui-button-link",{attrs:{size:"small",theme:"light",href:e.rawLink,target:"_blank"}},[d("span",{domProps:{textContent:e._s(e.$gettext("raw"))}})])],1)]},proxy:!0}])})],1)]},proxy:!0}])})},c=[],r=t("./js/api/commands/subdomains.js"),a=t("./js/components/local/inputs/input-text-editor.vue"),h={components:{InputTextEditor:a.Z},preload:({subdomain:m,type:e})=>{const[d,...i]=m.split(".");return(0,r.xs)({subdomain:d,domain:i.join("."),type:e==="usage"?"log":"error",lines:"100"})},api:[{command:r.xs,bind:"log"}],props:{subdomain:{type:String,required:!0},type:{type:String,required:!0}},data:()=>({lines:100,show:"lines"}),computed:{domain(){return this.subdomain.split(".").slice(1).join(".")},subName(){return this.subdomain.split(".").shift()},rawLink(){const m=this.type==="usage"?"log":"error",e=`/CMD_SHOW_LOG?domain=${this.domain}&type=${m}&subdomain=${this.subName}`;return this.show==="lines"?`${e}&lines=${this.lines}`:e},log(){return this.$api.log.join(`
`)},pageTitle(){const m=this.type==="usage"?this.$gettext("View Usage Log for %{ domain }"):this.$gettext("View Error Log for %{ domain }");return this.$gettextInterpolate(m,{domain:this.subdomain})}},methods:{loadLog(){const m=this.type==="usage"?"log":"error";(0,r.xs)({domain:this.domain,subdomain:this.subName,type:m,lines:this.show==="lines"?String(this.lines):null})}}},g=h,f=t("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/stats/subdomain-log.vue?vue&type=style&index=0&id=3fc657e7&prod&lang=scss&scoped=true&"),x=t("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),n=(0,x.Z)(g,s,c,!1,null,"3fc657e7",null),l=n.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&":function(v,u,t){var s=t("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-text-editor.vue?vue&type=style&index=0&id=5dc63abc&prod&lang=scss&");s.__esModule&&(s=s.default),typeof s=="string"&&(s=[[v.id,s,""]]),s.locals&&(v.exports=s.locals);var c=t("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,r=c("bb557a88",s,!0,{})},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/stats/subdomain-log.vue?vue&type=style&index=0&id=3fc657e7&prod&lang=scss&scoped=true&":function(v,u,t){var s=t("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/stats/subdomain-log.vue?vue&type=style&index=0&id=3fc657e7&prod&lang=scss&scoped=true&");s.__esModule&&(s=s.default),typeof s=="string"&&(s=[[v.id,s,""]]),s.locals&&(v.exports=s.locals);var c=t("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,r=c("33f9cdea",s,!0,{})}}]);
