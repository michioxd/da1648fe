(self.webpackChunk=self.webpackChunk||[]).push([[673],{"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&":function(){},"./js/composables/dateFilter.ts":function($,j,o){"use strict";o.d(j,{W:function(){return y},f:function(){return v.f}});var u=o("../node_modules/ramda/es/index.js"),_=o("../node_modules/date-fns/esm/format/index.js"),v=o("./js/modules/date-formats.ts"),c=o("./js/modules/customizations/date-formats/default.ts");const y=u.WAo((x,g)=>{if(g)try{return(0,_.Z)(g,v.f.value[x])}catch(p){return console.warn(`Given ${x} format is incorrect:
${p.message}`),(0,_.Z)(g,c.d[x])}return""})},"./js/composables/filters.ts":function($,j,o){"use strict";o.d(j,{Q0:function(){return C},aS:function(){return i},d5:function(){return a},eB:function(){return b},hT:function(){return D},kC:function(){return p},n9:function(){return E},zM:function(){return m}});var u=o("../node_modules/date-fns/esm/formatDistance/index.js"),_=o("../node_modules/punycode/punycode.es6.js"),v=o("./js/composables/dateFilter.ts"),c=o("./js/composables/gettext.ts");const{$gettext:y,$ngettext:x,$gettextInterpolate:g}=(0,c.Z)(),p=r=>{var d;return r?((d=r.at(0))===null||d===void 0?void 0:d.toUpperCase())+r.slice(1):""},D=(r,d="datetime")=>(0,v.W)(d,r),m=r=>(0,u.Z)(r,new Date),b=(r,d=1024)=>{const k=Number(r);if(!k)return"0 B";const S=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],P=Math.floor(Math.log(k)/Math.log(d));return`${parseFloat((k/d**P).toFixed(2))} ${S[P]}`},O=r=>{try{return(0,_.xX)(r)}catch(d){return r}},E=r=>(0,_.xX)(r),C=r=>{if(!r||!r.includes("@"))return r;const[d,k]=r.split("@");return[d,O(k)].join("@")},a=r=>{if(r<60)return y("less than a minute");const d=Math.floor(r/60)%60,k=Math.floor(r/3600)%24,S=Math.floor(r/(3600*24)),P=[S?x("%{days} day","%{days} days",S):null,k?x("%{hours} hour","%{hours} hours",k):null,d?x("%{minutes} minute","%{minutes} minutes",d):null].filter(Boolean).join(", ");return g(P,{days:S,hours:k,minutes:d})},i=(r,d)=>r.length<=d?r:`${r.substring(0,d)}...`,h=()=>({capitalize:p,date:D,distanceFromNow:m,humanReadableSize:b,p6eUnicode:E,p6eUnicodeEmail:C,formatUptime:a,truncateString:i})},"./js/openapi/email.ts":function($,j,o){"use strict";o.d(j,{E:function(){return x},y:function(){return g}});var u=o("./js/api/openapi/index.ts"),_=o("../node_modules/runtypes/lib/index.js"),v=o.n(_),c=o("./js/openapi/web.types.ts");const y=(0,u.$d)(),x=u.an.Default(async(p,D)=>{const{data:m}=await y.get("/api/email-logs",Object.assign({},D||{},{params:p}));return m.status==="success"&&c.JH.guard(m.data)===!1?y.failure({type:"INVALID_RESPONSE",response:m.data}):m}),g=u.an.Default(async(p,D)=>{const{data:m}=await y.get("/api/email-logs-summary",Object.assign({},D||{},{params:p}));return m.status==="success"&&_.Array(c.ix).guard(m.data)===!1?y.failure({type:"INVALID_RESPONSE",response:m.data}):m})},"./js/components/local/inputs/input-date-range.vue":function($,j,o){"use strict";o.d(j,{Z:function(){return C}});var u=function(){var i=this,h=i._self._c;return h("div",{staticClass:"date-range-picker"},[h("date-range-picker",i._b({attrs:{"single-date-picker":i.single,"time-picker":"","time-picker-24-hour":"","append-to-body":"","date-range":i.dateRange,ranges:i.predefinedRanges,"max-date":i.maxDate,"locale-data":i.localeData},on:{update:i.updateValues},scopedSlots:i._u([{key:"input",fn:function(r){return[h("input-text",{attrs:{readonly:"",value:r.rangeText}})]}},{key:"footer",fn:function(r){return[h("div",{staticClass:"datepicker-footer"},[h("span",{staticClass:"range-text",domProps:{textContent:i._s(r.rangeText)}}),i._v(" "),h("ui-button",{directives:[{name:"margin",rawName:"v-margin:right",value:1,expression:"1",arg:"right"}],attrs:{theme:"light",size:"normal"},on:{click:r.clickCancel}},[h("span",{domProps:{textContent:i._s(i.$gettext("Cancel"))}})]),i._v(" "),h("ui-button",{attrs:{theme:"primary",size:"normal"},on:{click:r.clickApply}},[h("span",{domProps:{textContent:i._s(i.$gettext("Apply"))}})])],1)]}}])},"date-range-picker",i.$attrs,!1))],1)},_=[],v=o("../node_modules/vue2-daterange-picker/dist/vue2-daterange-picker.umd.min.js"),c=o.n(v),y=o("./js/composables/dateFilter.ts"),x=o("../node_modules/date-fns/esm/subMinutes/index.js"),g=o("../node_modules/date-fns/esm/subHours/index.js"),p=o("../node_modules/date-fns/esm/subDays/index.js");c().computed.startText=function(){return this.start===null?"":(0,y.W)("date",this.start)},c().computed.endText=function(){return this.end===null?"":(0,y.W)("date",this.end)};var D={components:{DateRangePicker:c()},model:{prop:"range",event:"update:range"},props:{range:{type:Object,required:!0},single:{type:Boolean,required:!1,default:!1}},computed:{maxDate(){return new Date},dateRange(){return{startDate:this.range.start,endDate:this.range.end}},localeData(){return{firstDay:y.f.value.weekStart==="monday"?1:0,applyLabel:this.$gettext("Apply"),cancelLabel:this.$gettext("Cancel"),daysOfWeek:[this.$gettext("Sun"),this.$gettext("Mon"),this.$gettext("Tue"),this.$gettext("Wed"),this.$gettext("Thu"),this.$gettext("Fri"),this.$gettext("Sat")],monthNames:[this.$gettext("Jan"),this.$gettext("Feb"),this.$gettext("Mar"),this.$gettext("Apr"),this.$gettext("May"),this.$gettext("Jun"),this.$gettext("Jul"),this.$gettext("Aug"),this.$gettext("Sep"),this.$gettext("Oct"),this.$gettext("Nov"),this.$gettext("Dec")]}},predefinedRanges(){if(this.single)return!1;const a=new Date;return{[this.$gettext("10 minutes")]:[(0,x.Z)(a,10),a],[this.$gettext("30 minutes")]:[a,(0,x.Z)(a,30),a],[this.$gettext("1 hour")]:[(0,g.Z)(a,1),a],[this.$gettext("4 hour")]:[(0,g.Z)(a,4),a],[this.$gettext("1 day")]:[(0,p.Z)(a,1),a],[this.$gettext("3 days")]:[(0,p.Z)(a,3),a],[this.$gettext("7 days")]:[(0,p.Z)(a,7),a]}}},methods:{updateValues(a){this.$emit("update:range",{start:a.startDate,end:a.endDate})}}},m=D,b=o("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&"),O=o("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),E=(0,O.Z)(m,u,_,!1,null,null,null),C=E.exports},"./js/pages/user/email/email-tracking/index.vue":function($,j,o){"use strict";o.r(j),o.d(j,{default:function(){return Q}});var u=function(){var e=this,s=e._self._c,t=e._self._setupProxy;return s("app-page",{scopedSlots:e._u([{key:"default",fn:function(){return[s("app-page-section",{on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.request.apply(null,arguments)}},scopedSlots:e._u([{key:"footer:buttons",fn:function(){return[s("ui-button",{attrs:{theme:"primary"},on:{click:function(n){return n.preventDefault(),t.search.apply(null,arguments)}}},[s("span",{domProps:{textContent:e._s(t.$gettext("Search"))}})])]},proxy:!0}])},[s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("Range"))}})]},proxy:!0},{key:"content",fn:function(){return[s(t.DateRangePicker,{attrs:{range:t.query.range},on:{"update:range":t.updateRange,keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.request.apply(null,arguments)}}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("Domain"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("Optional"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.request.apply(null,arguments)}},model:{value:t.query.domain,callback:function(n){e.$set(t.query,"domain",n)},expression:"query.domain"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("Address"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("Optional"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-text",{on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.request.apply(null,arguments)}},model:{value:t.query.address,callback:function(n){e.$set(t.query,"address",n)},expression:"query.address"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("State"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("Optional"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-select",{attrs:{options:{"":t.$gettext("Select"),unknown:t.$gettext("Unknown"),deferred:t.$gettext("Deferred"),failed:t.$gettext("Failed"),delivered:t.$gettext("Delivered")}},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.request.apply(null,arguments)}},model:{value:t.query.state,callback:function(n){e.$set(t.query,"state",n)},expression:"query.state"}})]},proxy:!0}])}),e._v(" "),s("ui-form-element",{attrs:{underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(t.$gettext("Show"))}})]},proxy:!0},{key:"content",fn:function(){return[s("input-select",{attrs:{options:{"":t.$gettext("Select"),out:t.$gettext("Outbound"),in:t.$gettext("Inbound")}},on:{keyup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:t.request.apply(null,arguments)}},model:{value:t.query.type,callback:function(n){e.$set(t.query,"type",n)},expression:"query.type"}})]},proxy:!0}])})],1),e._v(" "),s("app-page-section",[s("ui-r-table",e._b({attrs:{"vertical-layout":t.clientStore.isPhone,sort:t.sort},on:{"update:sort":function(n){t.sort=n}},scopedSlots:e._u([{key:"col:direction",fn:function({direction:n}){return[n?s("ui-tooltip",{scopedSlots:e._u([{key:"trigger",fn:function(){return[s("ui-icon",e._b({staticClass:"cursor:pointer"},"ui-icon",n==="in"?{id:"circle-arrow-left",theme:"safe",size:24}:{id:"circle-arrow-right",theme:"primary",size:24},!1))]},proxy:!0}],null,!0)},[e._v(" "),s("span",[e._v(`
                            `+e._s(n==="in"?t.$gettext("Inbound"):t.$gettext("Outbound"))+`
                        `)])]):e._e()]}},{key:"col:state",fn:function({state:n}){return[s("ui-badge",e._b({},"ui-badge",t.STATES[n],!1))]}},{key:"col:from",fn:function({from:n}){return[s("div",{staticStyle:{"overflow-wrap":"anywhere"}},[e._v(`
                        `+e._s(n)+`
                    `)])]}},{key:"col:to",fn:function({to:n,id:l}){return[s("div",{staticStyle:{"overflow-wrap":"anywhere"}},e._l(n,function(M){return s(t.RecipientBadge,e._b({key:`${l}-${M.address}`},"RecipientBadge",M,!1))}),1)]}},{key:"col:subject",fn:function({subject:n}){return[s("div",{staticStyle:{"overflow-wrap":"anywhere"}},[e._v(`
                        `+e._s(n)+`
                    `)])]}},{key:"col:size",fn:function({size:n}){return[s("span",{staticClass:"wrap:nowrap"},[e._v(`
                        `+e._s(t.humanReadableSize(n))+`
                    `)])]}},{key:"col:datetime",fn:function({datetime:n}){return[s("span",{staticClass:"wrap:nowrap"},[e._v(`
                        `+e._s(t.formatDateTime(new Date(n)))+`
                    `)])]}},{key:"col:info",fn:function({item:n}){return[s("ui-link",{attrs:{title:t.$gettext("Show Info")},on:{click:function(l){return t.showRawInfo(n)}}},[s("ui-icon",{attrs:{id:"circle-info",theme:"safe"}})],1)]}}])},"ui-r-table",{rows:t.emailLogs,columns:[{id:"direction",label:t.$gettext("Direction")},{id:"state",label:t.$gettext("State")},{id:"from",label:t.$gettext("From")},{id:"to",label:t.$gettext("To")},{id:"subject",label:t.$gettext("Subject")},{id:"size",label:t.$gettext("Size")},{id:"datetime",label:t.$gettext("Date")},{id:"info",label:t.$gettext("Actions"),sortable:!1}],isCheckable:!1,isSortable:!0,hideBeforeControls:!0},!1))],1),e._v(" "),s(t.DetailsDialog,{attrs:{item:t.details}})]},proxy:!0}])})},_=[],v=o("../node_modules/vue/dist/vue.common.prod.js"),c=o("./js/composables/index.ts"),y=function(){var e=this,s=e._self._c;return s("div",[s("ui-tooltip",{attrs:{theme:e.badge.theme},scopedSlots:e._u([{key:"trigger",fn:function(){return[s("span",{staticClass:"cursor:pointer"},[s("ui-icon",{directives:[{name:"margin",rawName:"v-margin:right",value:.5,expression:"0.5",arg:"right"}],attrs:{id:e.badge.icon,size:16,theme:e.badge.theme}}),e._v(`
                `+e._s(e.address)+`
            `)],1)]},proxy:!0}])},[e._v(`

        `+e._s(e.message||e.badge.label)+`
    `)])],1)},x=[];const{$gettext:g}=(0,c.st)(),p={delivered:{theme:"safe",label:g("Delivered"),icon:"circle-check-fill"},failed:{theme:"danger",label:g("Failed"),icon:"warning"},unknown:{theme:"neutral",label:g("Unknown"),icon:"information"},deferred:{theme:"primary",label:g("Deferred"),icon:"information"}};var D={props:{address:{type:String,required:!0},state:{type:String,required:!0},message:{type:String,required:!1,default:""}},computed:{badge(){return p[this.state]}}},m=D,b=o("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),O=(0,b.Z)(m,y,x,!1,null,null,null),E=O.exports,C=o("./js/components/local/inputs/input-date-range.vue"),a=function(){var e=this,s=e._self._c;return s("ui-dialog",{attrs:{id:"EMAIL_TRACKING_DETAILS_DIALOG",title:e.item.id},scopedSlots:e._u([{key:"content",fn:function(){return[s("div",[s("table",e._l(e.item,function(t,n){return s("tr",{key:n},[s("td",{domProps:{textContent:e._s(`${n}:`)}}),e._v(" "),s("td",[n==="to"?e._l(e.item.to,function(l){return s("recipient-badge",e._b({key:l.address},"recipient-badge",l,!1))}):s("span",{domProps:{textContent:e._s(t)}})],2)])}),0)])]},proxy:!0}])})},i=[],h={components:{RecipientBadge:E},props:{item:{type:Object,required:!0}}},r=h,d=(0,b.Z)(r,a,i,!1,null,null,null),k=d.exports,S=o("../node_modules/date-fns/esm/subDays/index.js"),P=o("./js/composables/dateFilter.ts"),B=o("./js/composables/filters.ts"),Z=o("./js/stores/index.ts"),I=o("../node_modules/ramda/es/index.js"),z=o("./js/openapi/email.ts"),L=o("./js/openapi/formats.types.ts");const N=(0,c.d$)(),{$gettext:U}=(0,c.st)(),T=async f=>{let e=null;const{data:s,error:t}=await(0,z.E)({from:(0,L.j)(f.range.start),to:f.range.end?(0,L.j)(f.range.end):void 0,domain:f.domain||void 0,address:f.address,state:f.state===""?void 0:f.state,type:f.type});return s&&s.emails&&(e=I.MRu(I.vgT("datetime"),s.emails)),t&&t.type==="BAD_REQUEST"&&N.error({title:U("Bad Request"),content:t.message}),{response:e,error:t}},W=(0,Z.oR)("client"),w=(0,v.ref)([]),A=f=>{w.value=f},K={key:"datetime",order:"DESC"},G={name:"EmailTrackingIndex",async beforeRouteEnter(f,e,s){const{response:t,error:n}=await T({range:{start:(0,S.Z)(new Date,1)}});return n?s(!1):(t&&A(t),s())}};var J=(0,v.defineComponent)({...G,props:{domain:null},setup(f){const e=f,{$gettext:s}=(0,c.st)(),t=(0,c.Rh)("EMAIL_TRACKING_DETAILS_DIALOG"),n=(0,P.W)("datetime"),l=(0,v.reactive)({range:{start:(0,S.Z)(new Date,1),end:new Date},type:"out",state:"",domain:e.domain||void 0}),M=(0,v.ref)({});function X(R){l.range.start=R.start,l.range.end=R.end}async function F(){l.domain=l.domain===""?void 0:l.domain,l.address=l.address===""?void 0:l.address,l.state=l.state===""?void 0:l.state}async function Y(){await F();const{response:R,error:ee}=await T(l);R&&A(R)}function q(R){M.value=R,t.open()}return{__sfc:!0,clientStore:W,emailLogs:w,setEmails:A,sort:K,$gettext:s,emailTrackingDetailsDialog:t,formatDateTime:n,props:e,query:l,details:M,updateRange:X,formatInputs:F,search:Y,showRawInfo:q,request:T,RecipientBadge:E,DateRangePicker:C.Z,DetailsDialog:k,humanReadableSize:B.eB,STATES:p}}}),V=J,H=(0,b.Z)(V,u,_,!1,null,null,null),Q=H.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&":function($,j,o){var u=o("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/components/local/inputs/input-date-range.vue?vue&type=style&index=0&id=47262dd6&prod&lang=scss&");u.__esModule&&(u=u.default),typeof u=="string"&&(u=[[$.id,u,""]]),u.locals&&($.exports=u.locals);var _=o("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,v=_("33f26770",u,!0,{})}}]);
