(self.webpackChunk=self.webpackChunk||[]).push([[1994],{"./js/api/commands/user/email/autoresponders.js":function(i,l,r){"use strict";r.d(l,{FX:function(){return p},Q4:function(){return d},c:function(){return m},i5:function(){return c},nd:function(){return _},xs:function(){return f}});var o=r("./js/api/command/index.js");const u=s=>s.mapProps({custom_reply_headers:s.isEqual("1"),reply_content_types:s.toSelect,reply_encodings:s.toSelect,reply_once_select:s.toSelect}),d=o.Z.get({id:"AUTORESPONDERS",url:"/CMD_EMAIL_AUTORESPONDER",domain:!0,after:s=>s.flow(s.mapValues((y,a)=>({name:a,cc:y})),s.toArray)}),p=o.Z.select({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"delete"},domain:!0}),c=o.Z.post({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"create"},domain:!0,schema:{user:o.Z.REQUIRED_STRING,text:o.Z.REQUIRED_STRING,cc:{type:String,required:!0,validator:s=>["ON","OFF"].includes(s)},email:o.Z.OPTIONAL_STRING}}),m=c.extend({params:{action:"modify"}}),_=o.Z.get({id:"AUTORESPONDER",url:"/CMD_EMAIL_AUTORESPONDER_MODIFY",domain:!0,schema:{user:o.Z.REQUIRED_STRING},after:s=>s.mapProps({text:s.flow(s.convert.toAppString,s.convert.toAppText),email:s.setDefault(""),cc:s.feedWith(1,s.flow(s.getProp("email"),s.notEmpty)),headers:u(s)})}),f=o.Z.get({id:"AUTORESPONDER_DEFAULTS",url:"/CMD_EMAIL_AUTORESPONDER_CREATE",domain:!0,after:s=>s.flow(s.getProp("headers"),u(s))})},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/modify.vue?vue&type=style&index=0&id=780ac53c&prod&lang=scss&":function(){},"./js/pages/user/email/autoresponders/modify.vue":function(i,l,r){"use strict";r.r(l),r.d(l,{default:function(){return y}});var o=function(){var e=this,t=e._self._c;return t("app-page",{attrs:{id:"modify-autoresponder"},scopedSlots:e._u([{key:"footer:buttons",fn:function(){return[t("ui-button",{attrs:{theme:"safe",disabled:!e.$valid("autoresponder")},on:{click:e.modifyAutoresponder}},[t("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])},[t("app-page-section",[t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Responder Address:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{disabled:"",value:`${e.user}@${e.$domainUnicode}`}})]},proxy:!0}])}),e._v(" "),e.$api.autoresponder.headers.custom_reply_headers?[t("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Subject Prefix"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{staticClass:"input-1px",attrs:{suffix:e.$gettext(": original subject")},model:{value:e.subjectPrefix,callback:function(n){e.subjectPrefix=n},expression:"subjectPrefix"}})]},proxy:!0}],null,!1,4142289341)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Content-Type"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:e.$api.autoresponder.headers.reply_content_types.options},model:{value:e.contentType,callback:function(n){e.contentType=n},expression:"contentType"}})]},proxy:!0}],null,!1,3234737858)}),e._v(" "),t("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Reply Frequency"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Minimum time before a repeated reply"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-select",{attrs:{options:e.$api.autoresponder.headers.reply_once_select.options},model:{value:e.onceSelect,callback:function(n){e.onceSelect=n},expression:"onceSelect"}})]},proxy:!0}],null,!1,736859023)})]:e._e(),e._v(" "),t("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Responder Message:"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-textarea",{model:{value:e.text,callback:function(n){e.text=n},expression:"text"}})]},proxy:!0},{key:"error:validateCC",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("CC should not be equal to Autoresponder address"))}})]},proxy:!0}])}),e._v(" "),e.cc?t("ui-form-element",{key:"cc-enabled",attrs:{group:"autoresponder",validators:{required:!0,validateCC:e.validateCC,regex:e.regexps.email}},scopedSlots:e._u([{key:"title",fn:function(){return[t("input-checkbox",{model:{value:e.cc,callback:function(n){e.cc=n},expression:"cc"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Send a CC to:"))}})])]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{model:{value:e.email,callback:function(n){e.email=n},expression:"email"}})]},proxy:!0},{key:"error:validateCC",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("CC should not be equal to Autoresponder address"))}})]},proxy:!0},{key:"error:regex",fn:function(){return[t("span",{domProps:{textContent:e._s(e.$gettext("Should be valid email"))}})]},proxy:!0}])}):t("ui-form-element",{key:"cc-disabled",attrs:{group:"autoresponder"},scopedSlots:e._u([{key:"title",fn:function(){return[t("input-checkbox",{model:{value:e.cc,callback:function(n){e.cc=n},expression:"cc"}},[t("span",{domProps:{textContent:e._s(e.$gettext("Send a CC to:"))}})])]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{value:e.email,disabled:""}})]},proxy:!0}],null,!1,1503500733)})],2)],1)},u=[],d=r("./js/api/commands/user/email/autoresponders.js"),p=r("./js/modules/constants.js"),c={preload:d.nd,api:[{command:d.nd,bind:"autoresponder"}],props:{user:{type:String,required:!0}},data(){return{text:"",cc:!1,email:"",subjectPrefix:"",encoding:"",onceSelect:"",contentType:""}},created(){this.text=this.$api.autoresponder.text,this.cc=this.$api.autoresponder.cc,this.email=this.$p6e.email2unicode(this.$api.autoresponder.email),this.$api.autoresponder.headers.custom_reply_headers&&(this.subjectPrefix=this.$api.autoresponder.headers.subject_prefix,this.encoding=this.$api.autoresponder.headers.reply_encodings.value,this.contentType=this.$api.autoresponder.headers.reply_content_types.value,this.onceSelect=this.$api.autoresponder.headers.reply_once_select.value),this.regexps=p.gk},methods:{async modifyAutoresponder(){await(0,d.c)({user:this.user,subject:this.subjectPrefix,reply_encoding:this.encoding,reply_content_type:this.contentType,reply_once_time:this.onceSelect,text:this.text,cc:this.cc?"ON":"OFF",email:this.$p6e.email2ascii(this.email)})&&this.$router.back()},validateCC(a){return a!==`${this.user}@${this.$domainUnicode}`}}},m=c,_=r("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/modify.vue?vue&type=style&index=0&id=780ac53c&prod&lang=scss&"),f=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),s=(0,f.Z)(m,o,u,!1,null,null,null),y=s.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/modify.vue?vue&type=style&index=0&id=780ac53c&prod&lang=scss&":function(i,l,r){var o=r("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/modify.vue?vue&type=style&index=0&id=780ac53c&prod&lang=scss&");o.__esModule&&(o=o.default),typeof o=="string"&&(o=[[i.id,o,""]]),o.locals&&(i.exports=o.locals);var u=r("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,d=u("849eadc0",o,!0,{})}}]);
