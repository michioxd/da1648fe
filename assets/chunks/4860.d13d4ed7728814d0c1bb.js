(self.webpackChunk=self.webpackChunk||[]).push([[4860],{"../node_modules/date-fns/esm/formatDistance/index.js":function(O,M,r){"use strict";r.d(M,{Z:function(){return L}});var u=r("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),l=r("../node_modules/date-fns/esm/toDate/index.js"),f=r("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function m(i,a){(0,f.Z)(2,arguments);var n=(0,l.Z)(i),p=(0,l.Z)(a),_=n.getTime()-p.getTime();return _<0?-1:_>0?1:_}function Z(i,a){(0,f.Z)(2,arguments);var n=(0,l.Z)(i),p=(0,l.Z)(a),_=n.getFullYear()-p.getFullYear(),j=n.getMonth()-p.getMonth();return _*12+j}function v(i){(0,f.Z)(1,arguments);var a=(0,l.Z)(i);return a.setHours(23,59,59,999),a}function h(i){(0,f.Z)(1,arguments);var a=(0,l.Z)(i),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function x(i){(0,f.Z)(1,arguments);var a=(0,l.Z)(i);return v(a).getTime()===h(a).getTime()}function D(i,a){(0,f.Z)(2,arguments);var n=(0,l.Z)(i),p=(0,l.Z)(a),_=m(n,p),j=Math.abs(Z(n,p)),d;if(j<1)d=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-_*j);var T=m(n,p)===-_;x((0,l.Z)(i))&&j===1&&m(i,p)===1&&(T=!1),d=_*(j-Number(T))}return d===0?0:d}function y(i,a){return(0,f.Z)(2,arguments),(0,l.Z)(i).getTime()-(0,l.Z)(a).getTime()}var E={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(a){return a<0?Math.ceil(a):Math.floor(a)}},I="trunc";function P(i){return i?E[i]:E[I]}function N(i,a,n){(0,f.Z)(2,arguments);var p=y(i,a)/1e3;return P(n==null?void 0:n.roundingMethod)(p)}var R=r("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function S(i,a){if(i==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(i[n]=a[n]);return i}function U(i){return S({},i)}var t=r("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),e=1440,s=2520,o=43200,b=86400;function L(i,a,n){var p,_;(0,f.Z)(2,arguments);var j=(0,u.j)(),d=(p=(_=n==null?void 0:n.locale)!==null&&_!==void 0?_:j.locale)!==null&&p!==void 0?p:R.Z;if(!d.formatDistance)throw new RangeError("locale must contain formatDistance property");var T=m(i,a);if(isNaN(T))throw new RangeError("Invalid time value");var c=S(U(n),{addSuffix:Boolean(n==null?void 0:n.addSuffix),comparison:T}),C,A;T>0?(C=(0,l.Z)(a),A=(0,l.Z)(i)):(C=(0,l.Z)(i),A=(0,l.Z)(a));var B=N(A,C),W=((0,t.Z)(A)-(0,t.Z)(C))/1e3,g=Math.round((B-W)/60),$;if(g<2)return n!=null&&n.includeSeconds?B<5?d.formatDistance("lessThanXSeconds",5,c):B<10?d.formatDistance("lessThanXSeconds",10,c):B<20?d.formatDistance("lessThanXSeconds",20,c):B<40?d.formatDistance("halfAMinute",0,c):B<60?d.formatDistance("lessThanXMinutes",1,c):d.formatDistance("xMinutes",1,c):g===0?d.formatDistance("lessThanXMinutes",1,c):d.formatDistance("xMinutes",g,c);if(g<45)return d.formatDistance("xMinutes",g,c);if(g<90)return d.formatDistance("aboutXHours",1,c);if(g<e){var X=Math.round(g/60);return d.formatDistance("aboutXHours",X,c)}else{if(g<s)return d.formatDistance("xDays",1,c);if(g<o){var z=Math.round(g/e);return d.formatDistance("xDays",z,c)}else if(g<b)return $=Math.round(g/o),d.formatDistance("aboutXMonths",$,c)}if($=D(A,C),$<12){var w=Math.round(g/o);return d.formatDistance("xMonths",w,c)}else{var k=$%12,F=Math.floor($/12);return k<3?d.formatDistance("aboutXYears",F,c):k<9?d.formatDistance("overXYears",F,c):d.formatDistance("almostXYears",F+1,c)}}},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/php-safe-mode.vue?vue&type=style&index=0&id=42c0e946&prod&lang=scss&":function(){},"./js/composables/dateFilter.ts":function(O,M,r){"use strict";r.d(M,{W:function(){return Z},f:function(){return f.f}});var u=r("../node_modules/ramda/es/index.js"),l=r("../node_modules/date-fns/esm/format/index.js"),f=r("./js/modules/date-formats.ts"),m=r("./js/modules/customizations/date-formats/default.ts");const Z=u.WAo((v,h)=>{if(h)try{return(0,l.Z)(h,f.f.value[v])}catch(x){return console.warn(`Given ${v} format is incorrect:
${x.message}`),(0,l.Z)(h,m.d[v])}return""})},"./js/composables/filters.ts":function(O,M,r){"use strict";r.d(M,{Q0:function(){return N},aS:function(){return S},d5:function(){return R},eB:function(){return E},hT:function(){return D},kC:function(){return x},n9:function(){return P},zM:function(){return y}});var u=r("../node_modules/date-fns/esm/formatDistance/index.js"),l=r("../node_modules/punycode/punycode.es6.js"),f=r("./js/composables/dateFilter.ts"),m=r("./js/composables/gettext.ts");const{$gettext:Z,$ngettext:v,$gettextInterpolate:h}=(0,m.Z)(),x=t=>{var e;return t?((e=t.at(0))===null||e===void 0?void 0:e.toUpperCase())+t.slice(1):""},D=(t,e="datetime")=>(0,f.W)(e,t),y=t=>(0,u.Z)(t,new Date),E=(t,e=1024)=>{const s=Number(t);if(!s)return"0 B";const o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],b=Math.floor(Math.log(s)/Math.log(e));return`${parseFloat((s/e**b).toFixed(2))} ${o[b]}`},I=t=>{try{return(0,l.xX)(t)}catch(e){return t}},P=t=>(0,l.xX)(t),N=t=>{if(!t||!t.includes("@"))return t;const[e,s]=t.split("@");return[e,I(s)].join("@")},R=t=>{if(t<60)return Z("less than a minute");const e=Math.floor(t/60)%60,s=Math.floor(t/3600)%24,o=Math.floor(t/(3600*24)),b=[o?v("%{days} day","%{days} days",o):null,s?v("%{hours} hour","%{hours} hours",s):null,e?v("%{minutes} minute","%{minutes} minutes",e):null].filter(Boolean).join(", ");return h(b,{days:o,hours:s,minutes:e})},S=(t,e)=>t.length<=e?t:`${t.substring(0,e)}...`,U=()=>({capitalize:x,date:D,distanceFromNow:y,humanReadableSize:E,p6eUnicode:P,p6eUnicodeEmail:N,formatUptime:R,truncateString:S})},"./js/pages/admin/php-safe-mode.vue":function(O,M,r){"use strict";r.r(M),r.d(M,{default:function(){return U}});var u={};r.r(u),r.d(u,{disableBasedir:function(){return D},enableBasedir:function(){return x},getData:function(){return h},safeDefaults:function(){return y}});var l=function(){var e=this,s=e._self._c;return s("app-page",{attrs:{id:"php-safe-mode"},scopedSlots:e._u([{key:"default",fn:function(){return[s("app-page-section",[s("ui-form-element",{attrs:{underline:!1},scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Show Domains that"))}})]},proxy:!0},{key:"content",fn:function(){return[s("ui-input-group",{scopedSlots:e._u([{key:"additions:left",fn:function(){return[s("input-select",{staticClass:"search-type-select",attrs:{options:{startswith:e.$gettext("Starts With"),contains:e.$gettext("Contains"),equals:e.$gettext("Equals")}},model:{value:e.filter.type,callback:function(o){e.$set(e.filter,"type",o)},expression:"filter.type"}})]},proxy:!0},{key:"input",fn:function(){return[s("input-text",{model:{value:e.filter.value,callback:function(o){e.$set(e.filter,"value",o)},expression:"filter.value"}})]},proxy:!0},{key:"additions:right",fn:function(){return[s("ui-button",{attrs:{theme:"light",size:"normal",icon:"close",title:e.$gettext("Clear Search")},on:{click:function(o){e.filter.value=""}}})]},proxy:!0}])})]},proxy:!0}])})],1),e._v(" "),s("app-page-section",[s("ui-api-table",e._b({on:{"action:enable":e.enableBasedir,"action:disable":e.disableBasedir},scopedSlots:e._u([{key:"col:domain",fn:function({domain:o,checkbox:b}){return[typeof b=="undefined"?s("ui-tooltip",{scopedSlots:e._u([{key:"trigger",fn:function(){return[s("strong",[e._v(`
                                `+e._s(e.p6eUnicode(o))+`
                            `)])]},proxy:!0}],null,!0)},[e._v(" "),s("span",{domProps:{textContent:e._s(e.$gettext("This domain is controlled by the main domain for this User."))}})]):s("strong",[e._v(e._s(e.p6eUnicode(o)))])]}},{key:"col:user",fn:function({user:o}){return[s("ui-link",{attrs:{name:"reseller/users/view",params:{user:o}}},[e._v(`
                        `+e._s(o)+`
                    `)])]}},{key:"col:php",fn:function({php:o,open_basedir:b}){return[e.settings.have_safemode?s("ui-badge",{attrs:{theme:o?"safe":"danger",title:b?e.$gettext("Enabled"):e.$gettext("Disabled")}},[s("span",{domProps:{textContent:e._s(e.$gettext("PHP"))}})]):e._e()]}},{key:"col:open_basedir",fn:function({open_basedir:o}){return[e.settings.have_openbasedir?s("ui-badge",{attrs:{theme:o?"safe":"danger",title:o?e.$gettext("Enabled"):e.$gettext("Disabled")}},[s("span",{domProps:{textContent:e._s(e.$gettext("Open BaseDir"))}})]):e._e()]}}]),model:{value:e.select,callback:function(o){e.select=o},expression:"select"}},"ui-api-table",{command:e.$commands.getData,rowID:"domain",columns:{domain:{label:e.$gettext("Domain"),grow:!0},user:e.$gettext("User"),open_basedir:{label:e.$gettext("Open Basedir"),visible:e.settings.have_openbasedir},php:{label:e.$gettext("PHP"),visible:e.settings.have_safemode}},actions:{enable:e.$gettext("Enable Open Basedir"),disable:e.$gettext("Disable Open Basedir")},filters:[e.filter],disableSelectFor:o=>typeof o.checkbox=="undefined",editable:!1},!1))],1),e._v(" "),s("app-page-section",[s("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[s("span",{domProps:{textContent:e._s(e.$gettext("Defaults for new domains"))}})]},proxy:!0},{key:"content",fn:function(){return[s("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}]},[s("input-checkbox",{model:{value:e.safeMode,callback:function(o){e.safeMode=o},expression:"safeMode"}},[s("span",{domProps:{textContent:e._s(e.$gettext("Safe Mode"))}})]),e._v(" "),s("input-checkbox",{directives:[{name:"margin",rawName:"v-margin",value:[0,1],expression:"[0, 1]"}],model:{value:e.openBaseDir,callback:function(o){e.openBaseDir=o},expression:"openBaseDir"}},[s("span",{domProps:{textContent:e._s(e.$gettext("Open BaseDir"))}})])],1)]},proxy:!0}])})],1)]},proxy:!0},{key:"footer:buttons",fn:function(){return[s("ui-button",{attrs:{theme:"safe"},on:{click:e.saveSettings}},[s("span",{domProps:{textContent:e._s(e.$gettext("Save"))}})])]},proxy:!0}])})},f=[],m=r("./js/api/command/index.js"),Z=r("./js/modules/utils/index.js");const v="/CMD_PHP_SAFE_MODE",h=m.Z.get({id:"PHP_SAFE_MODE_DATA",url:v,params:{sort1:2},pagination:!0,after:t=>t.flow(t.processTableInfo("domains"),t.moveProp("domains","rows"),t.mapProps({rows:t.flow(t.toArray,t.mapArray(t.flow(t.mapProps({php:t.isEqual("ON"),open_basedir:t.isEqual("ON")})))),have_openbasedir:t.isEqual("1"),have_safemode:t.isEqual("1"),open_basedir:t.isEqual("ON"),safemode:t.isEqual("ON")}))}),x=m.Z.select({url:v,params:{action:"set",enable_obd:!0}}),D=m.Z.select({url:v,params:{action:"set",disable_obd:!0}}),y=m.Z.post({url:v,params:{action:"enabled"},schema:{enabled:m.Z.REQUIRED_STRING,obdenabled:m.Z.REQUIRED_STRING}});var E=r("./js/composables/filters.ts"),I={preload:h,api:[{command:h,bind:"data"}],commands:u,data(){return{select:[],safeMode:!1,openBaseDir:!1,filter:{column:"domain",value:"",type:"equals"}}},computed:{settings(){return this.$api.data}},created(){this.safeMode=this.settings.safemode,this.openBaseDir=this.settings.open_basedir},methods:{p6eUnicode:E.n9,enableBasedir(){x({select:this.select}).then(this.$reloadApiTable)},disableBasedir(){D({select:this.select}).then(this.$reloadApiTable)},saveSettings(){y({enabled:this.safeMode?"ON":"OFF",obdenabled:this.openBaseDir?"ON":"OFF"})}}},P=I,N=r("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/php-safe-mode.vue?vue&type=style&index=0&id=42c0e946&prod&lang=scss&"),R=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),S=(0,R.Z)(P,l,f,!1,null,null,null),U=S.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/php-safe-mode.vue?vue&type=style&index=0&id=42c0e946&prod&lang=scss&":function(O,M,r){var u=r("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/admin/php-safe-mode.vue?vue&type=style&index=0&id=42c0e946&prod&lang=scss&");u.__esModule&&(u=u.default),typeof u=="string"&&(u=[[O.id,u,""]]),u.locals&&(O.exports=u.locals);var l=r("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,f=l("5fd85f27",u,!0,{})}}]);
