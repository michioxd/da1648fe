"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2932],{"../node_modules/date-fns/esm/_lib/requiredArgs/index.js":function(j,y,a){a.d(y,{Z:function(){return l}});function l(f,c){if(c.length<f)throw new TypeError(f+" argument"+(f>1?"s":"")+" required, but only "+c.length+" present")}},"../node_modules/date-fns/esm/isAfter/index.js":function(j,y,a){a.d(y,{Z:function(){return c}});var l=a("../node_modules/date-fns/esm/toDate/index.js"),f=a("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function c(s,i){(0,f.Z)(2,arguments);var u=(0,l.Z)(s),D=(0,l.Z)(i);return u.getTime()>D.getTime()}},"../node_modules/date-fns/esm/isSameDay/index.js":function(j,y,a){a.d(y,{Z:function(){return s}});var l=a("../node_modules/date-fns/esm/toDate/index.js"),f=a("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function c(i){(0,f.Z)(1,arguments);var u=(0,l.Z)(i);return u.setHours(0,0,0,0),u}function s(i,u){(0,f.Z)(2,arguments);var D=c(i),v=c(u);return D.getTime()===v.getTime()}},"../node_modules/date-fns/esm/toDate/index.js":function(j,y,a){a.d(y,{Z:function(){return c}});var l=a("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function f(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?f=function(u){return typeof u}:f=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},f(s)}function c(s){(0,l.Z)(1,arguments);var i=Object.prototype.toString.call(s);return s instanceof Date||f(s)==="object"&&i==="[object Date]"?new Date(s.getTime()):typeof s=="number"||i==="[object Number]"?new Date(s):((typeof s=="string"||i==="[object String]")&&typeof console!="undefined"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}},"./js/openapi/vacations.ts":function(j,y,a){a.d(y,{CP:function(){return v},Mw:function(){return D},VO:function(){return I},de:function(){return u}});var l=a("./js/api/openapi/index.ts"),f=a("../node_modules/runtypes/lib/index.js"),c=a.n(f),s=a("./js/openapi/web.types.ts");const i=(0,l.$d)(),u=l.an.Default(async(h,P)=>{const{data:g}=await i.get(`/api/emailvacation/${h}`,P);return g.status==="success"&&f.Dictionary(s.fi).guard(g.data)===!1?i.failure({type:"INVALID_RESPONSE",response:g.data}):g}),D=l.an.Default(async(h,P,g)=>{const{data:x}=await i.get(`/api/emailvacation/${h}/${P}`,g);return x.status==="success"&&s.mN.guard(x.data)===!1?i.failure({type:"INVALID_RESPONSE",response:x.data}):x}),v=l.an.Default(async(h,P,g,x)=>{const{data:S}=await i.put(`/api/emailvacation/${h}/${P}`,g,x);return S}),I=l.an.Default(async(h,P,g)=>{const{data:x}=await i.delete(`/api/emailvacation/${h}/${P}`,g);return x})},"./js/pages/user/email/vacations/reply-intervals.ts":function(j,y,a){a.d(y,{x:function(){return D}});var l=a("./js/composables/index.ts");const{$ngettext:f,$gettextInterpolate:c}=(0,l.st)(),s=v=>[v*60,c(f("%{m} minute","%{m} minutes",v),{m:v})],i=v=>[v*3600,c(f("%{h} hour","%{h} hours",v),{h:v})],u=v=>[v*24*3600,c(f("%{d} day","%{d} days",v),{d:v})],D=Object.fromEntries([s(1),s(10),s(30),i(1),i(2),i(6),i(12),u(1),u(2),u(3),u(4),u(5),u(6),u(7)])},"./js/pages/user/email/vacations/modify.vue":function(j,y,a){a.r(y),a.d(y,{default:function(){return S}});var l=function(){var n=this,e=n._self._c,t=n._self._setupProxy;return e("app-page",{scopedSlots:n._u([{key:"default",fn:function(){return[e("app-page-section",[e("ui-form-element",{scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Vacation Account:"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-text",{attrs:{disabled:"",value:`${t.props.user}@${t.domainUnicode}`}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{group:"vacation"},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Plain Content"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-checkbox",{model:{value:t.vacation.plainContent,callback:function(r){n.$set(t.vacation,"plainContent",r)},expression:"vacation.plainContent"}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{validators:{required:!0,regex:t.regex}},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Subject Prefix"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-text",{attrs:{suffix:t.$gettext(": original subject")},model:{value:t.vacation.subjectPrefix,callback:function(r){n.$set(t.vacation,"subjectPrefix",r)},expression:"vacation.subjectPrefix"}})]},proxy:!0},{key:"error:regex",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Invalid Subject"))}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{group:"vacation",validators:{required:!0}},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Vacation Start"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-datetime",{attrs:{min:t.today,"show-seconds":!0,"let-select-day":t.today},model:{value:t.vacation.startTime,callback:function(r){n.$set(t.vacation,"startTime",r)},expression:"vacation.startTime"}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{group:"vacation",validators:{required:!0,validateTime:t.validateTime}},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Vacation End"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-datetime",{ref:"endinput",attrs:{min:t.vacation.startTime,"show-seconds":!0,"let-select-day":t.vacation.startTime},model:{value:t.vacation.endTime,callback:function(r){n.$set(t.vacation,"endTime",r)},expression:"vacation.endTime"}})]},proxy:!0},{key:"error:validateTime",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("End time should be larger than start time"))}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Reply Frequency"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Minimum time before a repeated reply"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-select",{attrs:{options:t.replyIntervals},model:{value:t.vacation.replyIntervalSec,callback:function(r){n.$set(t.vacation,"replyIntervalSec",r)},expression:"vacation.replyIntervalSec"}})]},proxy:!0}])}),n._v(" "),e("ui-form-element",{attrs:{group:"vacation",validators:{required:!0}},scopedSlots:n._u([{key:"title",fn:function(){return[e("span",{domProps:{textContent:n._s(t.$gettext("Vacation Message:"))}})]},proxy:!0},{key:"content",fn:function(){return[e("input-textarea",{model:{value:t.vacation.message,callback:function(r){n.$set(t.vacation,"message",r)},expression:"vacation.message"}})]},proxy:!0}])})],1)]},proxy:!0},{key:"footer:buttons",fn:function(){return[e("ui-button",{attrs:{theme:"primary",disabled:!n.$valid("vacation")},on:{click:t.modifyVacation}},[e("span",{domProps:{textContent:n._s(t.$gettext("Modify"))}})])]},proxy:!0}])})},f=[],c=a("../node_modules/vue/dist/vue.common.prod.js"),s=a("./js/composables/index.ts"),i=a("../node_modules/vue-router/composables.mjs"),u=a("./js/openapi/vacations.ts"),D=a("../node_modules/date-fns/esm/isAfter/index.js"),v=a("../node_modules/date-fns/esm/isSameDay/index.js"),I=a("./js/pages/user/email/vacations/reply-intervals.ts"),h=(0,c.defineComponent)({__name:"modify",props:{user:null},setup(M){const n=M,{$gettext:e}=(0,s.st)(),{domain:t,domainUnicode:r}=(0,s.ay)(),m=(0,s.d$)(),d=(0,i.tv)(),b=(0,s.Lu)({},e("Vacation Messages")),o=(0,c.reactive)({message:"",startTime:new Date,endTime:new Date,subjectPrefix:"",plainContent:!1,replyIntervalSec:"86400"}),T=/^[\p{L}\p{N}\s]+$/u,$=(0,c.computed)(()=>{const p=new Date;return p.setHours(0,0,0),p}),_=(0,c.computed)(()=>({message:o.message,startTime:E(o.startTime),endTime:E(o.endTime),plainContent:o.plainContent,subjectPrefix:o.subjectPrefix,replyIntervalSec:Number(o.replyIntervalSec)}));(0,c.watch)(o,()=>{(0,D.Z)(o.startTime,o.endTime)&&(o.endTime=o.startTime)}),A();function E(p){return p.toISOString()}async function A(){await(0,u.Mw)(t.value,n.user).then(p=>{p.data&&(o.plainContent=p.data.plainContent,o.message=p.data.message,o.startTime=new Date(p.data.startTime),o.endTime=new Date(p.data.endTime),o.subjectPrefix=p.data.subjectPrefix,o.replyIntervalSec=p.data.replyIntervalSec.toString())})}async function C(){(0,u.CP)(t.value,n.user,_.value).then(p=>{p.status==="success"&&(m.success({title:e("Vacation Messages"),content:e("Vacation message succesffully modified!")}),d.push({name:"user/email/vacations"})),p.error&&b(p.error)})}function O(){return(0,v.Z)(o.startTime,o.endTime)?o.endTime>o.startTime:!0}return{__sfc:!0,$gettext:e,domain:t,domainUnicode:r,notify:m,router:d,errorMessages:b,props:n,vacation:o,regex:T,today:$,requestData:_,toAPIDate:E,fetchUserData:A,modifyVacation:C,validateTime:O,replyIntervals:I.x}}}),P=h,g=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),x=(0,g.Z)(P,l,f,!1,null,null,null),S=x.exports},"../node_modules/vue-router/composables.mjs":function(j,y,a){a.d(y,{tv:function(){return c},yj:function(){return s}});var l=a("../node_modules/vue/dist/vue.common.prod.js");/*!
  * vue-router v3.6.5
  * (c) 2022 Evan You
  * @license MIT
  */function f(e){if(!getCurrentInstance())throw new Error("[vue-router]: Missing current instance. "+e+"() must be called inside <script setup> or setup().")}function c(){return(0,l.getCurrentInstance)().proxy.$root.$router}function s(){var e=(0,l.getCurrentInstance)().proxy.$root;if(!e._$route){var t=(0,l.effectScope)(!0).run(function(){return(0,l.shallowReactive)(Object.assign({},e.$router.currentRoute))});e._$route=t,e.$router.afterEach(function(r){Object.assign(t,r)})}return e._$route}function i(e){return h(e,u)}function u(e,t,r){var m=e.matched,d=t.matched;return m.length>=r&&m.slice(0,r+1).every(function(b,o){return b===d[o]})}function D(e,t,r){var m=e.matched,d=t.matched;return m.length<r||m[r]!==d[r]}function v(e){return h(e,D)}var I=function(){};function h(e,t){for(var r=getCurrentInstance(),m=c(),d=r.proxy;d&&d.$vnode&&d.$vnode.data&&d.$vnode.data.routerViewDepth==null;)d=d.$parent;var b=d&&d.$vnode&&d.$vnode.data?d.$vnode.data.routerViewDepth:null;if(b!=null){var o=m.beforeEach(function(T,$,_){return t(T,$,b)?e(T,$,_):_()});return onUnmounted(o),o}return I}function P(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function g(e,t){var r=function(b){var o=t[b],T=e[b];if(typeof o=="string"){if(o!==T)return{v:!1}}else if(!Array.isArray(T)||T.length!==o.length||o.some(function($,_){return $!==T[_]}))return{v:!1}};for(var m in t){var d=r(m);if(d)return d.v}return!0}function x(e,t){return Array.isArray(e)?S(e,t):Array.isArray(t)?S(t,e):e===t}function S(e,t){return Array.isArray(t)?e.length===t.length&&e.every(function(r,m){return r===t[m]}):e.length===1&&e[0]===t}function M(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!x(e[r],t[r]))return!1;return!0}function n(e){var t=c(),r=s(),m=computed(function(){return t.resolve(unref(e.to),r)}),d=computed(function(){var $=m.value.route,_=$.matched,E=_.length,A=_[E-1],C=r.matched;if(!A||!C.length)return-1;var O=C.indexOf(A);if(O>-1)return O;var p=C[C.length-2];return E>1&&p&&p===A.parent}),b=computed(function(){return d.value>-1&&g(r.params,m.value.route.params)}),o=computed(function(){return d.value>-1&&d.value===r.matched.length-1&&M(r.params,m.value.route.params)}),T=function($){var _=m.value.route;return P($)?e.replace?t.replace(_):t.push(_):Promise.resolve()};return{href:computed(function(){return m.value.href}),route:computed(function(){return m.value.route}),isExactActive:o,isActive:b,navigate:T}}}}]);
