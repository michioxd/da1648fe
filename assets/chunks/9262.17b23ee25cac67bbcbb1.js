"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9262],{"../node_modules/date-fns/esm/formatDistance/index.js":function(y,N,r){r.d(N,{Z:function(){return B}});var e=r("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),s=r("../node_modules/date-fns/esm/toDate/index.js"),d=r("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function h(c,u){(0,d.Z)(2,arguments);var i=(0,s.Z)(c),T=(0,s.Z)(u),k=i.getTime()-T.getTime();return k<0?-1:k>0?1:k}function x(c,u){(0,d.Z)(2,arguments);var i=(0,s.Z)(c),T=(0,s.Z)(u),k=i.getFullYear()-T.getFullYear(),R=i.getMonth()-T.getMonth();return k*12+R}function I(c){(0,d.Z)(1,arguments);var u=(0,s.Z)(c);return u.setHours(23,59,59,999),u}function P(c){(0,d.Z)(1,arguments);var u=(0,s.Z)(c),i=u.getMonth();return u.setFullYear(u.getFullYear(),i+1,0),u.setHours(23,59,59,999),u}function g(c){(0,d.Z)(1,arguments);var u=(0,s.Z)(c);return I(u).getTime()===P(u).getTime()}function a(c,u){(0,d.Z)(2,arguments);var i=(0,s.Z)(c),T=(0,s.Z)(u),k=h(i,T),R=Math.abs(x(i,T)),m;if(R<1)m=0;else{i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-k*R);var M=h(i,T)===-k;g((0,s.Z)(c))&&R===1&&h(c,T)===1&&(M=!1),m=k*(R-Number(M))}return m===0?0:m}function t(c,u){return(0,d.Z)(2,arguments),(0,s.Z)(c).getTime()-(0,s.Z)(u).getTime()}var o={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(u){return u<0?Math.ceil(u):Math.floor(u)}},f="trunc";function n(c){return c?o[c]:o[f]}function p(c,u,i){(0,d.Z)(2,arguments);var T=t(c,u)/1e3;return n(i==null?void 0:i.roundingMethod)(T)}var v=r("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function E(c,u){if(c==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&(c[i]=u[i]);return c}function j(c){return E({},c)}var l=r("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),_=1440,Z=2520,L=43200,D=86400;function B(c,u,i){var T,k;(0,d.Z)(2,arguments);var R=(0,e.j)(),m=(T=(k=i==null?void 0:i.locale)!==null&&k!==void 0?k:R.locale)!==null&&T!==void 0?T:v.Z;if(!m.formatDistance)throw new RangeError("locale must contain formatDistance property");var M=h(c,u);if(isNaN(M))throw new RangeError("Invalid time value");var O=E(j(i),{addSuffix:Boolean(i==null?void 0:i.addSuffix),comparison:M}),G,$;M>0?(G=(0,s.Z)(u),$=(0,s.Z)(c)):(G=(0,s.Z)(c),$=(0,s.Z)(u));var S=p($,G),w=((0,l.Z)($)-(0,l.Z)(G))/1e3,A=Math.round((S-w)/60),b;if(A<2)return i!=null&&i.includeSeconds?S<5?m.formatDistance("lessThanXSeconds",5,O):S<10?m.formatDistance("lessThanXSeconds",10,O):S<20?m.formatDistance("lessThanXSeconds",20,O):S<40?m.formatDistance("halfAMinute",0,O):S<60?m.formatDistance("lessThanXMinutes",1,O):m.formatDistance("xMinutes",1,O):A===0?m.formatDistance("lessThanXMinutes",1,O):m.formatDistance("xMinutes",A,O);if(A<45)return m.formatDistance("xMinutes",A,O);if(A<90)return m.formatDistance("aboutXHours",1,O);if(A<_){var z=Math.round(A/60);return m.formatDistance("aboutXHours",z,O)}else{if(A<Z)return m.formatDistance("xDays",1,O);if(A<L){var W=Math.round(A/_);return m.formatDistance("xDays",W,O)}else if(A<D)return b=Math.round(A/L),m.formatDistance("aboutXMonths",b,O)}if(b=a($,G),b<12){var K=Math.round(A/L);return m.formatDistance("xMonths",K,O)}else{var U=b%12,C=Math.floor(b/12);return U<3?m.formatDistance("aboutXYears",C,O):U<9?m.formatDistance("overXYears",C,O):m.formatDistance("almostXYears",C+1,O)}}},"./js/api/commands/admin/users/packages.js":function(y,N,r){r.d(N,{$o:function(){return x},$y:function(){return g},EV:function(){return d},Nx:function(){return I},kz:function(){return a},wI:function(){return h},xp:function(){return P}});var e=r("./js/api/command/index.js");const s="/CMD_MANAGE_RESELLER_PACKAGES",d=e.Z.get({id:"RESELLER_PACKAGES",url:s,params:{bytes:!0},pagination:!0,after:t=>t.toTable(t.mapArrayProps({bandwidth:t.convert.toAppLimit,quota:t.convert.toAppLimit,ips:o=>t.convert.toAppNumber(o||"0")}))}),h=e.Z.post({url:s,schema:{select:e.Z.ROWS},before:({select:t})=>t.reduce((o,f,n)=>({...o,[`delete${n}`]:f}),{delete:!0})}),x=e.Z.post({url:s,params:{export:!0},schema:{select:e.Z.ROWS}}),I=e.Z.post({url:s,params:{action:"import"},schema:{import:e.Z.REQUIRED_STRING}}),P=e.Z.get({url:"/CMD_SHOW_RESELLER_PACKAGE",id:"RESELLER_PACKAGE",params:{bytes:!0},query:{package:e.Z.REQUIRED_STRING},after:t=>t.flow(o=>({data:o}),t.moveProp({"data.ips":"ips","data.custom_items":"customItems","data.have_inode":"haveInode","data.dns":"dns","data.ip":"ip","data.create_user_home_override":"homeOverride","data.cgroup":"cgroup"}),t.mapProps({homeOverride:t.flow(o=>o||{},t.toSelect),customItems:t.flow(t.toArray,t.mapArray(o=>{const f={type:o.type,description:o.desc,label:o.string,name:o.name};switch(o.type){case"checkbox":return{...f,value:o.checked==="yes"};case"text":return{...f,value:o.value};case"listbox":return{...f,value:Object.values(o.select).find(n=>n.selected).value,options:t.reduce((n,p)=>({...n,[p.value]:p.text}))(o.select)};default:return!1}}),o=>o.filter(f=>!!f)),haveInode:t.convert.toAppBoolean,dns:t.getProp("value"),ip:t.getProp("value"),ips:t.convert.toAppNumber,features:t.feedWith(1,t.flow(t.getProp("data"),t.filter(t.flow(t.getProp("type"),t.isEqual("checkbox"))),t.mapValues(t.flow(t.getProp("checked"),t.convert.toAppBoolean)))),limits:t.feedWith(1,t.flow(t.getProp("data"),t.filter(t.flow(t.getProp("type"),t.isEqual("unlimited"))),t.mapValues(o=>{const f=t.convert.toAppLimit(o.value)===1/0;return{value:f?"":o.value,unlimited:f}}))),cgroup:o=>o?Object.values({...o.options||{},...o.saved||{}}):[]}),t.deleteProp("data"))}),g=e.Z.post({url:s,params:{add:!0},schema:{bandwidth:e.Z.OPTIONAL_STRING,ubandwidth:e.Z.OPTIONAL_BOOL,quota:e.Z.OPTIONAL_STRING,uquota:e.Z.OPTIONAL_BOOL,inode:e.Z.OPTIONAL_STRING,uinode:e.Z.OPTIONAL_BOOL,vdomains:e.Z.OPTIONAL_STRING,uvdomains:e.Z.OPTIONAL_BOOL,nsubdomains:e.Z.OPTIONAL_STRING,unsubdomains:e.Z.OPTIONAL_BOOL,nemails:e.Z.OPTIONAL_STRING,unemails:e.Z.OPTIONAL_BOOL,nemailf:e.Z.OPTIONAL_STRING,unemailf:e.Z.OPTIONAL_BOOL,nemailml:e.Z.OPTIONAL_STRING,unemailml:e.Z.OPTIONAL_BOOL,nemailr:e.Z.OPTIONAL_STRING,unemailr:e.Z.OPTIONAL_BOOL,mysql:e.Z.OPTIONAL_STRING,umysql:e.Z.OPTIONAL_BOOL,domainptr:e.Z.OPTIONAL_STRING,udomainptr:e.Z.OPTIONAL_BOOL,ftp:e.Z.OPTIONAL_STRING,uftp:e.Z.OPTIONAL_BOOL,aftp:e.Z.OPTIONAL_STRING,cgi:e.Z.OPTIONAL_STRING,git:e.Z.OPTIONAL_STRING,php:e.Z.OPTIONAL_STRING,spam:e.Z.OPTIONAL_STRING,catchall:e.Z.OPTIONAL_STRING,ssl:e.Z.OPTIONAL_STRING,ssh:e.Z.OPTIONAL_STRING,userssh:e.Z.OPTIONAL_STRING,oversell:e.Z.OPTIONAL_STRING,cron:e.Z.OPTIONAL_STRING,sysinfo:e.Z.OPTIONAL_STRING,login_keys:e.Z.OPTIONAL_STRING,dnscontrol:e.Z.OPTIONAL_STRING,dns:e.Z.REQUIRED_STRING,serverip:e.Z.OPTIONAL_STRING,packagename:e.Z.OPTIONAL_STRING,create_user_home_override:e.Z.OPTIONAL_STRING,nusers:e.Z.OPTIONAL_STRING,unusers:e.Z.OPTIONAL_BOOL}}),a=e.Z.post({url:s,schema:{action:e.Z.REQUIRED_STRING,from:e.Z.REQUIRED_STRING,to:e.Z.REQUIRED_STRING},before:({from:t,to:o})=>({from:null,to:null,old_package:t,new_package:o})})},"./js/composables/dateFilter.ts":function(y,N,r){r.d(N,{W:function(){return x},f:function(){return d.f}});var e=r("../node_modules/ramda/es/index.js"),s=r("../node_modules/date-fns/esm/format/index.js"),d=r("./js/modules/date-formats.ts"),h=r("./js/modules/customizations/date-formats/default.ts");const x=e.WAo((I,P)=>{if(P)try{return(0,s.Z)(P,d.f.value[I])}catch(g){return console.warn(`Given ${I} format is incorrect:
${g.message}`),(0,s.Z)(P,h.d[I])}return""})},"./js/composables/filters.ts":function(y,N,r){r.d(N,{Q0:function(){return p},aS:function(){return E},d5:function(){return v},eB:function(){return o},hT:function(){return a},kC:function(){return g},n9:function(){return n},zM:function(){return t}});var e=r("../node_modules/date-fns/esm/formatDistance/index.js"),s=r("../node_modules/punycode/punycode.es6.js"),d=r("./js/composables/dateFilter.ts"),h=r("./js/composables/gettext.ts");const{$gettext:x,$ngettext:I,$gettextInterpolate:P}=(0,h.Z)(),g=l=>{var _;return l?((_=l.at(0))===null||_===void 0?void 0:_.toUpperCase())+l.slice(1):""},a=(l,_="datetime")=>(0,d.W)(_,l),t=l=>(0,e.Z)(l,new Date),o=(l,_=1024)=>{const Z=Number(l);if(!Z)return"0 B";const L=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],D=Math.floor(Math.log(Z)/Math.log(_));return`${parseFloat((Z/_**D).toFixed(2))} ${L[D]}`},f=l=>{try{return(0,s.xX)(l)}catch(_){return l}},n=l=>(0,s.xX)(l),p=l=>{if(!l||!l.includes("@"))return l;const[_,Z]=l.split("@");return[_,f(Z)].join("@")},v=l=>{if(l<60)return x("less than a minute");const _=Math.floor(l/60)%60,Z=Math.floor(l/3600)%24,L=Math.floor(l/(3600*24)),D=[L?I("%{days} day","%{days} days",L):null,Z?I("%{hours} hour","%{hours} hours",Z):null,_?I("%{minutes} minute","%{minutes} minutes",_):null].filter(Boolean).join(", ");return P(D,{days:L,hours:Z,minutes:_})},E=(l,_)=>l.length<=_?l:`${l.substring(0,_)}...`,j=()=>({capitalize:g,date:a,distanceFromNow:t,humanReadableSize:o,p6eUnicode:n,p6eUnicodeEmail:p,formatUptime:v,truncateString:E})},"./js/components/local/import-packages-dialog.vue":function(y,N,r){r.d(N,{Z:function(){return P}});var e=function(){var a=this,t=a._self._c;return t("ui-dialog",{attrs:{id:"IMPORT_PACKAGES_DIALOG",size:"normal",title:a.$gettext("Import packages")},scopedSlots:a._u([{key:"content",fn:function(){return[t("input-textarea",{staticClass:"width:100%",model:{value:a.text,callback:function(o){a.text=o},expression:"text"}})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"primary",disabled:!a.text},on:{click:function(o){return a.$emit("import",a.text)}}},[t("span",{domProps:{textContent:a._s(a.$gettext("Import"))}})])]},proxy:!0}])})},s=[],d={data:()=>({text:""})},h=d,x=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),I=(0,x.Z)(h,e,s,!1,null,null,null),P=I.exports},"./js/components/local/package-action-dialog.vue":function(y,N,r){r.d(N,{Z:function(){return P}});var e=function(){var a=this,t=a._self._c;return t("ui-dialog",{attrs:{id:"PACKAGE_ACTION_DIALOG"},scopedSlots:a._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:a._s(a.type==="rename"?a.$gettext("Rename Package"):a.$gettext("Copy Package"))}})]},proxy:!0},{key:"content",fn:function(){return[t("ui-form-element",{attrs:{vertical:""},scopedSlots:a._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:a._s(a.$gettext("Old Package Name"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{value:a.from,disabled:""}})]},proxy:!0}])}),a._v(" "),t("ui-form-element",{attrs:{group:"package-action",vertical:"",validators:{required:!0,validateName:a.validateName,regex:/^[a-zA-Z0-9\-\_]+$/,maxLength:20}},scopedSlots:a._u([{key:"title",fn:function(){return[t("span",{domProps:{textContent:a._s(a.$gettext("New Package Name"))}})]},proxy:!0},{key:"content",fn:function(){return[t("input-text",{attrs:{autofocus:""},on:{keyup:function(o){return!o.type.indexOf("key")&&a._k(o.keyCode,"enter",13,o.key,"Enter")?null:a.submit.apply(null,arguments)}},model:{value:a.to,callback:function(o){a.to=o},expression:"to"}})]},proxy:!0},{key:"error:regex",fn:function(){return[t("span",{domProps:{textContent:a._s(a.$gettext("Package name should not contain special characters"))}})]},proxy:!0},{key:"error:validateName",fn:function(){return[t("span",{domProps:{textContent:a._s(a.$gettext("Package already exists"))}})]},proxy:!0}])})]},proxy:!0},{key:"buttons",fn:function(){return[t("ui-button",{attrs:{theme:"primary","validate-group":"package-action"},on:{click:a.submit}},[t("span",{domProps:{textContent:a._s(a.$gettext("Save"))}})])]},proxy:!0}])})},s=[],d={props:{command:{type:Function,required:!0}},data:()=>({from:"",to:"",type:"rename"}),computed:{packageList(){const g=this.command.data.response;return g?g.rows.map(a=>a.package):[]}},methods:{submit(){this.$valid("package-action")&&(this.$emit("action",{action:this.type,from:this.from,to:this.to}),this.$dialog("PACKAGE_ACTION_DIALOG").close())},validateName(g){return!g||!this.packageList.includes(g)},setData(g){Object.assign(this,g)}}},h=d,x=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),I=(0,x.Z)(h,e,s,!1,null,null,null),P=I.exports},"./js/pages/admin/reseller-packages/index.vue":function(y,N,r){r.r(N),r.d(N,{default:function(){return o}});var e=function(){var n=this,p=n._self._c;return p("app-page",{attrs:{actions:[{name:"admin/reseller-packages/create",label:n.$gettext("Create Package"),icon:"#plus-fill"},{icon:"#extract",label:n.$gettext("Import Packages"),handler:n.$dialog("IMPORT_PACKAGES_DIALOG").open}]},scopedSlots:n._u([{key:"default",fn:function(){return[p("app-page-section",[p("ui-api-table",n._b({on:{"action:del":function(v){n.$dialog("DELETE_ITEMS_DIALOG").open()},"action:export":n.exportPackages,"table:rowClick":n.rowClick},scopedSlots:n._u([{key:"col:package",fn:function({item:v}){return[p("ui-link",{attrs:{name:"admin/reseller-packages/view",params:v}},[n._v(`
                        `+n._s(v.package)+`
                    `)])]}},{key:"col:bandwidth",fn:function({bandwidth:v}){return[v===1/0?p("span",{domProps:{textContent:n._s(n.$gettext("Unlimited"))}}):[n._v(`
                        `+n._s(n.humanReadableSize(v))+`
                    `)]]}},{key:"col:quota",fn:function({quota:v}){return[v===1/0?p("span",{domProps:{textContent:n._s(n.$gettext("Unlimited"))}}):[n._v(`
                        `+n._s(n.humanReadableSize(v))+`
                    `)]]}},{key:"row:actions",fn:function({item:v}){return[p("ui-actions",[p("ui-link",{on:{click:function(E){return n.openActionDialog("rename",v)}}},[p("span",{domProps:{textContent:n._s(n.$gettext("Rename"))}})]),n._v(" "),p("ui-link",{on:{click:function(E){return n.openActionDialog("copy",v)}}},[p("span",{domProps:{textContent:n._s(n.$gettext("Copy"))}})])],1)]}}]),model:{value:n.select,callback:function(v){n.select=v},expression:"select"}},"ui-api-table",{command:n.$commands.getPackages,rowID:"package",columns:{package:{label:n.$gettext("Package"),grow:!0,width:"30%"},bandwidth:n.$gettext("Bandwidth"),quota:n.$gettext("Disk Usage"),ips:n.$gettext("IP(s)")},actions:{del:n.$gettext("Delete"),export:n.$gettext("Export")}},!1))],1),n._v(" "),p("ui-dialog-delete-items",{attrs:{subject:n.$ngettext("package","packages",n.select.length)},on:{"click:confirm":n.deleteItems}}),n._v(" "),p("import-packages-dialog",{on:{import:n.importPackages}}),n._v(" "),p("package-action-dialog",{ref:"actionDialog",attrs:{command:n.$commands.getPackages},on:{action:n.doPackageAction}})]},proxy:!0}])})},s=[],d=r("./js/api/commands/admin/users/packages.js"),h=r("./js/composables/filters.ts"),x=r("./js/components/local/import-packages-dialog.vue"),I=r("./js/components/local/package-action-dialog.vue"),P={preload:d.EV,commands:{getPackages:d.EV},components:{ImportPackagesDialog:x.Z,PackageActionDialog:I.Z},data:()=>({select:[]}),methods:{humanReadableSize:h.eB,deleteItems(){(0,d.wI)({select:this.select}).then(this.$reloadApiTable)},exportPackages(){(0,d.$o)({select:this.select})},importPackages(f){(0,d.Nx)({import:f}).then(this.$reloadApiTable)},rowClick({item:f}){this.$router.push({name:"admin/reseller-packages/view",params:{package:f.package}})},openActionDialog(f,n){this.$dialog("PACKAGE_ACTION_DIALOG").open(),this.$refs.actionDialog.setData({type:f,from:n.package,to:""})},doPackageAction(f){(0,d.kz)(f).then(this.$reloadApiTable)}}},g=P,a=r("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),t=(0,a.Z)(g,e,s,!1,null,null,null),o=t.exports}}]);
