"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1931],{"../node_modules/date-fns/esm/formatDistance/index.js":function(z,x,d){d.d(x,{Z:function(){return L}});var M=d("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),i=d("../node_modules/date-fns/esm/toDate/index.js"),s=d("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function _(r,a){(0,s.Z)(2,arguments);var n=(0,i.Z)(r),v=(0,i.Z)(a),g=n.getTime()-v.getTime();return g<0?-1:g>0?1:g}function h(r,a){(0,s.Z)(2,arguments);var n=(0,i.Z)(r),v=(0,i.Z)(a),g=n.getFullYear()-v.getFullYear(),b=n.getMonth()-v.getMonth();return g*12+b}function f(r){(0,s.Z)(1,arguments);var a=(0,i.Z)(r);return a.setHours(23,59,59,999),a}function P(r){(0,s.Z)(1,arguments);var a=(0,i.Z)(r),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function D(r){(0,s.Z)(1,arguments);var a=(0,i.Z)(r);return f(a).getTime()===P(a).getTime()}function T(r,a){(0,s.Z)(2,arguments);var n=(0,i.Z)(r),v=(0,i.Z)(a),g=_(n,v),b=Math.abs(h(n,v)),l;if(b<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-g*b);var Z=_(n,v)===-g;D((0,i.Z)(r))&&b===1&&_(r,v)===1&&(Z=!1),l=g*(b-Number(Z))}return l===0?0:l}function E(r,a){return(0,s.Z)(2,arguments),(0,i.Z)(r).getTime()-(0,i.Z)(a).getTime()}var C={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(a){return a<0?Math.ceil(a):Math.floor(a)}},t="trunc";function e(r){return r?C[r]:C[t]}function U(r,a,n){(0,s.Z)(2,arguments);var v=E(r,a)/1e3;return e(n==null?void 0:n.roundingMethod)(v)}var S=d("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function j(r,a){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n]);return r}function N(r){return j({},r)}var o=d("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),u=1440,p=2520,$=43200,A=86400;function L(r,a,n){var v,g;(0,s.Z)(2,arguments);var b=(0,M.j)(),l=(v=(g=n==null?void 0:n.locale)!==null&&g!==void 0?g:b.locale)!==null&&v!==void 0?v:S.Z;if(!l.formatDistance)throw new RangeError("locale must contain formatDistance property");var Z=_(r,a);if(isNaN(Z))throw new RangeError("Invalid time value");var m=j(N(n),{addSuffix:Boolean(n==null?void 0:n.addSuffix),comparison:Z}),y,R;Z>0?(y=(0,i.Z)(a),R=(0,i.Z)(r)):(y=(0,i.Z)(r),R=(0,i.Z)(a));var O=U(R,y),X=((0,o.Z)(R)-(0,o.Z)(y))/1e3,c=Math.round((O-X)/60),I;if(c<2)return n!=null&&n.includeSeconds?O<5?l.formatDistance("lessThanXSeconds",5,m):O<10?l.formatDistance("lessThanXSeconds",10,m):O<20?l.formatDistance("lessThanXSeconds",20,m):O<40?l.formatDistance("halfAMinute",0,m):O<60?l.formatDistance("lessThanXMinutes",1,m):l.formatDistance("xMinutes",1,m):c===0?l.formatDistance("lessThanXMinutes",1,m):l.formatDistance("xMinutes",c,m);if(c<45)return l.formatDistance("xMinutes",c,m);if(c<90)return l.formatDistance("aboutXHours",1,m);if(c<u){var W=Math.round(c/60);return l.formatDistance("aboutXHours",W,m)}else{if(c<p)return l.formatDistance("xDays",1,m);if(c<$){var K=Math.round(c/u);return l.formatDistance("xDays",K,m)}else if(c<A)return I=Math.round(c/$),l.formatDistance("aboutXMonths",I,m)}if(I=T(R,y),I<12){var Y=Math.round(c/$);return l.formatDistance("xMonths",Y,m)}else{var F=I%12,B=Math.floor(I/12);return F<3?l.formatDistance("aboutXYears",B,m):F<9?l.formatDistance("overXYears",B,m):l.formatDistance("almostXYears",B+1,m)}}},"./js/api/commands/admin/stats.js":function(z,x,d){d.d(x,{f:function(){return i}});var M=d("./js/api/command/index.js");const i=M.Z.get({id:"ADMIN_STATS",url:"/CMD_ADMIN_STATS",params:{ipp:99999,bytes:!0},after:s=>s.mapProps({allocated:s.mapValues(s.convert.toAppLimit),usage:s.mapProps({last_tally:s.convert.toAppDate}),disk:s.flow(s.deleteProp("info"),s.toArray,s.mapArray(s.flow(s.moveProp({Filesystem:"fs","1-blocks":"size",Used:"used",Available:"free",Capacity:"usage","Mounted on":"mount"}),s.mapProps({size:s.convert.toAppNumber,used:s.convert.toAppNumber,free:s.convert.toAppNumber})))),loadavg:s.flow(s.mapValues(s.flow(parseFloat,_=>_.toFixed(2))),({one:_,five:h,fifteen:f})=>[_,h,f].join(", "))})})},"./js/composables/dateFilter.ts":function(z,x,d){d.d(x,{W:function(){return h},f:function(){return s.f}});var M=d("../node_modules/ramda/es/index.js"),i=d("../node_modules/date-fns/esm/format/index.js"),s=d("./js/modules/date-formats.ts"),_=d("./js/modules/customizations/date-formats/default.ts");const h=M.WAo((f,P)=>{if(P)try{return(0,i.Z)(P,s.f.value[f])}catch(D){return console.warn(`Given ${f} format is incorrect:
${D.message}`),(0,i.Z)(P,_.d[f])}return""})},"./js/composables/filters.ts":function(z,x,d){d.d(x,{Q0:function(){return U},aS:function(){return j},d5:function(){return S},eB:function(){return C},hT:function(){return T},kC:function(){return D},n9:function(){return e},zM:function(){return E}});var M=d("../node_modules/date-fns/esm/formatDistance/index.js"),i=d("../node_modules/punycode/punycode.es6.js"),s=d("./js/composables/dateFilter.ts"),_=d("./js/composables/gettext.ts");const{$gettext:h,$ngettext:f,$gettextInterpolate:P}=(0,_.Z)(),D=o=>{var u;return o?((u=o.at(0))===null||u===void 0?void 0:u.toUpperCase())+o.slice(1):""},T=(o,u="datetime")=>(0,s.W)(u,o),E=o=>(0,M.Z)(o,new Date),C=(o,u=1024)=>{const p=Number(o);if(!p)return"0 B";const $=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A=Math.floor(Math.log(p)/Math.log(u));return`${parseFloat((p/u**A).toFixed(2))} ${$[A]}`},t=o=>{try{return(0,i.xX)(o)}catch(u){return o}},e=o=>(0,i.xX)(o),U=o=>{if(!o||!o.includes("@"))return o;const[u,p]=o.split("@");return[u,t(p)].join("@")},S=o=>{if(o<60)return h("less than a minute");const u=Math.floor(o/60)%60,p=Math.floor(o/3600)%24,$=Math.floor(o/(3600*24)),A=[$?f("%{days} day","%{days} days",$):null,p?f("%{hours} hour","%{hours} hours",p):null,u?f("%{minutes} minute","%{minutes} minutes",u):null].filter(Boolean).join(", ");return P(A,{days:$,hours:p,minutes:u})},j=(o,u)=>o.length<=u?o:`${o.substring(0,u)}...`,N=()=>({capitalize:D,date:T,distanceFromNow:E,humanReadableSize:C,p6eUnicode:e,p6eUnicodeEmail:U,formatUptime:S,truncateString:j})},"./js/pages/admin/stats.vue":function(z,x,d){d.r(x),d.d(x,{default:function(){return E}});var M=function(){var t=this,e=t._self._c;return e("app-page",{attrs:{actions:[{label:t.$gettext("Server History"),theme:"safe",handler:()=>t.$router.push("/admin/history")},{label:t.$gettext("User Statistics"),handler:()=>t.$router.push("/user/stats"),icon:"site-summary"}]},scopedSlots:t._u([{key:"default",fn:function(){return[e("app-page-section",[e("table",{staticClass:"table-elem"},[e("thead",[e("tr",[e("th",[e("span",{domProps:{textContent:t._s(t.$gettext("Setting"))}})]),t._v(" "),e("th",[e("span",{domProps:{textContent:t._s(t.$gettext("Current Usage"))}})]),t._v(" "),e("th",[e("span",{domProps:{textContent:t._s(t.$gettext("Allocated"))}})])])]),t._v(" "),e("tbody",[e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Bandwidth"))}})]),t._v(" "),e("td",[t._v(`
                            `+t._s(t.humanReadableSize(t.stats.usage.bandwidth))+`
                        `)]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.bandwidth)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.humanReadableSize(t.stats.allocated.bandwidth))+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Disk Usage"))}})]),t._v(" "),e("td",[t._v(`
                            `+t._s(t.humanReadableSize(t.stats.usage.quota))+`
                        `)]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.quota)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.humanReadableSize(t.stats.allocated.quota))+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("E-mail Disk Usage"))}})]),t._v(" "),e("td",[t._v(`
                            `+t._s(t.humanReadableSize(t.stats.usage.email_quota))+`
                        `)]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Database Disk Usage"))}})]),t._v(" "),e("td",[t._v(`
                            `+t._s(t.humanReadableSize(t.stats.usage.db_quota))+`
                        `)]),t._v(" "),e("td")]),t._v(" "),t.haveInode?e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Inodes"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.inode))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.inode)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.inode)+`
                            `)]],2)]):t._e(),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("# of Users"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.nusers))]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("# of Resellers"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.nresellers))]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("# of Domains"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.vdomains))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.vdomains)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.vdomains)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("# of Subdomains"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.nsubdomains))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.nsubdomains)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.nsubdomains)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("E-mail Accounts"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.nemails))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.nemails)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.nemails)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("E-mail Forwarders"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.nemailf))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.nemailf)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.nemailf)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Mailing Lists"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.nemailml))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.nemailml)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.nemailml)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Autoresponders"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.nemailr))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.nemailr)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.nemailr)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Sent E-mails"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.email_deliveries_outgoing))]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Received E-mails"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.email_deliveries_incoming))]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("# of MySQL DBs"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.mysql))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.mysql)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.mysql)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Domain Pointers"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.domainptr))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.domainptr)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.domainptr)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("FTP Accounts"))}})]),t._v(" "),e("td",[t._v(t._s(t.stats.usage.ftp))]),t._v(" "),e("td",[t.isUnlimited(t.stats.allocated.ftp)?e("span",{domProps:{textContent:t._s(t.$gettext("Unlimited"))}}):[t._v(`
                                `+t._s(t.stats.allocated.FTP)+`
                            `)]],2)]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Load Average"))}})]),t._v(" "),e("td",[t._v(`
                            `+t._s(t.stats.loadavg)+`
                        `)]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("span",{domProps:{textContent:t._s(t.$gettext("Last Tally Completion"))}})]),t._v(" "),e("td",[t._v(`
                            `+t._s(t.date(t.stats.usage.last_tally,"datetime"))+`
                        `)]),t._v(" "),e("td")])])])]),t._v(" "),e("app-page-section",[e("h2",{domProps:{textContent:t._s(t.$gettextInterpolate(t.$gettext("Usage Statistics for %{device}"),{device:t.stats.device}))}}),t._v(" "),e("ui-number-label",{attrs:{number:t.stats.RX,theme:"safe"}},[e("span",{domProps:{textContent:t._s(t.$gettext("Received"))}})]),t._v(" "),e("ui-number-label",{attrs:{number:t.stats.TX,theme:"primary"}},[e("span",{domProps:{textContent:t._s(t.$gettext("Transmitted"))}})]),t._v(" "),e("ui-r-table",t._b({scopedSlots:t._u([t._l(["size","used","free"],function(U){return{key:`col:${U}`,fn:function({item:S}){return[t._v(`
                    `+t._s(t.humanReadableSize(S[U]))+`
                `)]}}})],null,!0)},"ui-r-table",{isCheckable:!1,rows:t.stats.disk,columns:[{id:"fs",label:t.$gettext("Filesystem"),grow:!0},{id:"size",label:t.$gettext("Size")},{id:"used",label:t.$gettext("Used")},{id:"free",label:t.$gettext("Available")},{id:"usage",label:t.$gettext("Usage")},{id:"mount",label:t.$gettext("Mounted on")}],disablePagination:!0,verticalLayout:t.clientStore.isPhone},!1))],1)]},proxy:!0}])})},i=[],s=d("./js/stores/index.ts"),_=d("./js/api/commands/admin/stats.js"),h=d("./js/composables/filters.ts"),f={name:"AdminStats",preload:_.f,api:[{command:_.f,bind:"stats"}],computed:{stats(){return this.$api.stats},haveInodes(){return this.$_flags.server.inode},isUnlimited(){return C=>C===1/0},...(0,s.Kc)(["client"])},methods:{date:h.hT,humanReadableSize:h.eB}},P=f,D=d("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),T=(0,D.Z)(P,M,i,!1,null,null,null),E=T.exports}}]);
