"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6676],{"../node_modules/date-fns/esm/formatDistance/index.js":function(C,T,a){a.d(T,{Z:function(){return F}});var f=a("../node_modules/date-fns/esm/_lib/defaultOptions/index.js"),i=a("../node_modules/date-fns/esm/toDate/index.js"),d=a("../node_modules/date-fns/esm/_lib/requiredArgs/index.js");function m(s,r){(0,d.Z)(2,arguments);var t=(0,i.Z)(s),v=(0,i.Z)(r),_=t.getTime()-v.getTime();return _<0?-1:_>0?1:_}function A(s,r){(0,d.Z)(2,arguments);var t=(0,i.Z)(s),v=(0,i.Z)(r),_=t.getFullYear()-v.getFullYear(),I=t.getMonth()-v.getMonth();return _*12+I}function p(s){(0,d.Z)(1,arguments);var r=(0,i.Z)(s);return r.setHours(23,59,59,999),r}function D(s){(0,d.Z)(1,arguments);var r=(0,i.Z)(s),t=r.getMonth();return r.setFullYear(r.getFullYear(),t+1,0),r.setHours(23,59,59,999),r}function E(s){(0,d.Z)(1,arguments);var r=(0,i.Z)(s);return p(r).getTime()===D(r).getTime()}function n(s,r){(0,d.Z)(2,arguments);var t=(0,i.Z)(s),v=(0,i.Z)(r),_=m(t,v),I=Math.abs(A(t,v)),u;if(I<1)u=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-_*I);var P=m(t,v)===-_;E((0,i.Z)(s))&&I===1&&m(s,v)===1&&(P=!1),u=_*(I-Number(P))}return u===0?0:u}function Z(s,r){return(0,d.Z)(2,arguments),(0,i.Z)(s).getTime()-(0,i.Z)(r).getTime()}var R={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(r){return r<0?Math.ceil(r):Math.floor(r)}},e="trunc";function h(s){return s?R[s]:R[e]}function M(s,r,t){(0,d.Z)(2,arguments);var v=Z(s,r)/1e3;return h(t==null?void 0:t.roundingMethod)(v)}var L=a("../node_modules/date-fns/esm/_lib/defaultLocale/index.js");function j(s,r){if(s==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(s[t]=r[t]);return s}function B(s){return j({},s)}var o=a("../node_modules/date-fns/esm/_lib/getTimezoneOffsetInMilliseconds/index.js"),l=1440,O=2520,x=43200,S=86400;function F(s,r,t){var v,_;(0,d.Z)(2,arguments);var I=(0,f.j)(),u=(v=(_=t==null?void 0:t.locale)!==null&&_!==void 0?_:I.locale)!==null&&v!==void 0?v:L.Z;if(!u.formatDistance)throw new RangeError("locale must contain formatDistance property");var P=m(s,r);if(isNaN(P))throw new RangeError("Invalid time value");var c=j(B(t),{addSuffix:Boolean(t==null?void 0:t.addSuffix),comparison:P}),N,$;P>0?(N=(0,i.Z)(r),$=(0,i.Z)(s)):(N=(0,i.Z)(s),$=(0,i.Z)(r));var y=M($,N),W=((0,o.Z)($)-(0,o.Z)(N))/1e3,g=Math.round((y-W)/60),U;if(g<2)return t!=null&&t.includeSeconds?y<5?u.formatDistance("lessThanXSeconds",5,c):y<10?u.formatDistance("lessThanXSeconds",10,c):y<20?u.formatDistance("lessThanXSeconds",20,c):y<40?u.formatDistance("halfAMinute",0,c):y<60?u.formatDistance("lessThanXMinutes",1,c):u.formatDistance("xMinutes",1,c):g===0?u.formatDistance("lessThanXMinutes",1,c):u.formatDistance("xMinutes",g,c);if(g<45)return u.formatDistance("xMinutes",g,c);if(g<90)return u.formatDistance("aboutXHours",1,c);if(g<l){var X=Math.round(g/60);return u.formatDistance("aboutXHours",X,c)}else{if(g<O)return u.formatDistance("xDays",1,c);if(g<x){var z=Math.round(g/l);return u.formatDistance("xDays",z,c)}else if(g<S)return U=Math.round(g/x),u.formatDistance("aboutXMonths",U,c)}if(U=n($,N),U<12){var k=Math.round(g/x);return u.formatDistance("xMonths",k,c)}else{var w=U%12,b=Math.floor(U/12);return w<3?u.formatDistance("aboutXYears",b,c):w<9?u.formatDistance("overXYears",b,c):u.formatDistance("almostXYears",b+1,c)}}},"./js/api/commands/user/email/autoresponders.js":function(C,T,a){a.d(T,{FX:function(){return m},Q4:function(){return d},c:function(){return p},i5:function(){return A},nd:function(){return D},xs:function(){return E}});var f=a("./js/api/command/index.js");const i=n=>n.mapProps({custom_reply_headers:n.isEqual("1"),reply_content_types:n.toSelect,reply_encodings:n.toSelect,reply_once_select:n.toSelect}),d=f.Z.get({id:"AUTORESPONDERS",url:"/CMD_EMAIL_AUTORESPONDER",domain:!0,after:n=>n.flow(n.mapValues((Z,R)=>({name:R,cc:Z})),n.toArray)}),m=f.Z.select({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"delete"},domain:!0}),A=f.Z.post({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"create"},domain:!0,schema:{user:f.Z.REQUIRED_STRING,text:f.Z.REQUIRED_STRING,cc:{type:String,required:!0,validator:n=>["ON","OFF"].includes(n)},email:f.Z.OPTIONAL_STRING}}),p=A.extend({params:{action:"modify"}}),D=f.Z.get({id:"AUTORESPONDER",url:"/CMD_EMAIL_AUTORESPONDER_MODIFY",domain:!0,schema:{user:f.Z.REQUIRED_STRING},after:n=>n.mapProps({text:n.flow(n.convert.toAppString,n.convert.toAppText),email:n.setDefault(""),cc:n.feedWith(1,n.flow(n.getProp("email"),n.notEmpty)),headers:i(n)})}),E=f.Z.get({id:"AUTORESPONDER_DEFAULTS",url:"/CMD_EMAIL_AUTORESPONDER_CREATE",domain:!0,after:n=>n.flow(n.getProp("headers"),i(n))})},"./js/composables/dateFilter.ts":function(C,T,a){a.d(T,{W:function(){return A},f:function(){return d.f}});var f=a("../node_modules/ramda/es/index.js"),i=a("../node_modules/date-fns/esm/format/index.js"),d=a("./js/modules/date-formats.ts"),m=a("./js/modules/customizations/date-formats/default.ts");const A=f.WAo((p,D)=>{if(D)try{return(0,i.Z)(D,d.f.value[p])}catch(E){return console.warn(`Given ${p} format is incorrect:
${E.message}`),(0,i.Z)(D,m.d[p])}return""})},"./js/composables/filters.ts":function(C,T,a){a.d(T,{Q0:function(){return M},aS:function(){return j},d5:function(){return L},eB:function(){return R},hT:function(){return n},kC:function(){return E},n9:function(){return h},zM:function(){return Z}});var f=a("../node_modules/date-fns/esm/formatDistance/index.js"),i=a("../node_modules/punycode/punycode.es6.js"),d=a("./js/composables/dateFilter.ts"),m=a("./js/composables/gettext.ts");const{$gettext:A,$ngettext:p,$gettextInterpolate:D}=(0,m.Z)(),E=o=>{var l;return o?((l=o.at(0))===null||l===void 0?void 0:l.toUpperCase())+o.slice(1):""},n=(o,l="datetime")=>(0,d.W)(l,o),Z=o=>(0,f.Z)(o,new Date),R=(o,l=1024)=>{const O=Number(o);if(!O)return"0 B";const x=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],S=Math.floor(Math.log(O)/Math.log(l));return`${parseFloat((O/l**S).toFixed(2))} ${x[S]}`},e=o=>{try{return(0,i.xX)(o)}catch(l){return o}},h=o=>(0,i.xX)(o),M=o=>{if(!o||!o.includes("@"))return o;const[l,O]=o.split("@");return[l,e(O)].join("@")},L=o=>{if(o<60)return A("less than a minute");const l=Math.floor(o/60)%60,O=Math.floor(o/3600)%24,x=Math.floor(o/(3600*24)),S=[x?p("%{days} day","%{days} days",x):null,O?p("%{hours} hour","%{hours} hours",O):null,l?p("%{minutes} minute","%{minutes} minutes",l):null].filter(Boolean).join(", ");return D(S,{days:x,hours:O,minutes:l})},j=(o,l)=>o.length<=l?o:`${o.substring(0,l)}...`,B=()=>({capitalize:E,date:n,distanceFromNow:Z,humanReadableSize:R,p6eUnicode:h,p6eUnicodeEmail:M,formatUptime:L,truncateString:j})},"./js/pages/user/email/autoresponders/index.vue":function(C,T,a){a.r(T),a.d(T,{default:function(){return Z}});var f=function(){var e=this,h=e._self._c;return h("app-page",{attrs:{actions:[{label:e.$gettext("Create Autoresponder"),name:"user/email/autoresponders/create",icon:"#plus-fill",visible:e.$api.autoresponders.length<=e.limit}]},scopedSlots:e._u([{key:"details",fn:function(){return[h("ui-infobar-item",{attrs:{title:e.$gettext("Details")}},[h("ui-infobar-stats",{attrs:{title:e.$gettext("Forwarders"),usage:e.$api.autoresponders.length,limit:e.limit}})],1)]},proxy:!0},{key:"default",fn:function(){return[h("app-page-section",[h("ui-r-table",e._b({attrs:{"disable-pagination":"","checked-rows":e.checkedRows},on:{"update:checkedRows":function(M){e.checkedRows=M}},scopedSlots:e._u([{key:"table:actions",fn:function(){return[h("ui-table-action",{on:{click:function(M){e.$dialog("DELETE_ITEMS_DIALOG").open()}}},[h("span",{domProps:{textContent:e._s(e.$gettext("Delete"))}})])]},proxy:!0},{key:"row:actions",fn:function({name:M}){return[h("ui-button-link",{attrs:{size:"small",theme:"light",name:"user/email/autoresponders/modify",params:{user:M},icon:"pencil",title:e.$gettext("Modify")}},[e.clientStore.isDesktop?h("span",{domProps:{textContent:e._s(e.$gettext("Modify"))}}):e._e()])]}},{key:"col:name",fn:function({name:M}){return[e._v(`
                    `+e._s(M)+"@"+e._s(e.$domainUnicode)+`
                `)]}},{key:"col:cc",fn:function({cc:M}){return[e._v(`
                    `+e._s(e.p6eUnicodeEmail(M))+`
                `)]}}])},"ui-r-table",{rows:e.$api.autoresponders,columns:[{id:"name",label:e.$gettext("Autoresponder"),grow:!0},{id:"cc",label:e.$gettext("CC Address")}],verticalLayout:e.clientStore.isPhone},!1))],1),e._v(" "),h("ui-dialog-delete-items",{attrs:{subject:e.$ngettext("autoresponder","autoresponders",e.checkedRows.length)},on:{"click:confirm":e.deleteAutoResponders}})]},proxy:!0}])})},i=[],d=a("./js/stores/index.ts"),m=a("./js/api/commands/user/email/autoresponders.js"),A=a("./js/composables/filters.ts"),p={name:"AutoResponders",preload:m.Q4,api:[{command:m.Q4,bind:"autoresponders"}],data(){return{checkedRows:[]}},computed:{checkedAutoresponders(){return this.checkedRows.map(R=>R.name)},limit(){return this.$_session.usage.autoresponders.limit},...(0,d.Kc)(["client"])},watch:{$domain(){this.reloadRows()}},methods:{p6eUnicodeEmail:A.Q0,reloadRows(){(0,m.Q4)()},async deleteAutoResponders(){await(0,m.FX)({select:this.checkedAutoresponders})&&(this.checkedRows=[],this.reloadRows())}}},D=p,E=a("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),n=(0,E.Z)(D,f,i,!1,null,null,null),Z=n.exports}}]);
