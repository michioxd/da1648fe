(self.webpackChunk=self.webpackChunk||[]).push([[1968],{"./js/api/commands/user/email/autoresponders.js":function(y,p,o){"use strict";o.d(p,{FX:function(){return f},Q4:function(){return m},c:function(){return _},i5:function(){return d},nd:function(){return v},xs:function(){return a}});var t=o("./js/api/command/index.js");const c=s=>s.mapProps({custom_reply_headers:s.isEqual("1"),reply_content_types:s.toSelect,reply_encodings:s.toSelect,reply_once_select:s.toSelect}),m=t.Z.get({id:"AUTORESPONDERS",url:"/CMD_EMAIL_AUTORESPONDER",domain:!0,after:s=>s.flow(s.mapValues((i,r)=>({name:r,cc:i})),s.toArray)}),f=t.Z.select({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"delete"},domain:!0}),d=t.Z.post({url:"/CMD_EMAIL_AUTORESPONDER",params:{action:"create"},domain:!0,schema:{user:t.Z.REQUIRED_STRING,text:t.Z.REQUIRED_STRING,cc:{type:String,required:!0,validator:s=>["ON","OFF"].includes(s)},email:t.Z.OPTIONAL_STRING}}),_=d.extend({params:{action:"modify"}}),v=t.Z.get({id:"AUTORESPONDER",url:"/CMD_EMAIL_AUTORESPONDER_MODIFY",domain:!0,schema:{user:t.Z.REQUIRED_STRING},after:s=>s.mapProps({text:s.flow(s.convert.toAppString,s.convert.toAppText),email:s.setDefault(""),cc:s.feedWith(1,s.flow(s.getProp("email"),s.notEmpty)),headers:c(s)})}),a=t.Z.get({id:"AUTORESPONDER_DEFAULTS",url:"/CMD_EMAIL_AUTORESPONDER_CREATE",domain:!0,after:s=>s.flow(s.getProp("headers"),c(s))})},"./js/api/commands/validation/index.js":function(y,p,o){"use strict";o.d(p,{i9:function(){return n},ty:function(){return u},l7:function(){return i},OE:function(){return e},ub:function(){return A},oH:function(){return v},U5:function(){return a},k_:function(){return _},PR:function(){return r},uo:function(){return g},Jj:function(){return E},rV:function(){return l}});var t=o("./js/api/command/index.js"),c=o("../node_modules/punycode/punycode.es6.js"),m=o("./js/api/commands/converters/index.ts"),f={isValid(x){return typeof x.error=="undefined"},getMessage(x){return(0,m.S8)(x.error||"")}};const d=t.Z.get({url:"/CMD_JSON_VALIDATE",schema:{value:t.Z.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:f.isValid,message:f.getMessage}}),_=d.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}}),v=d.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}}),a=d.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0}),s=d.extend({params:{type:"dns"},domain:!0,schema:{record:t.Z.REQUIRED_STRING}}),i=s.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:t.Z.REQUIRED_STRING}}),r=i.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:({value:x})=>({value:"10",mx_value:x})}),u=s.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:t.Z.REQUIRED_STRING,value:null}}),e=d.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}}),n=d.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}}),l=d.extend({id:"VALIDATE_USERNAME",params:{type:"username"}}),E=d.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}}),g=d.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}}),A=d.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:({value:x})=>({value:c.ZP.toASCII(x)})}),j=d.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}})},"../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&id=5979e28a&prod&lang=scss&":function(){},"./js/api/commands/converters/customItems.ts":function(y,p,o){"use strict";o.d(p,{CR:function(){return d}});var t=o("../node_modules/ramda/es/index.js"),c=o("./js/api/commands/converters/index.ts"),m=o("./js/api/commands/utils/transduce.ts"),f=o("./js/api/commands/converters/toSelectData.ts");const d=a=>{const s={name:a.name,type:a.type==="listbox"?"select":a.type,label:a.string,description:a.desc||"",value:a.type==="checkbox"?(0,c.sw)(a.checked||"no"):a.value||""};return s.type==="select"?t.BPw(s,(0,f.M1)(a.select||{})):s},_=a=>(0,m.vr)([(0,m.uD)(s=>/^item\d+val$/.test(s)),(0,m.r5)(s=>{const i=s,r=s.replace("val","txt"),u=a[i],e=a[r];return{[u]:e}})],Object.keys(a)),v=(a,s)=>t.qCK(r=>{const u={name:r.name,type:r.type==="listbox"?"select":r.type,description:r.desc||"",value:r.value||"",label:r.string};return r.type==="listbox"?(u.value=r.default,u.options=_(r)):r.type==="checkbox"&&(u.value=r.checked==="yes"),u},t.BPw({name:a}),(0,m.vr)([(0,m.r5)(r=>{const[u,e]=t.Vl2("=",r);return{[u]:e}})]),t.Vl2("&"))(s);p.ZP={fromObject:d,fromString:v}},"./js/api/commands/converters/index.ts":function(y,p,o){"use strict";o.d(p,{l$:function(){return i.ZP},t0:function(){return t.t0},S8:function(){return t.S8},ql:function(){return t.ql},sw:function(){return t.sw},Qu:function(){return t.Qu},He:function(){return t.He},M1:function(){return s.M1},sf:function(){return u},cc:function(){return a}});var t=o("./js/api/commands/converters/primitive.ts"),c=o("../node_modules/monet/dist/monet.js"),m=o("./js/api/commands/types.ts");const f=e=>typeof e=="object"?c.Either.Right(e):c.Either.Left(new Error("Passed param is not an object")),d=e=>typeof e.usage=="string"?c.Either.Right(e):c.Either.Left(new Error("usage property is required")),_=e=>({usage:(0,t.He)(e.usage),limit:(0,t.Qu)(e.limit)}),v=({usage:e,limit:n})=>{let l=m.H.Normal;const E=Math.floor(e/n*100);return E>=100?l=m.H.OverUsed:E>80&&(l=m.H.AlmostUsed),{usage:e,limit:n,status:l}},a=e=>{const n=c.Either.Right(e).flatMap(f).flatMap(d).map(_).map(v);if(n.isLeft())throw n.left();return n.right()};var s=o("./js/api/commands/converters/toSelectData.ts"),i=o("./js/api/commands/converters/customItems.ts"),r=o("../node_modules/ramda/es/index.js");const u=e=>n=>{const{info:l}=n,E=r.CEd(["info"],n);return{columns:l.columns,rowsCount:Number(l.rows),rows:r.UID(e,r.VO0(E))}}},"./js/api/commands/converters/toSelectData.ts":function(y,p,o){"use strict";o.d(p,{M1:function(){return v}});var t=o("../node_modules/monet/dist/monet.js"),c=o.n(t),m=o("./js/api/commands/utils/transduce.ts"),f=o("../node_modules/ramda/es/index.js");const d=a=>t.Maybe.Some(a).flatMap(s=>{const i=s.find(r=>r.selected==="yes");return i?t.Maybe.Some(i):t.Maybe.None()}).flatMap(s=>t.Maybe.fromNull(s.value)).orSome(""),_=(0,m.vr)([(0,m.r5)(a=>({[a.value]:a.text}))]),v=a=>{const s=(0,f.VO0)(a);return{value:d(s),options:_(s)}}},"./js/api/commands/types.ts":function(y,p,o){"use strict";o.d(p,{H:function(){return t}});var t;(function(c){c.Normal="normal",c.AlmostUsed="almost_used",c.OverUsed="overused"})(t||(t={}))},"./js/api/commands/utils/transduce.ts":function(y,p,o){"use strict";o.d(p,{Re:function(){return f},r5:function(){return c},uD:function(){return m},vr:function(){return s},zh:function(){return v}});var t=o("../node_modules/ramda/es/index.js");const c=i=>r=>(u,e)=>{const n=i(e);return r(u,n)},m=i=>r=>(u,e)=>i(e)?r(u,e):u,f=(i,r)=>(i.push(r),i),d=(i,r)=>t.BPw(i,r),_=(i,r,u,e)=>{const n=t.qCK(...u);return e.reduce(n(r),i)},v=t.WAo(_),a=v([],f),s=v({},d)},"./js/pages/user/email/autoresponders/create.vue":function(y,p,o){"use strict";o.r(p),o.d(p,{default:function(){return r}});var t=function(){var e=this,n=e._self._c;return n("app-page",{attrs:{id:"create-autoresponder"},scopedSlots:e._u([{key:"default",fn:function(){return[n("app-page-section",[n("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0,validateAddress:e.validateAddress}},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("Responder Address:"))}})]},proxy:!0},{key:"content",fn:function(){return[n("input-text",{attrs:{suffix:`@${e.$domainUnicode}`},model:{value:e.user,callback:function(l){e.user=l},expression:"user"}})]},proxy:!0},{key:"error:validateAddress",fn:function(){return[n("span",[e._v(`
                        `+e._s(e.$api.emailValidation.message)+`
                    `)])]},proxy:!0}])}),e._v(" "),e.$api.defaults.custom_reply_headers?[n("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("Subject Prefix"))}})]},proxy:!0},{key:"content",fn:function(){return[n("input-text",{staticClass:"input-1px",attrs:{suffix:e.$gettext(": original subject")},model:{value:e.subjectPrefix,callback:function(l){e.subjectPrefix=l},expression:"subjectPrefix"}})]},proxy:!0}],null,!1,4142289341)}),e._v(" "),n("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("Content-Type"))}})]},proxy:!0},{key:"content",fn:function(){return[n("input-select",{attrs:{options:e.$api.defaults.reply_content_types.options},model:{value:e.contentType,callback:function(l){e.contentType=l},expression:"contentType"}})]},proxy:!0}],null,!1,4051257851)}),e._v(" "),n("ui-form-element",{scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("Reply Frequency"))}})]},proxy:!0},{key:"tooltip",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("Minimum time before a repeated reply"))}})]},proxy:!0},{key:"content",fn:function(){return[n("input-select",{attrs:{options:e.$api.defaults.reply_once_select.options},model:{value:e.onceSelect,callback:function(l){e.onceSelect=l},expression:"onceSelect"}})]},proxy:!0}],null,!1,2539291514)})]:e._e(),e._v(" "),n("ui-form-element",{attrs:{group:"autoresponder",validators:{required:!0}},scopedSlots:e._u([{key:"title",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("Responder Message:"))}})]},proxy:!0},{key:"content",fn:function(){return[n("input-textarea",{model:{value:e.text,callback:function(l){e.text=l},expression:"text"}})]},proxy:!0}])}),e._v(" "),e.cc?n("ui-form-element",{key:"cc-enabled",attrs:{group:"autoresponder",validators:{required:!0,validateCC:e.validateCC,regex:e.regexps.email}},scopedSlots:e._u([{key:"title",fn:function(){return[n("input-checkbox",{model:{value:e.cc,callback:function(l){e.cc=l},expression:"cc"}},[n("span",{domProps:{textContent:e._s(e.$gettext("Send a CC to:"))}})])]},proxy:!0},{key:"content",fn:function(){return[n("input-text",{model:{value:e.email,callback:function(l){e.email=l},expression:"email"}})]},proxy:!0},{key:"error:validateCC",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("CC should not be equal to Autoresponder address"))}})]},proxy:!0},{key:"error:regex",fn:function(){return[n("span",{domProps:{textContent:e._s(e.$gettext("Should be valid email"))}})]},proxy:!0}])}):n("ui-form-element",{key:"cc-disabled",attrs:{group:"autoresponder"},scopedSlots:e._u([{key:"title",fn:function(){return[n("input-checkbox",{model:{value:e.cc,callback:function(l){e.cc=l},expression:"cc"}},[n("span",{domProps:{textContent:e._s(e.$gettext("Send a CC to:"))}})])]},proxy:!0},{key:"content",fn:function(){return[n("input-text",{attrs:{value:e.email,disabled:""}})]},proxy:!0}],null,!1,1503500733)})],2)]},proxy:!0},{key:"footer:buttons",fn:function(){return[n("ui-button",{attrs:{theme:"safe","validate-group":"autoresponder"},on:{click:e.createAutoresponder}},[e._v(`
            Save
        `)])]},proxy:!0}])})},c=[],m=o("./js/api/commands/user/email/autoresponders.js"),f=o("./js/api/commands/validation/index.js"),d=o("./js/modules/constants.js"),_={preload:m.xs,api:[{command:m.xs,bind:"defaults"},{command:f.oH,bind:"emailValidation"}],data(){return{user:"",text:"",cc:!1,email:"",subjectPrefix:"",encoding:"",onceSelect:"",contentType:""}},created(){this.subjectPrefix=this.$api.defaults.subject_prefix,this.encoding=this.$api.defaults.reply_encodings.value,this.contentType=this.$api.defaults.reply_content_types.value,this.onceSelect=this.$api.defaults.reply_once_select.value,this.regexps=d.gk},methods:{async createAutoresponder(){await(0,m.i5)({user:this.user,subject:this.subjectPrefix,reply_encoding:this.encoding,reply_content_type:this.contentType,reply_once_time:this.onceSelect,text:this.text,cc:this.cc?"ON":"OFF",email:this.$p6e.email2ascii(this.email)})&&this.$router.back()},validateCC(u){return u!==`${this.user}@${this.$domainUnicode}`},async validateAddress(u){if(!u)return!0;const{valid:e}=await(0,f.oH)({value:`${u}@${this.$domain}`,check_exists:!1});return e}}},v=_,a=o("../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&id=5979e28a&prod&lang=scss&"),s=o("../node_modules/vue-loader/lib/runtime/componentNormalizer.js"),i=(0,s.Z)(v,t,c,!1,null,null,null),r=i.exports},"../node_modules/vue-style-loader/index.js!../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&id=5979e28a&prod&lang=scss&":function(y,p,o){var t=o("../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-13.use[1]!../node_modules/css-loader/dist/cjs.js??clonedRuleSet-13.use[2]!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-13.use[3]!../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-13.use[4]!../node_modules/vue-loader/lib/index.js??vue-loader-options!../node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=unplugin-vue-define-options!./js/pages/user/email/autoresponders/create.vue?vue&type=style&index=0&id=5979e28a&prod&lang=scss&");t.__esModule&&(t=t.default),typeof t=="string"&&(t=[[y.id,t,""]]),t.locals&&(y.exports=t.locals);var c=o("../node_modules/vue-style-loader/lib/addStylesClient.js").Z,m=c("77b4fba8",t,!0,{})}}]);
